{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\merchant\\merchantInfo\\components\\KeysManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\merchant\\merchantInfo\\components\\KeysManage.vue","mtime":1616384580085},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.number.constructor\";\nimport _objectSpread from \"C:/Users/admin/Desktop/merchant-manager-web/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters } from 'vuex';\nimport list from '@/mixins/list';\nimport { message } from '@/utils/message';\nexport default {\n  name: 'KeysManage',\n  mixins: [list],\n  props: {\n    accountData: {\n      type: Object,\n      default: function _default() {}\n    },\n    value: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      dialogVisible: false,\n      recordLoading: false,\n      currentData: {},\n      filterType: null,\n      lastOne: false,\n      agentName: '',\n      list: [],\n      password: ''\n    };\n  },\n  computed: _objectSpread(_objectSpread({}, mapGetters(['globalDics'])), {}, {\n    agenttype: function agenttype() {\n      return this.globalDics.agenttype;\n    }\n  }),\n  watch: {\n    value: function value(val) {\n      if (val) {\n        this.listKeys();\n      }\n    }\n  },\n  mounted: function mounted() {},\n  methods: {\n    listKeys: function listKeys() {\n      var _this = this;\n\n      this.$api.searchKey({\n        pageIndex: this.pageIndex,\n        pageSize: this.pageSize,\n        agentId: this.accountData.agentId\n      }).then(function (res) {\n        if (res.code === 200) {\n          var data = res.data;\n          _this.list = data.record;\n          _this.total = data.totalRecord;\n        }\n      });\n    },\n    handleCurrentChange: function handleCurrentChange() {\n      this.listKeys();\n    },\n    handleSizeChange: function handleSizeChange(value) {\n      this.pageSize = value;\n      localStorage.setItem('pageSize', value);\n      this.listKeys();\n    },\n    handleClose: function handleClose() {\n      this.$emit('input', false);\n    },\n    filterMerchantType: function filterMerchantType(type) {\n      if (type) {\n        return this.agenttype.filter(function (item) {\n          return item.value === Number(type);\n        })[0] && this.agenttype.filter(function (item) {\n          return item.value === Number(type);\n        })[0].text;\n      }\n    },\n    generateKey: function generateKey() {\n      var _this2 = this;\n\n      this.$api.newAgentKey({\n        agentCode: this.accountData.agentCode,\n        agentId: this.accountData.agentId,\n        agentName: this.accountData.agentName\n      }).then(function (res) {\n        if (res.code === 200) {\n          _this2.listKeys();\n        }\n      });\n    },\n    disableKey: function disableKey(row) {\n      this.currentData = _objectSpread({}, row);\n      this.dialogVisible = true;\n      this.password = '';\n      var filterLists = this.list.filter(function (val) {\n        return val.status === 1;\n      }) || [];\n\n      if (filterLists.length === 1) {\n        this.lastOne = true;\n      } else {\n        this.lastOne = false;\n      }\n    },\n    handleSure: function handleSure() {\n      var _this3 = this;\n\n      if (!this.lastOne) {\n        if (!this.password) {\n          return message({\n            message: this.$t('merchant_merchantinfo_components_keysmanage_1003'),\n            type: 'error'\n          });\n        }\n\n        this.$api.stopAgentKey({\n          agentCode: this.currentData.agentCode,\n          agentId: this.currentData.agentId,\n          id: this.currentData.id,\n          pwd: this.password\n        }).then(function (res) {\n          if (res.code === 200) {\n            var index = _this3.list.findIndex(function (val) {\n              return val.id === _this3.currentData.id;\n            });\n\n            _this3.list[index].status = 0;\n            message({\n              message: _this3.$t('merchant_merchantinfo_components_keysmanage_1004'),\n              type: 'success'\n            });\n          }\n        });\n      }\n\n      this.dialogVisible = false;\n    },\n    handleCancle: function handleCancle() {\n      this.lastOne = false;\n      this.dialogVisible = false;\n    }\n  }\n};",null]}