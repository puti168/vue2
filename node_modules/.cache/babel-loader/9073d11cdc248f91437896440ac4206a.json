{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\gamemanagement\\betlimit\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\gamemanagement\\betlimit\\index.vue","mtime":1617695097411},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport _objectSpread from \"C:/Users/admin/Desktop/merchant-manager-web/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport list from '@/mixins/list';\nimport LimitPlan from \"./component/LimitPlan\";\nimport { mapGetters } from 'vuex';\nimport { routerNames } from '@/utils/consts';\nexport default {\n  name: routerNames.agentsLimitRed,\n  components: {\n    LimitPlan: LimitPlan\n  },\n  mixins: [list],\n  data: function data() {\n    return {\n      drawer: false,\n      limitPlanShow: false,\n      limitStatus: 1,\n      editFlag: 0,\n      form: {\n        id: ''\n      },\n      limitDialogVisible: false,\n      EditLimitForm: {},\n      limitId: '',\n      limitPlanData: {\n        id: '',\n        type: ''\n      }\n    };\n  },\n  computed: _objectSpread(_objectSpread({}, mapGetters(['buttonPermissions'])), {}, {\n    rules: function rules() {\n      var _this = this;\n\n      var validName = function validName(rule, value, callback) {\n        var regValue = value ? value.replace(/[\\u4e00-\\u9fa5]/g, 'xx') : '';\n\n        if (regValue && /^[A-Za-z0-9]{4,20}$/.test(regValue)) {\n          callback();\n        } else {\n          callback(new Error(_this.$t('message.deskValidName')));\n        }\n      };\n\n      var validateNumber = function validateNumber(rule, value, callback) {\n        var EditLimitForm = _this.EditLimitForm;\n\n        if (!/^[0-9]*[1-9][0-9]*$/.test(value)) {\n          callback(new Error(_this.$t('message.integerThan0')));\n        } else if (rule.field === 'max' && EditLimitForm.min && Number(EditLimitForm.min) > Number(value)) {\n          callback(new Error(_this.$t('message.maxThanMin')));\n        } else if (rule.field === 'min' && EditLimitForm.max && Number(EditLimitForm.max) < Number(value)) {\n          callback(new Error(_this.$t('message.minThanMax')));\n        }\n\n        callback();\n      };\n\n      return {\n        limitRedName: [{\n          required: true,\n          validator: validName,\n          trigger: 'blur'\n        }],\n        min: [{\n          required: true,\n          message: this.$t('message.minimumBet'),\n          trigger: 'blur'\n        }, {\n          validator: validateNumber,\n          trigger: 'blur'\n        }],\n        max: [{\n          required: true,\n          message: this.$t('message.maximumBet'),\n          trigger: 'blur'\n        }, {\n          validator: validateNumber,\n          trigger: 'blur'\n        }]\n      };\n    }\n  }),\n  methods: {\n    loadData: function loadData() {\n      var _this2 = this;\n\n      this.$api.merchantGetLimitRed().then(function (_) {\n        if (_.code === 200) {\n          _this2.list = _.data;\n        } else {\n          _this2.list = [];\n        }\n      }).catch(function (_) {\n        _this2.list = [];\n      });\n    },\n    changeLimitStatus: function changeLimitStatus(val) {\n      this.limitStatus = val;\n      this.loadData();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      console.log(this.$t('merchant.merchant_27', [val]));\n      this.loadData();\n    },\n    handleReset: function handleReset() {\n      this.form = {\n        id: '',\n        time: ''\n      };\n    },\n    handleSearch: function handleSearch() {},\n    handleNewLimit: function handleNewLimit() {\n      this.editFlag = 0;\n      this.EditLimitForm = {};\n      this.limitDialogVisible = true;\n    },\n    handleDetail: function handleDetail(item) {\n      this.limitPlanShow = true;\n      this.limitPlanData = _objectSpread(_objectSpread({}, item), {}, {\n        type: this.limitStatus\n      });\n    },\n    editRow: function editRow(index, row, flag) {\n      this.limitDialogVisible = true;\n      this.editFlag = flag;\n      this.EditLimitForm = row;\n    },\n    stopRow: function stopRow(index, row) {\n      var _this3 = this;\n\n      var status = row.status ? 0 : 1;\n      this.$api.merchantLimitRedModifyStatus(_objectSpread(_objectSpread({}, row), {}, {\n        status: status\n      })).then(function (_) {\n        if (_.code === 200) {\n          _this3.$message({\n            type: 'success',\n            message: _this3.$t('merchant.merchant_28')\n          });\n\n          _this3.loadData();\n        }\n      });\n    },\n    cancelLimitDialog: function cancelLimitDialog() {\n      this.limitDialogVisible = false;\n      this.$refs.form.resetFields();\n    },\n    commitLimitDialog: function commitLimitDialog() {\n      var _this4 = this;\n\n      var form = this.EditLimitForm;\n      this.$refs.form.validate(function (valid) {\n        if (valid) {\n          if (_this4.editFlag) {\n            // 修改\n            _this4.$api.merchantLimitRedEdit(form).then(function (_) {\n              if (_.code === 200) {\n                _this4.limitDialogVisible = false;\n\n                _this4.$message({\n                  type: 'success',\n                  message: _this4.$t('merchant.merchant_28')\n                });\n              }\n            });\n          } else {\n            _this4.$api.merchantLimitRedAdd(form).then(function (_) {\n              if (_.code === 200) {\n                _this4.limitDialogVisible = false;\n\n                _this4.$message({\n                  type: 'success',\n                  message: _this4.$t('merchant.merchant_29')\n                });\n              }\n            });\n          }\n        }\n      });\n    }\n  }\n};",null]}