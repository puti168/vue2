{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\core\\mixins\\form-modal-mixin.js","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\core\\mixins\\form-modal-mixin.js","mtime":1617594855309},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvYWRtaW4vRGVza3RvcC9tZXJjaGFudC1tYW5hZ2VyLXdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CgovKioNCiAqIOihqOWNleW8ueahhm1peGlu5bCB6KOFDQogKiDkvb/nlKjlj4LogIPvvJpzcmNcdmlld3NccmVwb3J0XGZpbmFuY2Vcc2V0dGxlbWVudGlucHV0XGNvbXBvbmVudHNcQWRkRm9ybS52dWUNCiAqLwppbXBvcnQgUHJvcFR5cGVzIGZyb20gJ2FudC1kZXNpZ24tdnVlL2VzL191dGlsL3Z1ZS10eXBlcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgdHlwZTogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBQcm9wVHlwZXMub25lT2YoWydhZGQnLCAnZWRpdCcsICd2aWV3J10pKSwge30sIHsKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0pLAogICAgdmlzaWJsZTogUHJvcFR5cGVzLmJvb2wsCiAgICBsb2FkaW5nOiBQcm9wVHlwZXMuYm9vbC5kZWYodHJ1ZSksCiAgICBmb3JtRGF0YTogUHJvcFR5cGVzLm9iamVjdC5kZWYoe30pCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYm9keUxvYWRpbmc6IGZhbHNlLAogICAgICBjb25maXJtTG9hZGluZzogZmFsc2UKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvKioNCiAgICAgKiDmmK/lkKbnu6fnu63noa7lrprlpITnkIYNCiAgICAgKiBAcGFyYW0ge+ihqOWNleWQjX0gZm9ybU5hbWUgDQogICAgICogQHBhcmFtIHsqfSBvdGhlciANCiAgICAgKiBAcmV0dXJucyANCiAgICAgKi8KICAgIGNvbnRpbnVlT2s6IGZ1bmN0aW9uIGNvbnRpbnVlT2soZm9ybU5hbWUsIG90aGVyKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKCiAgICAvKioNCiAgICAgKiDngrnlh7vnoa7lrpoNCiAgICAgKiBAcGFyYW0ge+ihqOWNleWQjX0gZm9ybU5hbWUgDQogICAgICovCiAgICBoYW5kbGVPazogZnVuY3Rpb24gaGFuZGxlT2soZm9ybU5hbWUsIG90aGVyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuY29udGludWVPayhmb3JtTmFtZSwgb3RoZXIpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIF90aGlzLmNvbmZpcm1Mb2FkaW5nID0gdHJ1ZTsKCiAgICAgICAgICBfdGhpcy5yZXF1ZXN0KF90aGlzLmZvcm1EYXRhLCBvdGhlcikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIF90aGlzLmNvbmZpcm1Mb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgICBpZiAocmVzLmNvZGUgIT0gMjAwKSB7CiAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CgogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3RoaXMuJHJlZnNbZm9ybU5hbWVdLnJlc2V0RmllbGRzKCk7CgogICAgICAgICAgICBfdGhpcy5oaWRlTW9kYWwoJ29rJyk7CgogICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICAvKioNCiAgICAgKiDmoKHpqozpgJrov4fov5Tlm550cnVlDQogICAgICogQHBhcmFtIHvmoKHpqozln599IGZpZWxkcyANCiAgICAgKi8KICAgIHZhbGlkYXRlRmllbGQ6IGZ1bmN0aW9uIHZhbGlkYXRlRmllbGQoZmllbGRzKSB7CiAgICAgIHZhciBwYXNzID0gdHJ1ZTsKICAgICAgdGhpcy4kcmVmc1snYWRkRm9ybSddLnZhbGlkYXRlRmllbGQoZmllbGRzLCBmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHBhc3MgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gcGFzczsKICAgIH0sCgogICAgLyoqDQogICAgICog5YWz6Zet5a+56K+d5qGGDQogICAgICogQHBhcmFtIHvooajljZXlkI19IGZvcm1OYW1lIA0KICAgICAqLwogICAgaGFuZGxlQ2FuY2VsOiBmdW5jdGlvbiBoYW5kbGVDYW5jZWwoZm9ybU5hbWUpIHsKICAgICAgaWYgKGZvcm1OYW1lKSB7CiAgICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0ucmVzZXRGaWVsZHMoKTsKICAgICAgfQoKICAgICAgdGhpcy5oaWRlTW9kYWwoJ2NhbmNlbCcpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiDph43nva7ooajljZUNCiAgICAgKi8KICAgIHJlc2V0RGF0YTogZnVuY3Rpb24gcmVzZXREYXRhKGlzT2spIHt9LAoKICAgIC8qKg0KICAgICAqIOWQkeWQjuWPsOWPkemAgeihqOWNleaVsOaNrg0KICAgICAqIEBwYXJhbSB76K+35rGC5pWw5o2ufSBkYXRhIA0KICAgICAqLwogICAgcmVxdWVzdDogZnVuY3Rpb24gcmVxdWVzdChkYXRhKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoIm5lZWQgb3ZlcnJpZGUgcmVxdWVzdCBtZXRob2QiKTsKICAgIH0sCiAgICBoaWRlTW9kYWw6IGZ1bmN0aW9uIGhpZGVNb2RhbChldmVudCkgewogICAgICB0aGlzLnJlc2V0RGF0YShldmVudCA9PSAnb2snKTsKICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOnZpc2libGUnLCBmYWxzZSk7CiAgICAgIHRoaXMuJGVtaXQoZXZlbnQpOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8qKg0KICAgICAqIOaYr+WQpuaYvuekuuW6lemDqOagjw0KICAgICAqLwogICAgZm9vdGVyOiBmdW5jdGlvbiBmb290ZXIoKSB7CiAgICAgIGlmICghdGhpcy5pc1ZpZXcpIHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgZm9vdGVyOiBudWxsCiAgICAgIH07CiAgICB9LAoKICAgIC8qKg0KICAgICAqIOaYr+WQpuaWsOWing0KICAgICAqLwogICAgaXNBZGQ6IGZ1bmN0aW9uIGlzQWRkKCkgewogICAgICByZXR1cm4gdGhpcy50eXBlID09ICdhZGQnOwogICAgfSwKCiAgICAvKioNCiAgICAgKiDmmK/lkKbnvJbovpENCiAgICAgKi8KICAgIGlzRWRpdDogZnVuY3Rpb24gaXNFZGl0KCkgewogICAgICByZXR1cm4gdGhpcy50eXBlID09ICdlZGl0JzsKICAgIH0sCgogICAgLyoqDQogICAgICog5piv5ZCm5p+l55yLDQogICAgICovCiAgICBpc1ZpZXc6IGZ1bmN0aW9uIGlzVmlldygpIHsKICAgICAgcmV0dXJuIHRoaXMudHlwZSA9PSAndmlldyc7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["C:/Users/admin/Desktop/merchant-manager-web/src/core/mixins/form-modal-mixin.js"],"names":["PropTypes","props","type","oneOf","required","visible","bool","loading","def","formData","object","data","bodyLoading","confirmLoading","methods","continueOk","formName","other","handleOk","$refs","validate","valid","request","then","res","code","$message","error","msg","resetFields","hideModal","success","validateField","fields","pass","handleCancel","resetData","isOk","console","event","$emit","computed","footer","isView","isAdd","isEdit"],"mappings":"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","sourcesContent":["/**\r\n * 表单弹框mixin封装\r\n * 使用参考：src\\views\\report\\finance\\settlementinput\\components\\AddForm.vue\r\n */\r\nimport PropTypes from 'ant-design-vue/es/_util/vue-types'\r\n\r\nexport default {\r\n    props: {\r\n        type: { ...PropTypes.oneOf(['add', 'edit', 'view']), required: true },\r\n        visible: PropTypes.bool,\r\n        loading: PropTypes.bool.def(true),\r\n        formData: PropTypes.object.def({}),\r\n    },\r\n    data(){\r\n        return {\r\n            bodyLoading: false,\r\n            confirmLoading: false\r\n        }\r\n    },\r\n    methods: {\r\n        /**\r\n         * 是否继续确定处理\r\n         * @param {表单名} formName \r\n         * @param {*} other \r\n         * @returns \r\n         */\r\n        continueOk(formName, other){\r\n            return true\r\n        },\r\n        /**\r\n         * 点击确定\r\n         * @param {表单名} formName \r\n         */\r\n        handleOk(formName, other) {\r\n            if(!this.continueOk(formName, other)){\r\n                return\r\n            }\r\n            this.$refs[formName].validate((valid) => {\r\n                if (valid) {\r\n                    this.confirmLoading = true\r\n                    this.request(this.formData, other).then((res) => {\r\n                        this.confirmLoading = false\r\n                        if (res.code != 200) {\r\n                            this.$message.error(res.msg)\r\n                            return\r\n                        }\r\n                        this.$refs[formName].resetFields()\r\n                        this.hideModal('ok')\r\n                        this.$message.success(res.msg)\r\n                    })\r\n                } else {\r\n                    return\r\n                }\r\n            })\r\n        },\r\n        /**\r\n         * 校验通过返回true\r\n         * @param {校验域} fields \r\n         */\r\n        validateField(fields) {\r\n            let pass = true\r\n            this.$refs['addForm'].validateField(fields, (valid) => {\r\n                if (valid) {\r\n                    pass = false\r\n                }\r\n            })\r\n            return pass\r\n        },\r\n        /**\r\n         * 关闭对话框\r\n         * @param {表单名} formName \r\n         */\r\n        handleCancel(formName) {\r\n            if(formName){\r\n                this.$refs[formName].resetFields()\r\n            }\r\n            this.hideModal('cancel')\r\n        },\r\n        /**\r\n         * 重置表单\r\n         */\r\n        resetData(isOk) {\r\n        },\r\n        /**\r\n         * 向后台发送表单数据\r\n         * @param {请求数据} data \r\n         */\r\n        request(data) {\r\n            console.error(\"need override request method\");\r\n        },\r\n        hideModal(event){\r\n            this.resetData(event=='ok')\r\n            this.$emit('update:visible', false)\r\n            this.$emit(event)\r\n        }\r\n    },\r\n    computed: {\r\n        /**\r\n         * 是否显示底部栏\r\n         */\r\n        footer() {\r\n            if (!this.isView) {\r\n                return {}\r\n            }\r\n            return { footer: null }\r\n        },\r\n        /**\r\n         * 是否新增\r\n         */\r\n        isAdd() {\r\n            return this.type == 'add'\r\n        },\r\n        /**\r\n         * 是否编辑\r\n         */\r\n        isEdit() {\r\n            return this.type == 'edit'\r\n        },\r\n        /**\r\n         * 是否查看\r\n         */\r\n        isView() {\r\n            return this.type == 'view'\r\n        },\r\n    }\r\n}\r\n"]}]}