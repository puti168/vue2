{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\pages\\index\\views\\manager\\user\\components\\EditForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\pages\\index\\views\\manager\\user\\components\\EditForm.vue","mtime":1617594855327},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBzZXRFZGl0VXBkYXRlIH0gZnJvbSAnQC9hcGkvdXNlcic7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgcm9sZUxpc3Q6IHsKICAgICAgdHlwZTogQXJyYXkKICAgIH0sCiAgICBmb3JtRGF0YTogewogICAgICB0eXBlOiBPYmplY3QKICAgIH0sCiAgICBlZGl0Zm9ybWZuOiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZWRpdGZvcm06IHRoaXMuJGZvcm0uY3JlYXRlRm9ybSh0aGlzKSwKICAgICAgZWRpdEZvcm1EYXRhOiB7fSwKICAgICAgZXllczogdHJ1ZSwKICAgICAgZWRpdHJvbGU6ICcnCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlRWRpdDogZnVuY3Rpb24gaGFuZGxlRWRpdChydWxlLCB2YWx1ZSwgY2FsbGJhY2spIHsKICAgICAgdmFyIHJlZyA9IC9ccy87CgogICAgICBpZiAodmFsdWUgJiYgcmVnLnRlc3QodmFsdWUpKSB7CiAgICAgICAgY2FsbGJhY2soJ+i0puWPt+S4jeiDveWMheWQq+epuuagvCcpOwogICAgICB9CgogICAgICBpZiAodmFsdWUgJiYgdmFsdWUucmVwbGFjZSgnICcsICcnKS5sZW5ndGggPCA2KSB7CiAgICAgICAgY2FsbGJhY2soJ+i0puWPt+WQjeensOeUsTZ+MTLkvY3lrZfnrKbnu4TmiJAnKTsKICAgICAgfQoKICAgICAgY2FsbGJhY2soKTsKICAgIH0sCiAgICBoYW5kbGVycHdkOiBmdW5jdGlvbiBoYW5kbGVycHdkKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgewogICAgICB2YXIgcmVnID0gL1xzLzsKCiAgICAgIGlmICh2YWx1ZSAmJiByZWcudGVzdCh2YWx1ZSkpIHsKICAgICAgICBjYWxsYmFjaygn5a+G56CB5LiN6IO95YyF5ZCr56m65qC8Jyk7CiAgICAgIH0gZWxzZSBpZiAodmFsdWUgJiYgdmFsdWUucmVwbGFjZSgnICcsICcnKS5sZW5ndGggPCA2KSB7CiAgICAgICAgY2FsbGJhY2soJ+i0puWPt+WvhueggeeUsTZ+MTLkvY3lrZfnrKbnu4TmiJAnKTsKICAgICAgfQoKICAgICAgY2FsbGJhY2soKTsKICAgIH0sCiAgICBlZGl0U3VibWl0OiBmdW5jdGlvbiBlZGl0U3VibWl0KGZuKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmVkaXRmb3JtLnZhbGlkYXRlRmllbGRzKGZ1bmN0aW9uIChlcnIsIHZhbHVlcykgewogICAgICAgIGlmICghZXJyKSB7CiAgICAgICAgICB2YXIgcmVzID0ge307CiAgICAgICAgICByZXMuYWRtaW5JZCA9IF90aGlzLmZvcm1EYXRhLmlkOwogICAgICAgICAgcmVzLmFkbWluTmFtZSA9IHZhbHVlcy51c2VybmFtZTsKICAgICAgICAgIHJlcy5wYXNzd29yZCA9IHZhbHVlcy5wYXNzd29yZCA9PSAnKioqKioqJyA/ICcnIDogdmFsdWVzLnBhc3N3b3JkOwogICAgICAgICAgcmVzLnJvbGVJZCA9IF90aGlzLmZvcm1EYXRhLnJvbGVJZDsKICAgICAgICAgIHJlcy5yb2xlTmFtZSA9IF90aGlzLmZvcm1EYXRhLnJvbGVOYW1lOwogICAgICAgICAgcmVzLnJlbWFyayA9IF90aGlzLmZvcm1EYXRhLnJlbWFyazsKICAgICAgICAgIHNldEVkaXRVcGRhdGUocmVzKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICBmbigpOwoKICAgICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwoKICAgICAgICAgICAgICBfdGhpcy5lZGl0Zm9ybWZuKCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZWRpdE1vZGFscm9sZTogZnVuY3Rpb24gZWRpdE1vZGFscm9sZSh2YWwpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLmZvcm1EYXRhLnJvbGVJZCA9IHZhbDsKICAgICAgdGhpcy5yb2xlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWYgKGUucm9sZUlkID09PSB2YWwpIHsKICAgICAgICAgIF90aGlzMi5mb3JtRGF0YS5yb2xlTmFtZSA9IGUucm9sZU5hbWU7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBwd2RDaGFuZ2U6IGZ1bmN0aW9uIHB3ZENoYW5nZSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLmV5ZXMgPSBmYWxzZTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMzLmVkaXRmb3JtLnNldEZpZWxkc1ZhbHVlKHsKICAgICAgICAgIHBhc3N3b3JkOiAnJwogICAgICAgIH0pOwogICAgICB9LCAxMDApOwogICAgfQogIH0KfTs="},{"version":3,"sources":["EditForm.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <a-form\r\n      :form=\"editform\"\r\n      v-model=\"formData\"\r\n      :label-col=\"{ span: 4 }\"\r\n      :wrapper-col=\"{ span: 20 }\"\r\n      @submit=\"editSubmit\"\r\n    >\r\n      <a-form-item label=\"创建人\">\r\n        <span>{{ formData.createdBy }}</span>\r\n      </a-form-item>\r\n      <a-form-item label=\"创建日期\">\r\n        <span>{{ formData.createdAt }}</span>\r\n      </a-form-item>\r\n      <a-form-item label=\"账号名称\">\r\n        <a-input\r\n          :maxLength=\"12\"\r\n          disabled\r\n          v-decorator=\"[\r\n            'username',\r\n            {\r\n              rules: [{ required: true, message: '账号名称由6~12位字符组成' }, { validator: handleEdit }],\r\n              validateTrigger: 'blur',\r\n              initialValue: formData.adminName,\r\n            },\r\n          ]\"\r\n        />\r\n      </a-form-item>\r\n      <a-form-item label=\"账号密码\">\r\n        <a-input-password\r\n          :class=\"eyes ? 'eyest' : 'eyesf'\"\r\n          :maxLength=\"12\"\r\n          v-decorator=\"[\r\n            'password',\r\n            {\r\n              rules: [{ required: true, message: '账号密码由6~12位字符组成' }, { validator: handlerpwd }],\r\n              validateTrigger: 'blur',\r\n              initialValue: '******',\r\n            },\r\n          ]\"\r\n          @click=\"pwdChange\"\r\n        />\r\n      </a-form-item>\r\n      <a-form-item label=\"所属角色\" :wrapper-col=\"{ span: 8 }\">\r\n        <a-select :default-value=\"formData.roleName\" @change=\"editModalrole\">\r\n          <a-select-option v-for=\"(item, index) in roleList\" :value=\"item.roleId\" :key=\"index + 'c'\">\r\n            {{ item.roleName }}\r\n          </a-select-option>\r\n        </a-select>\r\n      </a-form-item>\r\n      <a-form-item label=\"描述\" :wrapper-col=\"{ span: 20 }\">\r\n        <a-textarea v-model=\"formData.remark\" placeholder=\"最多可输入255字符\" :maxLength=\"255\" />\r\n      </a-form-item>\r\n    </a-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { setEditUpdate } from '@/api/user'\r\nexport default {\r\n  props: {\r\n    roleList: {\r\n      type: Array,\r\n    },\r\n    formData: {\r\n      type: Object,\r\n    },\r\n    editformfn: {\r\n      type: Function,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      editform: this.$form.createForm(this),\r\n      editFormData: {},\r\n      eyes: true,\r\n      editrole: '',\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    handleEdit(rule, value, callback) {\r\n      let reg = /\\s/\r\n      if (value && reg.test(value)) {\r\n        callback('账号不能包含空格')\r\n      }\r\n      if (value && value.replace(' ', '').length < 6) {\r\n        callback('账号名称由6~12位字符组成')\r\n      }\r\n      callback()\r\n    },\r\n    handlerpwd(rule, value, callback) {\r\n      let reg = /\\s/\r\n      if (value && reg.test(value)) {\r\n        callback('密码不能包含空格')\r\n      } else if (value && value.replace(' ', '').length < 6) {\r\n        callback('账号密码由6~12位字符组成')\r\n      }\r\n      callback()\r\n    },\r\n    editSubmit(fn) {\r\n      this.editform.validateFields((err, values) => {\r\n        if (!err) {\r\n          let res = {}\r\n          res.adminId = this.formData.id\r\n          res.adminName = values.username\r\n          res.password = values.password == '******' ? '' : values.password\r\n          res.roleId = this.formData.roleId\r\n          res.roleName = this.formData.roleName\r\n          res.remark = this.formData.remark\r\n          setEditUpdate(res)\r\n            .then((res) => {\r\n              if (res.code === 200) {\r\n                fn()\r\n                this.$message.success(res.msg)\r\n                this.editformfn()\r\n              } else {\r\n                this.$message.error(res.msg)\r\n              }\r\n            })\r\n            .catch((err) => {\r\n              console.log(err)\r\n            })\r\n        }\r\n      })\r\n    },\r\n    editModalrole(val) {\r\n      this.formData.roleId = val\r\n      this.roleList.forEach((e) => {\r\n        if (e.roleId === val) {\r\n          this.formData.roleName = e.roleName\r\n        }\r\n      })\r\n    },\r\n    pwdChange() {\r\n      this.eyes = false\r\n      setTimeout(() => {\r\n        this.editform.setFieldsValue({\r\n          password: '',\r\n        })\r\n      }, 100)\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n/deep/ .eyest svg {\r\n  display: none;\r\n}\r\n/deep/ .eyesf svg {\r\n  display: inline-block;\r\n}\r\n</style>"],"sourceRoot":"src/pages/index/views/manager/user/components"}]}