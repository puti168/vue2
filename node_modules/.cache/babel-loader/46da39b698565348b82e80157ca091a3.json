{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\operationManage\\activitySettings\\components\\TableComp.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\operationManage\\activitySettings\\components\\TableComp.vue","mtime":1617695097431},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _objectSpread from \"C:/Users/admin/Desktop/merchant-manager-web/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters } from 'vuex';\nimport store2 from 'storejs';\nimport { i18nName } from '@/utils/i18n';\nimport store from '@/store';\nimport list from '@/mixins/list';\nimport { getToken } from '@/utils/auth';\nexport default {\n  name: 'MerchantTableComp',\n  mixins: [list],\n  props: {\n    tableData: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    currency: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    changeValue: {\n      type: String,\n      default: 'chatStatus'\n    },\n    node: {\n      type: Object,\n      default: function _default() {\n        return {\n          selectValue: store.state.tree.selectValue\n        };\n      }\n    }\n  },\n  data: function data() {\n    return {\n      pageSize: 5,\n      selectValue: 'chatStatus',\n      isShowChoiceColumn: false,\n      dataList: {},\n      logo: {},\n      defaultColumn: store2.get('settingColumn') ? store2.get('settingColumn') : [{\n        id: 2,\n        checked: false,\n        cancel: true,\n        name: 'new_27'\n      }, {\n        id: 3,\n        checked: false,\n        cancel: true,\n        name: 'new_28'\n      }, {\n        id: 4,\n        checked: false,\n        cancel: true,\n        name: 'new_29'\n      }, {\n        id: 5,\n        checked: false,\n        cancel: true,\n        name: 'new_30'\n      }, {\n        id: 6,\n        checked: false,\n        cancel: true,\n        name: 'new_31'\n      }, {\n        id: 7,\n        checked: false,\n        cancel: true,\n        name: 'new_32'\n      }, {\n        id: 8,\n        checked: false,\n        cancel: true,\n        name: 'new_322'\n      }, {\n        id: 9,\n        checked: false,\n        cancel: true,\n        name: 'new_321'\n      }],\n      fileList: [],\n      uploadUrl: process.env.VUE_APP_BASE_API + '/agents/uploadAgentLog',\n      currentAgentId: ''\n    };\n  },\n  computed: _objectSpread(_objectSpread({}, mapGetters(['userInfo', 'globalDics'])), {}, {\n    token: function token() {\n      return getToken();\n    },\n    selectData: function selectData() {\n      var _this = this;\n\n      var data = {};\n      this.sList.forEach(function (item) {\n        if (item.data === _this.selectValue) {\n          data = item;\n        }\n      });\n      return data;\n    },\n    sList: function sList() {\n      return [// 聊天功能开关\n      {\n        data: 'chatStatus',\n        permission: 18108,\n        label: this.$t('new_26'),\n        free: 'chatFreeStatus'\n      }, // 平台赛开关\n      {\n        data: 'gamePlatfromStatus',\n        permission: 18117,\n        label: this.$t('new_27')\n      }, // 商户赛开关\n      {\n        data: 'gameAgentStatus',\n        permission: 18110,\n        label: this.$t('new_28')\n      }, // 荷官打赏开关\n      {\n        data: 'rewardDealerStatus',\n        permission: 18111,\n        label: this.$t('new_29')\n      }, // 红包雨开关\n      {\n        data: 'redEnvelopeStatus',\n        permission: 18112,\n        label: this.$t('new_30')\n      }, // 美女主播开关\n      {\n        data: 'anchorModelStatus',\n        permission: 18113,\n        label: this.$t('new_31')\n      }, // 主播厅送礼开关\n      {\n        data: 'rewardAnchorStatus',\n        permission: 18114,\n        label: this.$t('new_32')\n      }, // 桌边主播开关\n      {\n        data: 'rewardTableAnchorStatus',\n        permission: 18146,\n        label: this.$t('new_322')\n      }, // 主播厅聊天开关\n      {\n        data: 'anchorTableChatStatus',\n        permission: 18148,\n        label: this.$t('agent_08'),\n        free: 'anchorTableFreeChatStatus'\n      }];\n    },\n    columns: function columns() {\n      var arr = this.defaultColumn;\n      return arr;\n    }\n  }),\n  watch: {\n    node: {\n      handler: function handler(val) {\n        this.selectValue = val.selectValue;\n      },\n      immediate: true,\n      deep: true\n    },\n    changeValue: function changeValue(val) {\n      this.selectValue = this.$store.state.tree.selectValue;\n    }\n  },\n  destroyed: function destroyed() {\n    document.removeEventListener('click', this.showColumn);\n  },\n  mounted: function mounted() {\n    document.addEventListener('click', this.showColumn);\n  },\n  methods: {\n    ifArrow: function ifArrow(levels, index) {\n      var levelsLength = levels.length;\n      if (levelsLength > 1 && index !== levelsLength - 1) return true;\n    },\n    arraySpanMethod: function arraySpanMethod(_ref) {\n      var row = _ref.row,\n          column = _ref.column,\n          rowIndex = _ref.rowIndex,\n          columnIndex = _ref.columnIndex;\n\n      if (rowIndex === 0 && this.tableData.level === 1) {\n        var length = 0;\n        this.defaultColumn.forEach(function (item) {\n          if (item.checked) {\n            length += 1;\n          }\n        });\n\n        if (columnIndex === 6) {\n          return [1, length + 1];\n        } else if (columnIndex > 6 && columnIndex < length + 7) {\n          return [0, 0];\n        }\n      }\n    },\n    showColumn: function showColumn(e) {\n      var icon = document.getElementById('icon');\n      var list = document.getElementById('list');\n\n      if (icon && !icon.contains(e.target) && list && !list.contains(e.target)) {\n        this.isShowChoiceColumn = false;\n      }\n    },\n    beforeAvatarUpload: function beforeAvatarUpload(file, row) {\n      var _this2 = this;\n\n      var isPNG = file.type === 'image/png';\n\n      if (!isPNG) {\n        this.$message.error(this.$t('new_2771'));\n      }\n\n      var isSize = new Promise(function (resolve, reject) {\n        var _URL = window.URL || window.webkitURL;\n\n        var image = new Image(); // image.src = file.url\n\n        image.onload = function () {\n          var valid = image.width === 240 && image.height === 72;\n          valid ? resolve() : reject();\n        };\n\n        image.src = _URL.createObjectURL(file);\n      }).then(function () {\n        return file;\n      }, function () {\n        _this2.$message({\n          message: _this2.$t('new_2771'),\n          type: 'error'\n        });\n\n        return Promise.reject();\n      });\n      this.dataList = {\n        textType: 4,\n        agentId: row.agentId.split('_')[1]\n      };\n      return isPNG && isSize;\n    },\n    handleAvatarSuccess: function handleAvatarSuccess(response, file, fileList, row) {\n      if (response.code !== 200) {\n        this.$message({\n          message: this.$i18n.t(\"backstage_\".concat(response.code)),\n          type: 'error'\n        });\n      } else {\n        row.blogo = response.data;\n        this.$message({\n          message: this.$t(\"new_1111\"),\n          type: 'success'\n        });\n      }\n    },\n    getCooperationModel: function getCooperationModel(model) {\n      if (model === 1) {\n        return this.$t('merchant_merchantinfo_components_tablecomp_1096');\n      } else if (model === 2) {\n        return this.$t('merchant_merchantinfo_components_tablecomp_1097');\n      } else if (model === 3) {\n        return this.$t('merchant_merchantinfo_components_tablecomp_1098');\n      }\n    },\n    selectFilter: function selectFilter(value) {\n      var title = '';\n      this.sList.forEach(function (item) {\n        if (item.data === value) {\n          title = item.label;\n        }\n      });\n      return title;\n    },\n    onCheckBoxChange: function onCheckBoxChange(value, id) {\n      var index = this.defaultColumn.findIndex(function (val) {\n        return val.id === id;\n      });\n\n      if (index > -1) {\n        this.defaultColumn.splice(index, 1, _objectSpread(_objectSpread({}, this.columns[index]), {}, {\n          checked: value\n        }));\n        store2.set('settingColumn', this.defaultColumn);\n      }\n\n      this.$emit('handleSearch');\n    },\n    showChoiceColumn: function showChoiceColumn() {\n      this.isShowChoiceColumn = !this.isShowChoiceColumn;\n    },\n    selectChange: function selectChange() {\n      this.$emit('selectChange', this.selectValue);\n    },\n    editStatus: function editStatus(index, row, status) {\n      this.$emit('editStatus', index, row, this.tableData.level, status);\n    },\n    editAll: function editAll(status) {\n      this.$emit('editAll', status);\n    },\n    editFree: function editFree(index, row, status) {\n      this.$emit('editFree', index, row, this.tableData.level, status);\n    },\n    editOpen: function editOpen(index, row, type) {\n      this.$emit('editOpen', index, row, this.tableData.level, type);\n    },\n    handlePaginationChange: function handlePaginationChange(val, type) {\n      this.$emit('modifyData', this.tableData.level, {\n        pageSize: type === 1 ? val : this.pageSize,\n        pageIndex: type === 2 ? val : this.pageIndex,\n        agentId: this.tableData.parentId,\n        agentName: this.tableData.parentName\n      }, this.tableData.level - 1, 2);\n    },\n    checked: function checked(id) {\n      var index = this.columns.findIndex(function (val) {\n        return val.id === id;\n      });\n\n      if (index > -1) {\n        return this.columns[index].checked;\n      }\n    },\n    showChildren: function showChildren(level, opened, row) {\n      this.$emit('showChildren', this.currentAgentId === row.agentId, level, opened, {\n        agentId: row.agentId,\n        agentName: row.agentName,\n        pageSize: 5,\n        pageIndex: 1\n      });\n      this.currentAgentId = row.agentId;\n    },\n    // 获取货币类型\n    getCurrency: function getCurrency(id) {\n      var index = this.currency.findIndex(function (val) {\n        return Number(val.id) === id;\n      });\n\n      if (index > -1) {\n        return this.currency[index].code;\n      }\n    },\n    getTrueName: function getTrueName(name) {\n      return i18nName(name);\n    }\n  }\n};",null]}