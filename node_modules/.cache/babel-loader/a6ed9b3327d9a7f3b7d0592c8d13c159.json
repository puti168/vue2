{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\merchant\\accountInfo\\components\\Recharge.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\merchant\\accountInfo\\components\\Recharge.vue","mtime":1616384580074},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport _objectSpread from \"C:/Users/admin/Desktop/merchant-manager-web/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { formatCurrency } from '@/utils';\nimport { message } from '@/utils/message';\nimport { mapGetters } from 'vuex';\nexport default {\n  name: 'Recharge',\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    rechargeData: {\n      type: Object,\n      default: function _default() {}\n    }\n  },\n  data: function data() {\n    return {\n      drawer: false,\n      form: {\n        amount: 0\n      }\n    };\n  },\n  computed: _objectSpread(_objectSpread({}, mapGetters(['userInfo'])), {}, {\n    rules: function rules() {\n      var _this = this;\n\n      // 平台账户不做限制\n      var userBalance = this.userInfo.balance || 0;\n\n      var validNumber = function validNumber(rule, value, callback) {\n        var newValue = Number(value);\n\n        if (/^\\-[0-9][0-9]*/.test(value)) {\n          callback(new Error(_this.$t('merchant_accountinfo_components_recharge_735')));\n        } else if (typeof newValue !== 'number' || value % 1 !== 0) {\n          callback(new Error(_this.$t('merchant_accountinfo_components_recharge_736')));\n        } else if (_this.userInfo.id !== 1 && value > Number(userBalance)) {\n          callback(new Error(_this.$t('merchant_accountinfo_components_recharge_737')));\n        } else {\n          callback();\n        }\n      };\n\n      return {\n        amount: [{\n          required: true,\n          message: this.$t('merchant_accountinfo_components_recharge_732'),\n          trigger: 'blur'\n        }, {\n          validator: validNumber,\n          trigger: 'blur'\n        }]\n      };\n    }\n  }),\n  watch: {\n    visible: function visible(val) {\n      this.drawer = val;\n    }\n  },\n  created: function created() {},\n  methods: {\n    formatCurrency: formatCurrency,\n    queryUserInfo: function queryUserInfo() {\n      this.$store.dispatch('user/queryUserInfo', this.userInfo);\n    },\n    cancel: function cancel() {\n      this.form.amount = 0;\n      this.$refs.form.clearValidate();\n      this.$emit('update:visible', false);\n    },\n    hanldeSure: function hanldeSure() {\n      var _this2 = this;\n\n      this.$refs.form.validate(function (valid) {\n        var form = {\n          agentId: _this2.rechargeData.agentId,\n          agentName: _this2.rechargeData.agentName,\n          amount: _this2.form.amount,\n          type: 1\n        };\n\n        if (valid) {\n          _this2.$api.merchantTranferDot(form).then(function (res) {\n            if (res.code === 200) {\n              _this2.$emit('update:visible', false);\n\n              _this2.$emit('editSuccess', form);\n\n              _this2.queryUserInfo();\n\n              message({\n                type: 'success',\n                message: _this2.$t('merchant_accountinfo_components_recharge_738')\n              });\n            }\n          });\n        }\n      });\n    }\n  }\n};",null]}