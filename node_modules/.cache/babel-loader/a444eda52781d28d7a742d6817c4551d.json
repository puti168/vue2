{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\core\\mixins\\tree-mixin.js","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\core\\mixins\\tree-mixin.js","mtime":1617594855310},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CgovKioNCiAqIOihqOagvC3moJHnirbmlbDmja4n5oeSJ+a4suafkw0KICog5L2/55So5Y+C6ICD77yac3JjXHZpZXdzXHJlcG9ydFxmaW5hbmNlXHNldHRsZW1lbnRpbnB1dFxpbmRleC52dWUNCiAqLwp2YXIgdHJlZU1peGluID0gewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjaGlsZHJlblByb3BOYW1lOiAiY2hpbGRMaXN0IiwKICAgICAgc291cmNlRGF0YU1hcDoge30KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICByZXNldFNvdXJjZURhdGFNYXA6IGZ1bmN0aW9uIHJlc2V0U291cmNlRGF0YU1hcCgpIHsKICAgICAgdGhpcy5zb3VyY2VEYXRhTWFwID0ge307CiAgICB9LAogICAgYWRkVHJlZU5vZGVUb1NvdXJjZURhdGFNYXA6IGZ1bmN0aW9uIGFkZFRyZWVOb2RlVG9Tb3VyY2VEYXRhTWFwKG5vZGUsIGludGVybmFsKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIWludGVybmFsKSB7CiAgICAgICAgdGhpcy5yZXNldFNvdXJjZURhdGFNYXAoKTsKICAgICAgfQoKICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm9kZSkpIHsKICAgICAgICByZXR1cm4gbm9kZS5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMuYWRkVHJlZU5vZGVUb1NvdXJjZURhdGFNYXAodiwgdHJ1ZSk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHZhciBtYXAgPSB0aGlzLnNvdXJjZURhdGFNYXA7CgogICAgICBpZiAoIW5vZGVbdGhpcy5jaGlsZHJlblByb3BOYW1lXSB8fCAhbm9kZVt0aGlzLmNoaWxkcmVuUHJvcE5hbWVdLmxlbmd0aCkgewogICAgICAgIG5vZGVbdGhpcy5jaGlsZHJlblByb3BOYW1lXSA9IG51bGw7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBub2RlW3RoaXMuY2hpbGRyZW5Qcm9wTmFtZV0uZm9yRWFjaChmdW5jdGlvbiAodikgewogICAgICAgIGlmICh2W190aGlzLmNoaWxkcmVuUHJvcE5hbWVdICYmIHZbX3RoaXMuY2hpbGRyZW5Qcm9wTmFtZV0ubGVuZ3RoID4gMCkgewogICAgICAgICAgbWFwW3YuaWRdID0gdltfdGhpcy5jaGlsZHJlblByb3BOYW1lXTsKICAgICAgICAgIHZbX3RoaXMuY2hpbGRyZW5Qcm9wTmFtZV0gPSBbXTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIG9uVHJlZU5vZGVFeHBhbmQ6IGZ1bmN0aW9uIG9uVHJlZU5vZGVFeHBhbmQoZXhwYW5kZWQsIHJlY29yZCkgewogICAgICBpZiAoZXhwYW5kZWQgJiYgcmVjb3JkW3RoaXMuY2hpbGRyZW5Qcm9wTmFtZV0gJiYgcmVjb3JkW3RoaXMuY2hpbGRyZW5Qcm9wTmFtZV0ubGVuZ3RoID09IDApIHsKICAgICAgICByZWNvcmRbdGhpcy5jaGlsZHJlblByb3BOYW1lXSA9IHRoaXMuc291cmNlRGF0YU1hcFtyZWNvcmQuaWRdOwogICAgICAgIGRlbGV0ZSB0aGlzLnNvdXJjZURhdGFNYXBbcmVjb3JkLmlkXTsKICAgICAgICB0aGlzLmFkZFRyZWVOb2RlVG9Tb3VyY2VEYXRhTWFwKHJlY29yZCwgdHJ1ZSk7CiAgICAgIH0KICAgIH0KICB9Cn07CmV4cG9ydCBkZWZhdWx0IHRyZWVNaXhpbjs="},{"version":3,"sources":["C:/Users/admin/Desktop/merchant-manager-web/src/core/mixins/tree-mixin.js"],"names":["treeMixin","data","childrenPropName","sourceDataMap","methods","resetSourceDataMap","addTreeNodeToSourceDataMap","node","internal","Array","isArray","forEach","v","map","length","id","onTreeNodeExpand","expanded","record"],"mappings":";;AAAA;AACA;AACA;AACA;AACA,IAAMA,SAAS,GAAG;AAChBC,EAAAA,IADgB,kBACT;AACL,WAAO;AACLC,MAAAA,gBAAgB,EAAE,WADb;AAELC,MAAAA,aAAa,EAAE;AAFV,KAAP;AAID,GANe;AAOhBC,EAAAA,OAAO,EAAE;AACPC,IAAAA,kBADO,gCACc;AACnB,WAAKF,aAAL,GAAqB,EAArB;AACD,KAHM;AAIPG,IAAAA,0BAJO,sCAIoBC,IAJpB,EAI0BC,QAJ1B,EAIoC;AAAA;;AACzC,UAAG,CAACA,QAAJ,EAAa;AACX,aAAKH,kBAAL;AACD;;AACD,UAAII,KAAK,CAACC,OAAN,CAAcH,IAAd,CAAJ,EAAyB;AACvB,eAAOA,IAAI,CAACI,OAAL,CAAa,UAAAC,CAAC;AAAA,iBAAI,KAAI,CAACN,0BAAL,CAAgCM,CAAhC,EAAmC,IAAnC,CAAJ;AAAA,SAAd,CAAP;AACD;;AACD,UAAMC,GAAG,GAAG,KAAKV,aAAjB;;AACA,UAAI,CAACI,IAAI,CAAC,KAAKL,gBAAN,CAAL,IAAgC,CAACK,IAAI,CAAC,KAAKL,gBAAN,CAAJ,CAA4BY,MAAjE,EAAyE;AACvEP,QAAAA,IAAI,CAAC,KAAKL,gBAAN,CAAJ,GAA8B,IAA9B;AACA;AACD;;AACDK,MAAAA,IAAI,CAAC,KAAKL,gBAAN,CAAJ,CAA4BS,OAA5B,CAAoC,UAACC,CAAD,EAAO;AACzC,YAAIA,CAAC,CAAC,KAAI,CAACV,gBAAN,CAAD,IAA4BU,CAAC,CAAC,KAAI,CAACV,gBAAN,CAAD,CAAyBY,MAAzB,GAAkC,CAAlE,EAAqE;AACnED,UAAAA,GAAG,CAACD,CAAC,CAACG,EAAH,CAAH,GAAYH,CAAC,CAAC,KAAI,CAACV,gBAAN,CAAb;AACAU,UAAAA,CAAC,CAAC,KAAI,CAACV,gBAAN,CAAD,GAA2B,EAA3B;AACD;AACF,OALD;AAMD,KAtBM;AAuBPc,IAAAA,gBAvBO,4BAuBUC,QAvBV,EAuBoBC,MAvBpB,EAuB4B;AACjC,UAAID,QAAQ,IAAIC,MAAM,CAAC,KAAKhB,gBAAN,CAAlB,IAA6CgB,MAAM,CAAC,KAAKhB,gBAAN,CAAN,CAA8BY,MAA9B,IAAwC,CAAzF,EAA4F;AAC1FI,QAAAA,MAAM,CAAC,KAAKhB,gBAAN,CAAN,GAAgC,KAAKC,aAAL,CAAmBe,MAAM,CAACH,EAA1B,CAAhC;AACA,eAAO,KAAKZ,aAAL,CAAmBe,MAAM,CAACH,EAA1B,CAAP;AACA,aAAKT,0BAAL,CAAgCY,MAAhC,EAAwC,IAAxC;AACD;AACF;AA7BM;AAPO,CAAlB;AAwCA,eAAelB,SAAf","sourcesContent":["/**\r\n * 表格-树状数据'懒'渲染\r\n * 使用参考：src\\views\\report\\finance\\settlementinput\\index.vue\r\n */\r\nconst treeMixin = {\r\n  data() {\r\n    return {\r\n      childrenPropName: \"childList\",\r\n      sourceDataMap: {}\r\n    }\r\n  },\r\n  methods: {\r\n    resetSourceDataMap() {\r\n      this.sourceDataMap = {}\r\n    },\r\n    addTreeNodeToSourceDataMap(node, internal) {\r\n      if(!internal){\r\n        this.resetSourceDataMap()\r\n      }\r\n      if (Array.isArray(node)) {\r\n        return node.forEach(v => this.addTreeNodeToSourceDataMap(v, true))\r\n      }\r\n      const map = this.sourceDataMap\r\n      if (!node[this.childrenPropName] || !node[this.childrenPropName].length) {\r\n        node[this.childrenPropName] = null\r\n        return\r\n      }\r\n      node[this.childrenPropName].forEach((v) => {\r\n        if (v[this.childrenPropName] && v[this.childrenPropName].length > 0) {\r\n          map[v.id] = v[this.childrenPropName]\r\n          v[this.childrenPropName] = []\r\n        }\r\n      })\r\n    },\r\n    onTreeNodeExpand(expanded, record) {\r\n      if (expanded && record[this.childrenPropName] && record[this.childrenPropName].length == 0) {\r\n        record[this.childrenPropName] = this.sourceDataMap[record.id]\r\n        delete this.sourceDataMap[record.id]\r\n        this.addTreeNodeToSourceDataMap(record, true)\r\n      }\r\n    },\r\n  }\r\n}\r\n\r\nexport default treeMixin\r\n"]}]}