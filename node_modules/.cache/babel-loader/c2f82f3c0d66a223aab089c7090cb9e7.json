{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\operationManage\\activitySettings\\components\\EditAll.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\operationManage\\activitySettings\\components\\EditAll.vue","mtime":1617695097431},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Modal from '@/components/Modal';\nimport SelectAgentTree from '@/components/SelectAgentTree';\nexport default {\n  name: 'EditTrial',\n  components: {\n    SelectAgentTree: SelectAgentTree,\n    Modal: Modal\n  },\n  props: {\n    type: {\n      type: String,\n      default: ''\n    },\n    value: {\n      type: Boolean,\n      default: false\n    },\n    editTrialInfoSuccess: {\n      type: Function,\n      default: function _default() {}\n    }\n  },\n  data: function data() {\n    return {\n      accountForm: {\n        shareRate: 0\n      },\n      dialogVisible: false,\n      canEdit: true,\n      statusType: 1,\n      status: 0,\n      shareType: 1,\n      agentId: ''\n    };\n  },\n  computed: {\n    accountFormRules: function accountFormRules() {\n      return {\n        shareRate: [{\n          required: true,\n          trigger: 'blur',\n          message: this.$t('new_67')\n        }]\n      };\n    },\n    rateList: function rateList() {\n      return [// 荷官分成比例设置\n      {\n        data: 1,\n        label: this.$t('new_37')\n      }, // 桌边主播分成比例设置\n      {\n        data: 2,\n        label: this.$t('new_36')\n      }, // 美女主播分成比例设置\n      {\n        data: 3,\n        label: this.$t('new_36666')\n      }];\n    },\n    sList: function sList() {\n      return [// 聊天功能开关\n      {\n        data: 1,\n        permission: 18108,\n        label: this.$t('new_26'),\n        free: 'chatFreeStatus'\n      }, // 平台赛开关\n      {\n        data: 2,\n        permission: 18117,\n        label: this.$t('new_27')\n      }, // 商户赛开关\n      {\n        data: 3,\n        permission: 18110,\n        label: this.$t('new_28')\n      }, // 荷官打赏开关\n      {\n        data: 4,\n        permission: 18111,\n        label: this.$t('new_29')\n      }, // 红包雨开关\n      {\n        data: 5,\n        permission: 18112,\n        label: this.$t('new_30')\n      }, // 美女主播开关\n      {\n        data: 6,\n        permission: 18113,\n        label: this.$t('new_31')\n      }, // 主播厅送礼开关\n      {\n        data: 7,\n        permission: 18114,\n        label: this.$t('new_32')\n      }, // 桌边主播开关\n      {\n        data: 8,\n        permission: 18146,\n        label: this.$t('new_322')\n      }, // 聊天功能开关（自由聊天）\n      {\n        data: 51,\n        permission: 18108,\n        label: this.$t('a_11')\n      }, // 主播厅聊天开关（自由聊天）\n      {\n        data: 50,\n        permission: 18148,\n        label: this.$t('a_12')\n      }, // 主播厅聊天开关\n      {\n        data: 9,\n        permission: 18148,\n        label: this.$t('agent_08'),\n        free: 'anchorTableFreeChatStatus'\n      }];\n    },\n    modalTitle: function modalTitle() {\n      var text;\n\n      switch (this.type) {\n        case 'rate':\n          text = this.$t('a_02');\n          break;\n\n        case 'status':\n          text = this.$t('a_01');\n          break;\n      }\n\n      return text;\n    }\n  },\n  watch: {},\n  methods: {\n    handleClose: function handleClose() {\n      this.accountForm.shareRate = 0;\n      this.$refs.accountForm.clearValidate();\n      this.$emit('input', false);\n    },\n    setLimit: function setLimit(type) {\n      this.status = type;\n      this.dialogVisible = true;\n    },\n    handleSure: function handleSure() {\n      var _this = this;\n\n      if (!/^([1-9]?\\d|100)$/.test(Number(this.accountForm.shareRate))) {\n        this.$message({\n          message: this.$t('new_67'),\n          type: 'error'\n        });\n        return;\n      }\n\n      this.$refs.accountForm.validate(function (valid) {\n        if (valid) {\n          if (!_this.canEdit) {\n            return;\n          }\n\n          _this.canEdit = false;\n          var form = {};\n\n          if (_this.type === 'status') {\n            if (_this.statusType === 51 || _this.statusType === 50) {\n              form = {\n                childStatusType: _this.statusType === 51 ? 1 : 2,\n                childStatus: _this.status,\n                agentId: _this.agentId\n              };\n            } else {\n              form = {\n                statusType: _this.statusType,\n                status: _this.status,\n                agentId: _this.agentId\n              };\n            }\n          } else {\n            form = {\n              shareType: _this.shareType,\n              agentId: _this.agentId\n            };\n            form.shareRate = (Number(_this.accountForm.shareRate) / 100).toFixed(2);\n          }\n\n          var loading = _this.$loading({\n            lock: true,\n            text: 'Loading',\n            spinner: 'el-icon-loading',\n            background: 'rgba(0, 0, 0, 0.7)'\n          });\n\n          _this.$api.batchUpdateAgentSetting(form).then(function (_) {\n            if (_.code === 200) {\n              _this.$emit('input', false);\n\n              _this.$emit('closeEdit');\n\n              _this.dialogVisible = false;\n\n              _this.$message({\n                message: _this.$t(_this.$t('merchant_merchantinfo_components_edittrial_987')),\n                type: 'success'\n              });\n            }\n\n            loading.close();\n            _this.canEdit = true;\n          }).catch(function () {\n            loading.close();\n            _this.canEdit = true;\n          });\n        }\n      });\n    }\n  }\n};",null]}