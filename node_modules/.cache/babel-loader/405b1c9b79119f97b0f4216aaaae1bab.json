{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\pages\\index\\common\\request-interceptor.js","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\pages\\index\\common\\request-interceptor.js","mtime":1617594855315},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCByZXF1ZXN0IGZyb20gJ0AvdXRpbHMvcmVxdWVzdCc7CmltcG9ydCBzdG9yYWdlIGZyb20gJ3N0b3JlJzsKaW1wb3J0IHN0b3JlIGZyb20gJy4uL3N0b3JlJzsKaW1wb3J0IHsgQUNDRVNTX1RPS0VOIH0gZnJvbSAnQC9zdG9yZS9tdXRhdGlvbi10eXBlcyc7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi4vcm91dGVyJzsgLy8g5byC5bi45oum5oiq5aSE55CG5ZmoCgp2YXIgZXJyb3JIYW5kbGVyID0gZnVuY3Rpb24gZXJyb3JIYW5kbGVyKGVycm9yKSB7CiAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAvLyDku44gbG9jYWxzdG9yYWdlIOiOt+WPliB0b2tlbgogICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAzKSB7CiAgICAgIHJvdXRlci5wdXNoKCcvNDAzJyk7CiAgICB9CgogICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA0KSB7CiAgICAgIHJvdXRlci5wdXNoKCcvNDA0Jyk7CiAgICB9CgogICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNTAwKSB7CiAgICAgIHJvdXRlci5wdXNoKCcvNTAwJyk7CiAgICB9CgogICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCdMb2dvdXQnKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAnL2xvZ2luLmh0bWwnOwogICAgICB9KTsKICAgIH0KICB9CgogIGNvbnNvbGUubG9nKGVycm9yKTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9OyAvLyByZXF1ZXN0IGludGVyY2VwdG9yCgoKcmVxdWVzdC5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIHZhciB0b2tlbiA9IHN0b3JhZ2UuZ2V0KEFDQ0VTU19UT0tFTik7IC8vIOWmguaenCB0b2tlbiDlrZjlnKgKICAvLyDorqnmr4/kuKror7fmsYLmkLrluKboh6rlrprkuYkgdG9rZW4g6K+35qC55o2u5a6e6ZmF5oOF5Ya16Ieq6KGM5L+u5pS5CgogIGlmICh0b2tlbikgewogICAgY29uZmlnLmhlYWRlcnNbJ0FjY2Vzcy1Ub2tlbiddID0gdG9rZW47CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBlcnJvckhhbmRsZXIpOyAvLyByZXNwb25zZSBpbnRlcmNlcHRvcgoKcmVxdWVzdC5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIHJldHVybiByZXNwb25zZS5kYXRhOwp9LCBlcnJvckhhbmRsZXIpOw=="},{"version":3,"sources":["C:/Users/admin/Desktop/merchant-manager-web/src/pages/index/common/request-interceptor.js"],"names":["request","storage","store","ACCESS_TOKEN","router","errorHandler","error","response","status","push","dispatch","then","window","location","console","log","Promise","reject","interceptors","use","config","token","get","headers","data"],"mappings":";AAAA,OAAOA,OAAP,MAAoB,iBAApB;AACA,OAAOC,OAAP,MAAoB,OAApB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,SAASC,YAAT,QAA6B,wBAA7B;AACA,OAAOC,MAAP,MAAmB,WAAnB,C,CAEA;;AACA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,KAAD,EAAW;AAC9B,MAAIA,KAAK,CAACC,QAAV,EAAoB;AAClB;AACA,QAAID,KAAK,CAACC,QAAN,CAAeC,MAAf,KAA0B,GAA9B,EAAmC;AACjCJ,MAAAA,MAAM,CAACK,IAAP,CAAY,MAAZ;AACD;;AACD,QAAIH,KAAK,CAACC,QAAN,CAAeC,MAAf,KAA0B,GAA9B,EAAmC;AACjCJ,MAAAA,MAAM,CAACK,IAAP,CAAY,MAAZ;AACD;;AACD,QAAIH,KAAK,CAACC,QAAN,CAAeC,MAAf,KAA0B,GAA9B,EAAmC;AACjCJ,MAAAA,MAAM,CAACK,IAAP,CAAY,MAAZ;AACD;;AACD,QAAIH,KAAK,CAACC,QAAN,CAAeC,MAAf,KAA0B,GAA9B,EAAmC;AACjCN,MAAAA,KAAK,CAACQ,QAAN,CAAe,QAAf,EAAyBC,IAAzB,CAA8B,YAAM;AAClCC,QAAAA,MAAM,CAACC,QAAP,GAAkB,aAAlB;AACD,OAFD;AAGD;AACF;;AACDC,EAAAA,OAAO,CAACC,GAAR,CAAYT,KAAZ;AACA,SAAOU,OAAO,CAACC,MAAR,CAAeX,KAAf,CAAP;AACD,CApBD,C,CAsBA;;;AACAN,OAAO,CAACkB,YAAR,CAAqBlB,OAArB,CAA6BmB,GAA7B,CAAiC,UAAAC,MAAM,EAAI;AACzC,MAAMC,KAAK,GAAGpB,OAAO,CAACqB,GAAR,CAAYnB,YAAZ,CAAd,CADyC,CAEzC;AACA;;AACA,MAAIkB,KAAJ,EAAW;AACTD,IAAAA,MAAM,CAACG,OAAP,CAAe,cAAf,IAAiCF,KAAjC;AACD;;AACD,SAAOD,MAAP;AACD,CARD,EAQGf,YARH,E,CAUA;;AACAL,OAAO,CAACkB,YAAR,CAAqBX,QAArB,CAA8BY,GAA9B,CAAkC,UAACZ,QAAD,EAAc;AAC9C,SAAOA,QAAQ,CAACiB,IAAhB;AACD,CAFD,EAEGnB,YAFH","sourcesContent":["import request from '@/utils/request'\r\nimport storage from 'store'\r\nimport store from '../store'\r\nimport { ACCESS_TOKEN } from '@/store/mutation-types'\r\nimport router from '../router'\r\n\r\n// 异常拦截处理器\r\nconst errorHandler = (error) => {\r\n  if (error.response) {\r\n    // 从 localstorage 获取 token\r\n    if (error.response.status === 403) {\r\n      router.push('/403')\r\n    }\r\n    if (error.response.status === 404) {\r\n      router.push('/404')\r\n    }\r\n    if (error.response.status === 500) {\r\n      router.push('/500')\r\n    }\r\n    if (error.response.status === 401) {\r\n      store.dispatch('Logout').then(() => {\r\n        window.location = '/login.html'\r\n      })\r\n    }\r\n  }\r\n  console.log(error)\r\n  return Promise.reject(error)\r\n}\r\n\r\n// request interceptor\r\nrequest.interceptors.request.use(config => {\r\n  const token = storage.get(ACCESS_TOKEN)\r\n  // 如果 token 存在\r\n  // 让每个请求携带自定义 token 请根据实际情况自行修改\r\n  if (token) {\r\n    config.headers['Access-Token'] = token\r\n  }\r\n  return config\r\n}, errorHandler)\r\n\r\n// response interceptor\r\nrequest.interceptors.response.use((response) => {\r\n  return response.data\r\n}, errorHandler)\r\n"]}]}