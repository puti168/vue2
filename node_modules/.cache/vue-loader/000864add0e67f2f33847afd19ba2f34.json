{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\operationManage\\activity\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\operationManage\\activity\\index.vue","mtime":1616384580117},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { mapGetters } from 'vuex'\r\nimport list from '@/mixins/list'\r\nimport { routerNames } from '@/utils/consts'\r\nimport SelectAgentTree from '@/components/SelectAgentTree'\r\nimport dayjs from 'dayjs'\r\nexport default {\r\n\tname: routerNames.activity,\r\n\tcomponents: { SelectAgentTree },\r\n\tmixins: [list],\r\n\tdata() {\r\n\t\tconst end = dayjs()\r\n\t\t\t.endOf('day')\r\n\t\t\t.valueOf()\r\n\t\tconst start = dayjs()\r\n\t\t\t.startOf('day')\r\n\t\t\t.valueOf()\r\n\t\treturn {\r\n\t\t\thadSearch: false,\r\n\t\t\tdialogVisible: false,\r\n\t\t\tloading: false,\r\n\t\t\tloading2: false,\r\n\t\t\tform2: {\r\n\t\t\t\tplayerId: '',\r\n\t\t\t\tbizId: ''\r\n\t\t\t},\r\n\t\t\tlist2: [],\r\n\t\t\tpageIndex2: 1,\r\n\t\t\tsummary2: {},\r\n\t\t\tamountData: {\r\n\t\t\t\tplayerCount: '-',\r\n\t\t\t\trecordCount: '-',\r\n\t\t\t\tamount: '-'\r\n\t\t\t},\r\n\t\t\tamountData2: {\r\n\t\t\t\tactivityVaildAmount: '-',\r\n\t\t\t\tcompleteVaildAmount: '-'\r\n\t\t\t},\r\n\t\t\tform: {\r\n\t\t\t\ttime: [start, end],\r\n\t\t\t\tstatus: -1,\r\n\t\t\t\tactivityType: -1,\r\n\t\t\t\tplayerLoginName: '',\r\n\t\t\t\tactivityId: '',\r\n\t\t\t\tagentId: ''\r\n\t\t\t},\r\n\t\t\tsummary: {}\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters(['name', 'userInfo'])\r\n\t},\r\n\tmethods: {\r\n\t\tloadData() {\r\n\t\t\tthis.loading = true\r\n\t\t\tconst initData = {\r\n\t\t\t\tpageIndex: this.pageIndex,\r\n\t\t\t\tpageSize: this.pageSize,\r\n\t\t\t\tactivityType: this.form.activityType,\r\n\t\t\t\tstatus: this.form.status,\r\n\t\t\t\tplayerLoginName: this.form.playerLoginName,\r\n\t\t\t\tactivityId: this.form.activityId,\r\n\t\t\t\tagentId: this.form.agentId,\r\n\t\t\t\tstartTime: this.form.time ? this.form.time[0] : '',\r\n\t\t\t\tendTime: this.form.time ? this.form.time[1] : ''\r\n\t\t\t}\r\n\t\t\tconst form = {\r\n\t\t\t\t...initData\r\n\t\t\t}\r\n\t\t\tthis.$api\r\n\t\t\t\t.activityTaskList(form)\r\n\t\t\t\t.then((_) => {\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\tif (_.code === 200) {\r\n\t\t\t\t\t\tconst data = _.data\r\n\t\t\t\t\t\tthis.list = data.record || []\r\n\t\t\t\t\t\tthis.total = data.totalRecord\r\n\t\t\t\t\t\tthis.summary = data.summary\r\n\t\t\t\t\t\tthis.amountData = data.summary || {\r\n\t\t\t\t\t\t\tplayerCount: '-',\r\n\t\t\t\t\t\t\trecordCount: '-',\r\n\t\t\t\t\t\t\tamount: '-'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\tthis.amountData = {\r\n\t\t\t\t\t\t\tplayerCount: '-',\r\n\t\t\t\t\t\t\trecordCount: '-',\r\n\t\t\t\t\t\t\tamount: '-'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t},\r\n\t\tloadDetail(row) {\r\n\t\t\tthis.loading2 = true\r\n\t\t\tthis.form2.playerId = row.playerId\r\n\t\t\tthis.form2.bizId = row.bizId\r\n\t\t\tthis.$api\r\n\t\t\t\t.activeTaskDetailList(this.form2)\r\n\t\t\t\t.then((_) => {\r\n\t\t\t\t\tthis.loading2 = false\r\n\t\t\t\t\tif (_.code === 200) {\r\n\t\t\t\t\t\tconst data = JSON.parse(JSON.stringify(_.data))\r\n\t\t\t\t\t\tconsole.log('data')\r\n\t\t\t\t\t\tconsole.log(data)\r\n\t\t\t\t\t\tthis.list2 = data.list || []\r\n\t\t\t\t\t\tthis.amountData2 = data.summaryDto || {\r\n\t\t\t\t\t\t\tactivityVaildAmount: '-',\r\n\t\t\t\t\t\t\tcompleteVaildAmount: '-'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.loading2 = false\r\n\t\t\t\t\tthis.amountData2 = {\r\n\t\t\t\t\t\t\tactivityVaildAmount: '-',\r\n\t\t\t\t\t\t\tcompleteVaildAmount: '-'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t},\r\n\r\n\t\tgiftFilter(val) {\r\n\t\t\tif (val === 100001) {\r\n\t\t\t\treturn this.$t('a_36')\r\n\t\t\t} else {\r\n\t\t\t\treturn this.$t('a_37')\r\n\t\t\t}\r\n\t\t},\r\n\t\thandleCurrentChange(val) {\r\n\t\t\tif (this.loading) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tthis.loadData()\r\n\t\t},\r\n\t\thandleReset() {\r\n\t\t\tconst end = dayjs()\r\n\t\t\t\t.endOf('day')\r\n\t\t\t\t.valueOf()\r\n\t\t\tconst start = dayjs()\r\n\t\t\t\t.startOf('day')\r\n\t\t\t\t.valueOf()\r\n\t\t\tthis.form = {\r\n\t\t\t\ttime: [start, end],\r\n\t\t\t\tstatus: -1,\r\n\t\t\t\tactivityType: -1,\r\n\t\t\t\tplayerLoginName: '',\r\n\t\t\t\tactivityId: '',\r\n\t\t\t\tagentId: ''\r\n\t\t\t}\r\n\t\t\tthis.hadSearch = false\r\n\t\t\tthis.initList()\r\n\t\t},\r\n\t\thandleSearch() {\r\n\t\t\tthis.hadSearch = true\r\n\t\t\tthis.pageIndex = 1\r\n\t\t\tthis.loadData()\r\n\t\t},\r\n\t\thandleClose() {\r\n\t\t\tthis.dialogVisible = false\r\n\t\t},\r\n\t\tshowDailyDetail(row) {\r\n\t\t\tthis.loadDetail(row)\r\n\t\t\tthis.dialogVisible = true\r\n\t\t}\r\n\t}\r\n}\r\n",null]}