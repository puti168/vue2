{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\systemmanagement\\siteQuery\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\systemmanagement\\siteQuery\\index.vue","mtime":1617695097442},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { mapGetters } from 'vuex'\r\nimport list from '@/mixins/list'\r\nimport { IsURL } from '@/utils'\r\nimport { routerNames } from '@/utils/consts'\r\nimport SelectAgentTree from '@/components/SelectAgentTree'\r\nimport { message } from '@/utils/message'\r\nimport Cookies from 'js-cookie'\r\n\r\nexport default {\r\n\tname: routerNames.siteQuery,\r\n\tcomponents: { SelectAgentTree },\r\n\tmixins: [list],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\thadSearch: false,\r\n\t\t\tloading: false,\r\n\t\t\turlDialogVisible: false,\r\n\t\t\trecordDialogVisible: false,\r\n\t\t\tcurrentPage: 1,\r\n\t\t\tpageSize: 50,\r\n\t\t\tform: {\r\n\t\t\t\tagentId: '',\r\n\t\t\t\tstatus: -1,\r\n\t\t\t\ttype: -1\r\n\t\t\t},\r\n\t\t\turlDialogForm: {\r\n\t\t\t\tagentId: '',\r\n\t\t\t\turl: ''\r\n\t\t\t},\r\n\t\t\tlist: []\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters(['name']),\r\n\t\t...mapGetters(['buttonPermissions']),\r\n\t\t...mapGetters(['globalDics']),\r\n\t\turltype() {\r\n\t\t\tconst types = this.globalDics.urltype || []\r\n\t\t\treturn types.map((item) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tvalue: item.value,\r\n\t\t\t\t\tlabel: item.text,\r\n\t\t\t\t\tzh: item.text,\r\n\t\t\t\t\ten: item.englishText\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\turlDialogFormRules() {\r\n\t\t\tconst validUrl = (rule, value, callback) => {\r\n\t\t\t\tif (value.length > 255) {\r\n\t\t\t\t\tcallback(new Error(this.$t('systemmanagement_businessadress_index_13277')))\r\n\t\t\t\t} else if (IsURL(value)) {\r\n\t\t\t\t\tcallback()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback(new Error(this.$t('systemmanagement_businessadress_index_13288')))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tdomainUrl: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tmessage: this.$t('systemmanagement_businessadress_index_13222'),\r\n\t\t\t\t\t\ttrigger: 'blur',\r\n\t\t\t\t\t\trequired: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{ validator: validUrl, trigger: 'blur' }\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\thandleSearch() {\r\n\t\t\tthis.hadSearch = true\r\n\t\t\tthis.pageIndex = 1\r\n\t\t\tthis.loadData()\r\n\t\t},\r\n\t\thandleReset() {\r\n\t\t\tthis.hadSearch = false\r\n\t\t\tthis.form = {\r\n\t\t\t\tstatus: -1,\r\n\t\t\t\tagentId: ''\r\n\t\t\t}\r\n\t\t\tthis.initList()\r\n\t\t},\r\n\t\tloadData() {\r\n\t\t\tthis.loading = true\r\n\t\t\tconst initData = {\r\n\t\t\t\tpageSize: this.pageSize,\r\n\t\t\t\tpageIndex: this.pageIndex,\r\n\t\t\t\tagentId: this.form.agentId\r\n\t\t\t}\r\n\t\t\tthis.$api\r\n\t\t\t\t.agentDomainList(initData)\r\n\t\t\t\t.then((_) => {\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\tconst data = _.data\r\n\t\t\t\t\tthis.list = data.record\r\n\t\t\t\t\tthis.total = data.totalRecord\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t})\r\n\t\t},\r\n\t\tfilterUrlType(c) {\r\n\t\t\tconst arr = this.urltype || []\r\n\t\t\tconst find = arr.find((item) => Number(item.value) === Number(c))\r\n\t\t\tif (Cookies.get('language') === 'zh') {\r\n\t\t\t\treturn (find && find.zh) || '-'\r\n\t\t\t}\r\n\t\t\tif (Cookies.get('language') === 'en') {\r\n\t\t\t\treturn (find && find.en) || '-'\r\n\t\t\t}\r\n\t\t\treturn '-'\r\n\t\t},\r\n\t\tcommitUrlDialog() {\r\n\t\t\tthis.urlDialogForm.agentId = Number(this.urlDialogForm.agentId)\r\n\t\t\tthis.$refs.urlDialogForm.validate((_) => {\r\n\t\t\t\tif (_) {\r\n\t\t\t\t\tconst loading = this.$loading({\r\n\t\t\t\tlock: true,\r\n\t\t\t\ttext: 'Loading',\r\n\t\t\t\tspinner: 'el-icon-loading',\r\n\t\t\t\tbackground: 'rgba(0, 0, 0, 0.7)'\r\n\t\t\t})\r\n\t\t\t\t\tthis.$api.addAgentDomain(this.urlDialogForm).then((_) => {\r\n\t\t\t\t\t\tif (_.code === 200) {\r\n\t\t\t\t\t\t\tthis.urlDialogVisible = false\r\n\t\t\t\t\t\t\tmessage({\r\n\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\tmessage: this.$t('merchant_merchantinfo_components_keysmanage_1004')\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthis.loadData()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tloading.close()\r\n\t\t\t\t\t}).catch(() => {\r\n\t\t\t\t\t\tloading.close()\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\thandleCurrentChange(val) {\r\n\t\t\tthis.pageIndex = val\r\n\t\t\tthis.loadData()\r\n\t\t},\r\n\t\tonHandleCancel() {\r\n\t\t\tthis.urlDialogVisible = false\r\n\t\t\tthis.$refs.urlDialogForm.clearValidate()\r\n\t\t},\r\n\t\thandleNewAddress() {\r\n\t\t\tthis.urlDialogForm = {}\r\n\t\t\tthis.urlDialogVisible = true\r\n\t\t}\r\n\t}\r\n}\r\n",null]}