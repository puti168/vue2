{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\operationManage\\activitySettings\\components\\TableComp.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\operationManage\\activitySettings\\components\\TableComp.vue","mtime":1617695097431},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { mapGetters } from 'vuex'\r\nimport store2 from 'storejs'\r\nimport { i18nName } from '@/utils/i18n'\r\nimport store from '@/store'\r\nimport list from '@/mixins/list'\r\nimport { getToken } from '@/utils/auth'\r\nexport default {\r\n\tname: 'MerchantTableComp',\r\n\tmixins: [list],\r\n\tprops: {\r\n\t\ttableData: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: function() {\r\n\t\t\t\treturn {}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcurrency: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: function() {\r\n\t\t\t\treturn []\r\n\t\t\t}\r\n\t\t},\r\n\t\tchangeValue: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'chatStatus'\r\n\t\t},\r\n\t\tnode: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: function() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tselectValue: store.state.tree.selectValue\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tpageSize: 5,\r\n\t\t\tselectValue: 'chatStatus',\r\n\t\t\tisShowChoiceColumn: false,\r\n\t\t\tdataList: {},\r\n\t\t\tlogo: {},\r\n\t\t\tdefaultColumn: store2.get('settingColumn')\r\n\t\t\t\t? store2.get('settingColumn')\r\n\t\t\t\t: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 2,\r\n\t\t\t\t\t\t\tchecked: false,\r\n\t\t\t\t\t\t\tcancel: true,\r\n\t\t\t\t\t\t\tname: 'new_27'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 3,\r\n\t\t\t\t\t\t\tchecked: false,\r\n\t\t\t\t\t\t\tcancel: true,\r\n\t\t\t\t\t\t\tname: 'new_28'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 4,\r\n\t\t\t\t\t\t\tchecked: false,\r\n\t\t\t\t\t\t\tcancel: true,\r\n\t\t\t\t\t\t\tname: 'new_29'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 5,\r\n\t\t\t\t\t\t\tchecked: false,\r\n\t\t\t\t\t\t\tcancel: true,\r\n\t\t\t\t\t\t\tname: 'new_30'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 6,\r\n\t\t\t\t\t\t\tchecked: false,\r\n\t\t\t\t\t\t\tcancel: true,\r\n\t\t\t\t\t\t\tname: 'new_31'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 7,\r\n\t\t\t\t\t\t\tchecked: false,\r\n\t\t\t\t\t\t\tcancel: true,\r\n\t\t\t\t\t\t\tname: 'new_32'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 8,\r\n\t\t\t\t\t\t\tchecked: false,\r\n\t\t\t\t\t\t\tcancel: true,\r\n\t\t\t\t\t\t\tname: 'new_322'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 9,\r\n\t\t\t\t\t\t\tchecked: false,\r\n\t\t\t\t\t\t\tcancel: true,\r\n\t\t\t\t\t\t\tname: 'new_321'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t  ],\r\n\t\t\tfileList: [],\r\n\t\t\tuploadUrl: process.env.VUE_APP_BASE_API + '/agents/uploadAgentLog',\r\n\t\t\tcurrentAgentId: ''\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters(['userInfo', 'globalDics']),\r\n\t\ttoken() {\r\n\t\t\treturn getToken()\r\n\t\t},\r\n\t\tselectData() {\r\n\t\t\tlet data = {}\r\n\t\t\tthis.sList.forEach((item) => {\r\n\t\t\t\tif (item.data === this.selectValue) {\r\n\t\t\t\t\tdata = item\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn data\r\n\t\t},\r\n\t\tsList() {\r\n\t\t\treturn [\r\n\t\t\t\t// 聊天功能开关\r\n\t\t\t\t{\r\n\t\t\t\t\tdata: 'chatStatus',\r\n\t\t\t\t\tpermission: 18108,\r\n\t\t\t\t\tlabel: this.$t('new_26'),\r\n\t\t\t\t\tfree: 'chatFreeStatus'\r\n\t\t\t\t},\r\n\t\t\t\t// 平台赛开关\r\n\t\t\t\t{\r\n\t\t\t\t\tdata: 'gamePlatfromStatus',\r\n\t\t\t\t\tpermission: 18117,\r\n\t\t\t\t\tlabel: this.$t('new_27')\r\n\t\t\t\t},\r\n\t\t\t\t// 商户赛开关\r\n\t\t\t\t{\r\n\t\t\t\t\tdata: 'gameAgentStatus',\r\n\t\t\t\t\tpermission: 18110,\r\n\t\t\t\t\tlabel: this.$t('new_28')\r\n\t\t\t\t},\r\n\t\t\t\t// 荷官打赏开关\r\n\t\t\t\t{\r\n\t\t\t\t\tdata: 'rewardDealerStatus',\r\n\t\t\t\t\tpermission: 18111,\r\n\t\t\t\t\tlabel: this.$t('new_29')\r\n\t\t\t\t},\r\n\t\t\t\t// 红包雨开关\r\n\t\t\t\t{\r\n\t\t\t\t\tdata: 'redEnvelopeStatus',\r\n\t\t\t\t\tpermission: 18112,\r\n\t\t\t\t\tlabel: this.$t('new_30')\r\n\t\t\t\t},\r\n\t\t\t\t// 美女主播开关\r\n\t\t\t\t{\r\n\t\t\t\t\tdata: 'anchorModelStatus',\r\n\t\t\t\t\tpermission: 18113,\r\n\t\t\t\t\tlabel: this.$t('new_31')\r\n\t\t\t\t},\r\n\t\t\t\t// 主播厅送礼开关\r\n\t\t\t\t{\r\n\t\t\t\t\tdata: 'rewardAnchorStatus',\r\n\t\t\t\t\tpermission: 18114,\r\n\t\t\t\t\tlabel: this.$t('new_32')\r\n\t\t\t\t},\r\n\t\t\t\t// 桌边主播开关\r\n\t\t\t\t{\r\n\t\t\t\t\tdata: 'rewardTableAnchorStatus',\r\n\t\t\t\t\tpermission: 18146,\r\n\t\t\t\t\tlabel: this.$t('new_322')\r\n\t\t\t\t},\r\n\t\t\t\t// 主播厅聊天开关\r\n\t\t\t\t{\r\n\t\t\t\t\tdata: 'anchorTableChatStatus',\r\n\t\t\t\t\tpermission: 18148,\r\n\t\t\t\t\tlabel: this.$t('agent_08'),\r\n\t\t\t\t\tfree: 'anchorTableFreeChatStatus'\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t},\r\n\t\tcolumns() {\r\n\t\t\tconst arr = this.defaultColumn\r\n\t\t\treturn arr\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tnode: {\r\n\t\t\thandler(val) {\r\n\t\t\t\tthis.selectValue = val.selectValue\r\n\t\t\t},\r\n\t\t\timmediate: true,\r\n\t\t\tdeep: true\r\n\t\t},\r\n\t\tchangeValue(val) {\r\n\t\t\tthis.selectValue = this.$store.state.tree.selectValue\r\n\t\t}\r\n\t},\r\n\tdestroyed() {\r\n\t\tdocument.removeEventListener('click', this.showColumn)\r\n\t},\r\n\tmounted() {\r\n\t\tdocument.addEventListener('click', this.showColumn)\r\n\t},\r\n\tmethods: {\r\n\t\tifArrow(levels, index) {\r\n\t\t\tconst levelsLength = levels.length\r\n\t\t\tif (levelsLength > 1 && index !== levelsLength - 1) return true\r\n\t\t},\r\n\t\tarraySpanMethod({ row, column, rowIndex, columnIndex }) {\r\n\t\t\tif (rowIndex === 0 && this.tableData.level === 1) {\r\n\t\t\t\tlet length = 0\r\n\t\t\t\tthis.defaultColumn.forEach((item) => {\r\n\t\t\t\t\tif (item.checked) {\r\n\t\t\t\t\t\tlength += 1\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tif (columnIndex === 6) {\r\n\t\t\t\t\treturn [1, length + 1]\r\n\t\t\t\t} else if (columnIndex > 6 && columnIndex < length + 7) {\r\n\t\t\t\t\treturn [0, 0]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tshowColumn(e) {\r\n\t\t\tconst icon = document.getElementById('icon')\r\n\t\t\tconst list = document.getElementById('list')\r\n\t\t\tif (icon && !icon.contains(e.target) && list && !list.contains(e.target)) {\r\n\t\t\t\tthis.isShowChoiceColumn = false\r\n\t\t\t}\r\n\t\t},\r\n\t\tbeforeAvatarUpload(file, row) {\r\n\t\t\tconst isPNG = file.type === 'image/png'\r\n\t\t\tif (!isPNG) {\r\n\t\t\t\tthis.$message.error(this.$t('new_2771'))\r\n\t\t\t}\r\n\t\t\tconst isSize = new Promise(function(resolve, reject) {\r\n\t\t\t\tconst _URL = window.URL || window.webkitURL\r\n\t\t\t\tconst image = new Image()\r\n\t\t\t\t// image.src = file.url\r\n\t\t\t\timage.onload = () => {\r\n\t\t\t\t\tconst valid = image.width === 240 && image.height === 72\r\n\t\t\t\t\tvalid ? resolve() : reject()\r\n\t\t\t\t}\r\n\t\t\t\timage.src = _URL.createObjectURL(file)\r\n\t\t\t}).then(\r\n\t\t\t\t() => {\r\n\t\t\t\t\treturn file\r\n\t\t\t\t},\r\n\t\t\t\t() => {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\tmessage: this.$t('new_2771'),\r\n\t\t\t\t\t\ttype: 'error'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn Promise.reject()\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\tthis.dataList = {\r\n\t\t\t\ttextType: 4,\r\n\t\t\t\tagentId: row.agentId.split('_')[1]\r\n\t\t\t}\r\n\t\t\treturn isPNG && isSize\r\n\t\t},\r\n\t\thandleAvatarSuccess(response, file, fileList, row) {\r\n\t\t\tif (response.code !== 200) {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: this.$i18n.t(`backstage_${response.code}`),\r\n\t\t\t\t\ttype: 'error'\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\trow.blogo = response.data\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: this.$t(`new_1111`),\r\n\t\t\t\t\ttype: 'success'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetCooperationModel(model) {\r\n\t\t\tif (model === 1) {\r\n\t\t\t\treturn this.$t('merchant_merchantinfo_components_tablecomp_1096')\r\n\t\t\t} else if (model === 2) {\r\n\t\t\t\treturn this.$t('merchant_merchantinfo_components_tablecomp_1097')\r\n\t\t\t} else if (model === 3) {\r\n\t\t\t\treturn this.$t('merchant_merchantinfo_components_tablecomp_1098')\r\n\t\t\t}\r\n\t\t},\r\n\t\tselectFilter(value) {\r\n\t\t\tlet title = ''\r\n\t\t\tthis.sList.forEach((item) => {\r\n\t\t\t\tif (item.data === value) {\r\n\t\t\t\t\ttitle = item.label\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn title\r\n\t\t},\r\n\t\tonCheckBoxChange(value, id) {\r\n\t\t\tconst index = this.defaultColumn.findIndex((val) => val.id === id)\r\n\t\t\tif (index > -1) {\r\n\t\t\t\tthis.defaultColumn.splice(index, 1, {\r\n\t\t\t\t\t...this.columns[index],\r\n\t\t\t\t\tchecked: value\r\n\t\t\t\t})\r\n\t\t\t\tstore2.set('settingColumn', this.defaultColumn)\r\n\t\t\t}\r\n\t\t\tthis.$emit('handleSearch')\r\n\t\t},\r\n\t\tshowChoiceColumn() {\r\n\t\t\tthis.isShowChoiceColumn = !this.isShowChoiceColumn\r\n\t\t},\r\n\t\tselectChange() {\r\n\t\t\tthis.$emit('selectChange', this.selectValue)\r\n\t\t},\r\n\t\teditStatus(index, row, status) {\r\n\t\t\tthis.$emit('editStatus', index, row, this.tableData.level, status)\r\n\t\t},\r\n\t\teditAll(status) {\r\n\t\t\tthis.$emit('editAll', status)\r\n\t\t},\r\n\t\teditFree(index, row, status) {\r\n\t\t\tthis.$emit('editFree', index, row, this.tableData.level, status)\r\n\t\t},\r\n\t\teditOpen(index, row, type) {\r\n\t\t\tthis.$emit('editOpen', index, row, this.tableData.level, type)\r\n\t\t},\r\n\t\thandlePaginationChange(val, type) {\r\n\t\t\tthis.$emit(\r\n\t\t\t\t'modifyData',\r\n\t\t\t\tthis.tableData.level,\r\n\t\t\t\t{\r\n\t\t\t\t\tpageSize: type === 1 ? val : this.pageSize,\r\n\t\t\t\t\tpageIndex: type === 2 ? val : this.pageIndex,\r\n\t\t\t\t\tagentId: this.tableData.parentId,\r\n\t\t\t\t\tagentName: this.tableData.parentName\r\n\t\t\t\t},\r\n\t\t\t\tthis.tableData.level - 1,\r\n\t\t\t\t2\r\n\t\t\t)\r\n\t\t},\r\n\t\tchecked(id) {\r\n\t\t\tconst index = this.columns.findIndex((val) => val.id === id)\r\n\t\t\tif (index > -1) {\r\n\t\t\t\treturn this.columns[index].checked\r\n\t\t\t}\r\n\t\t},\r\n\t\tshowChildren(level, opened, row) {\r\n\t\t\tthis.$emit(\r\n\t\t\t\t'showChildren',\r\n\t\t\t\tthis.currentAgentId === row.agentId,\r\n\t\t\t\tlevel,\r\n\t\t\t\topened,\r\n\t\t\t\t{\r\n\t\t\t\t\tagentId: row.agentId,\r\n\t\t\t\t\tagentName: row.agentName,\r\n\t\t\t\t\tpageSize: 5,\r\n\t\t\t\t\tpageIndex: 1\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\tthis.currentAgentId = row.agentId\r\n\t\t},\r\n\t\t// 获取货币类型\r\n\t\tgetCurrency(id) {\r\n\t\t\tconst index = this.currency.findIndex((val) => Number(val.id) === id)\r\n\t\t\tif (index > -1) {\r\n\t\t\t\treturn this.currency[index].code\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetTrueName(name) {\r\n\t\t\treturn i18nName(name)\r\n\t\t}\r\n\t}\r\n}\r\n",null]}