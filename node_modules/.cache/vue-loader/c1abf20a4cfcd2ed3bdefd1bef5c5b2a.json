{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\merchant\\merchantInfo\\components\\NewBusiness.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\merchant\\merchantInfo\\components\\NewBusiness.vue","mtime":1616384580089},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { validPassword, decimalValidate } from '@/utils/validate'\r\nimport { IsURL } from '@/utils'\r\nimport { mapGetters } from 'vuex'\r\nimport { message } from '@/utils/message'\r\nimport dayjs from 'dayjs'\r\n\r\nexport default {\r\n\tname: 'NewBusiness',\r\n\tprops: {\r\n\t\tbusinessDrawer: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\ttype: { type: Number, default: 1 }, // 1为新增商户商户 2位新增线路商商户,\r\n\t\tagentCode: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: function() {\r\n\t\t\t\treturn ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tmd5: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: function() {\r\n\t\t\t\treturn {}\r\n\t\t\t}\r\n\t\t},\r\n\t\tagentType: {\r\n\t\t\ttype: [String, Number],\r\n\t\t\tdefault: function() {\r\n\t\t\t\treturn ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tgoogleAuthCode: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: function() {\r\n\t\t\t\treturn ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tagentsLevel: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: function() {\r\n\t\t\t\treturn ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreateLevel: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: function() {\r\n\t\t\t\treturn ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tplatformAgent: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: function() {\r\n\t\t\t\treturn 1\r\n\t\t\t}\r\n\t\t},\r\n\t\tagentId: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: function() {\r\n\t\t\t\treturn ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tcurrencyId: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: function() {\r\n\t\t\t\treturn '1'\r\n\t\t\t}\r\n\t\t},\r\n\t\tapiRate: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: function() {\r\n\t\t\t\treturn 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tcountPercentage: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: function() {\r\n\t\t\t\treturn 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tcooperationModel: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: function() {\r\n\t\t\t\treturn 0\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tstep: 0,\r\n\t\t\tdrawer: false,\r\n\t\t\t// 全部数据\r\n\t\t\tdata: [],\r\n\t\t\t// 树数据\r\n\t\t\ttree: [],\r\n\t\t\tagentName: '',\r\n\t\t\tagentCode2: '',\r\n\t\t\tstoreDatas: [],\r\n\t\t\tcurrency: {},\r\n\t\t\tform: {\r\n\t\t\t\tagentName: '',\r\n\t\t\t\tagentCode: '',\r\n\t\t\t\tagentType: '',\r\n\t\t\t\tapiRate: '',\r\n\t\t\t\twalletMd5key: '',\r\n\t\t\t\tshowInPage: '',\r\n\t\t\t\tcountPercentage: '',\r\n\t\t\t\tpassword: '',\r\n\t\t\t\tpasswordAgain: '',\r\n\t\t\t\twalletModel: 1,\r\n\t\t\t\tplatformAgent: 0,\r\n\t\t\t\twalletUrl: '',\r\n\t\t\t\tcurrency: this.$store.state.user.userInfo.currencyId + '' || '1',\r\n\t\t\t\tcooperations: [],\r\n\t\t\t\tdsStartTime: dayjs().format('YYYY-MM-DD'),\r\n\t\t\t\trateStartTime: dayjs().format('YYYY-MM-DD'),\r\n\t\t\t\tverifyCodeType: 1,\r\n\t\t\t\twalletType: 0,\r\n\t\t\t\tlimitRed: ''\r\n\t\t\t},\r\n\t\t\tdirection: 'ttb',\r\n\t\t\tshowGoogleCode: true,\r\n\t\t\tbetLimits: []\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters(['globalDics']),\r\n\t\t...mapGetters(['userInfo']),\r\n\t\twalletmodel() {\r\n\t\t\treturn this.globalDics.walletmodel\r\n\t\t},\r\n\t\trules() {\r\n\t\t\tconst validAdminAccount = (rule, value, callback) => {\r\n\t\t\t\tif (!/^[a-zA-Z]([0-9]|[a-zA-Z])*$/g.test(value)) {\r\n\t\t\t\t\tcallback(\r\n\t\t\t\t\t\tnew Error(this.$t('merchant_merchantinfo_components_newbusiness_1055'))\r\n\t\t\t\t\t)\r\n\t\t\t\t} else if (value.length < 5) {\r\n\t\t\t\t\tcallback(\r\n\t\t\t\t\t\tnew Error(this.$t('merchant_merchantinfo_components_newbusiness_1056'))\r\n\t\t\t\t\t)\r\n\t\t\t\t} else if (value.length > 12) {\r\n\t\t\t\t\tcallback(\r\n\t\t\t\t\t\tnew Error(this.$t('merchant_merchantinfo_components_newbusiness_1057'))\r\n\t\t\t\t\t)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst countPercentageValidate = (rule, value, callback) => {\r\n\t\t\t\tif (!decimalValidate(value) || Number(value) === 0 || Number(value) > 100) {\r\n\t\t\t\t\tcallback(\r\n\t\t\t\t\t\tnew Error(this.$t('merchant_merchantinfo_components_newbusiness_1058'))\r\n\t\t\t\t\t)\r\n\t\t\t\t} else if (\r\n\t\t\t\t\tthis.countPercentage &&\r\n\t\t\t\t\tthis.createLevel !== 'top' &&\r\n\t\t\t\t\tNumber(value) > Number(this.countPercentage)\r\n\t\t\t\t) {\r\n\t\t\t\t\tcallback(\r\n\t\t\t\t\t\tnew Error(this.$t('merchant_merchantinfo_components_newbusiness_1059'))\r\n\t\t\t\t\t)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst apiRateValidate = (rule, value, callback) => {\r\n\t\t\t\tif (!decimalValidate(value) || Number(value) === 0 || Number(value) > 100) {\r\n\t\t\t\t\tcallback(\r\n\t\t\t\t\t\tnew Error(this.$t('merchant_merchantinfo_components_newbusiness_1060'))\r\n\t\t\t\t\t)\r\n\t\t\t\t} else if (\r\n\t\t\t\t\tthis.apiRate &&\r\n\t\t\t\t\tthis.createLevel !== 'top' &&\r\n\t\t\t\t\tNumber(value) < Number(this.apiRate)\r\n\t\t\t\t) {\r\n\t\t\t\t\tcallback(\r\n\t\t\t\t\t\tnew Error(this.$t('merchant_merchantinfo_components_newbusiness_1061'))\r\n\t\t\t\t\t)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/* eslint-disable */\r\n\t\t\tconst validateAgentName = async (rule, value, callback) => {\r\n\t\t\t\tconst result = await this.$api.checkAgentNameConflict({ agentName: value })\r\n\t\t\t\tif (result.data === 1) {\r\n\t\t\t\t\tcallback(\r\n\t\t\t\t\t\tnew Error(this.$t('merchant_merchantinfo_components_editaccount_957'))\r\n\t\t\t\t\t)\r\n\t\t\t\t} else if (!/^[a-zA-Z0-9\\u4e00-\\u9fa5]+$/.test(value)) {\r\n\t\t\t\t\tcallback(new Error(this.$t('systemmanagement_currency_index_16')))\r\n\t\t\t\t} else if (value.length > 20) {\r\n\t\t\t\t\tcallback(new Error(this.$t('systemmanagement_parameter_index_25')))\r\n\t\t\t\t} else if (value.length < 2) {\r\n\t\t\t\t\tcallback(new Error(this.$t('systemmanagement_parameter_index_26')))\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/* eslint-disable */\r\n\t\t\tconst validatePass = (rule, value, callback) => {\r\n\t\t\t\tif (!validPassword(value)) {\r\n\t\t\t\t\tcallback(new Error(this.$t('merchant.merchant_111')))\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst validateDialogPass2 = (rule, value, callback) => {\r\n\t\t\t\tif (!validPassword(value)) {\r\n\t\t\t\t\tcallback(new Error(this.$t('merchant.merchant_111')))\r\n\t\t\t\t} else if (value !== this.form.password) {\r\n\t\t\t\t\tcallback(new Error(this.$t('merchant.merchant_112')))\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\twalletType: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: this.$t('merchant.merchant_87'),\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tagentLoginName: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\ttrigger: 'blur',\r\n\t\t\t\t\t\tmessage: this.$t('merchant_merchantinfo_components_newbusiness_1062')\r\n\t\t\t\t\t},\r\n\t\t\t\t\t,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvalidator: validAdminAccount,\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tagentName: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\ttrigger: 'blur',\r\n\t\t\t\t\t\tmessage: this.$t('merchant_merchantinfo_components_newbusiness_1063')\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvalidator: validateAgentName,\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tpassword: [{ required: true, validator: validatePass, trigger: 'blur' }],\r\n\t\t\t\tpasswordAgain: [\r\n\t\t\t\t\t{ required: true, validator: validateDialogPass2, trigger: 'blur' }\r\n\t\t\t\t],\r\n\t\t\t\tcountPercentage: [\r\n\t\t\t\t\t{ required: true, validator: countPercentageValidate, trigger: 'blur' }\r\n\t\t\t\t],\r\n\t\t\t\tapiRate: [{ required: true, validator: apiRateValidate, trigger: 'blur' }],\r\n\t\t\t\twalletModel: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: this.$t('merchant.merchant_115'),\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\twalletUrl: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttrigger: 'blur',\r\n\t\t\t\t\t\tvalidator: (rule, value, callback) => {\r\n\t\t\t\t\t\t\tconsole.log('value.length :', value.length)\r\n\t\t\t\t\t\t\tif (!value || (IsURL(value) && value.length <= 255)) {\r\n\t\t\t\t\t\t\t\tcallback()\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tcallback(\r\n\t\t\t\t\t\t\t\t\tnew Error(this.$t('merchant_merchantinfo_components_newbusiness_1064'))\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tcurrency: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: this.$t('merchant.merchant_135'),\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tcooperations: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: this.$t('merchant_merchantinfo_components_newbusiness_1065'),\r\n\t\t\t\t\t\ttrigger: 'change'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tverifyCodeType: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: this.$t('merchant_merchantinfo_components_newbusiness_1066'),\r\n\t\t\t\t\t\ttrigger: 'change'\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tagentCode(val) {\r\n\t\t\tif (val) {\r\n\t\t\t\tthis.form.agentCode = val\r\n\t\t\t}\r\n\t\t},\r\n\t\tmd5(val) {\r\n\t\t\tif (val) {\r\n\t\t\t\tthis.form.walletMd5key = val.save\r\n\t\t\t\tthis.form.showInPage = val.showInPage\r\n\t\t\t}\r\n\t\t},\r\n\t\tagentType(val) {\r\n\t\t\tif (val) {\r\n\t\t\t\tthis.form.agentType = val\r\n\t\t\t}\r\n\t\t},\r\n\t\tgoogleAuthCode(val) {\r\n\t\t\tif (val) {\r\n\t\t\t\tthis.form.googleAuthCode = val\r\n\t\t\t\tthis.$set(this.form)\r\n\t\t\t}\r\n\t\t},\r\n\t\tcurrencyId: {\r\n\t\t\thandler(val) {\r\n\t\t\t\tthis.form.currency = val\r\n\t\t\t}\r\n\t\t},\r\n\t\tbusinessDrawer(val) {\r\n\t\t\tthis.loadBetLimitList()\r\n\r\n\t\t\tthis.$api\r\n\t\t\t\t.getCurrencyComboBoxList({\r\n\t\t\t\t\tpageIndex: 1,\r\n\t\t\t\t\tpageSize: 100\r\n\t\t\t\t})\r\n\t\t\t\t.then((_) => {\r\n\t\t\t\t\tconst data = _.data\r\n\t\t\t\t\tthis.currency = data.record\r\n\t\t\t\t})\r\n\t\t\tthis.drawer = val\r\n\t\t},\r\n\t\t'form.verifyCodeType'(val) {\r\n\t\t\tif (val === 2) {\r\n\t\t\t\tthis.showGoogleCode = false\r\n\t\t\t} else {\r\n\t\t\t\tthis.showGoogleCode = true\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmounted() {},\r\n\tmethods: {\r\n\t\tloadBetLimitList() {\r\n\t\t\t// 自定义限红的type  因为自定义限红暂时隐藏，所以这里传type为 1\r\n\t\t\tconst type = 1\r\n\t\t\tthis.$api.memberBetLimitList({ type }).then((_) => {\r\n\t\t\t\tif (_.code === 200) {\r\n\t\t\t\t\tthis.betLimits = _.data || []\r\n\t\t\t\t\tif (this.betLimits && this.betLimits.length > 0) {\r\n\t\t\t\t\t\tthis.form.limitRed = this.betLimits[0].id\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\thandleClose() {\r\n\t\t\tthis.$emit('update:businessDrawer', false)\r\n\t\t\tthis.$refs.form.clearValidate()\r\n\t\t\tthis.reset()\r\n\t\t},\r\n\t\treset() {\r\n\t\t\tthis.step = 0\r\n\t\t\tthis.form = {\r\n\t\t\t\tgoogleAuthCode: '',\r\n\t\t\t\tagentName: '',\r\n\t\t\t\tagentCode: '',\r\n\t\t\t\tagentType: '',\r\n\t\t\t\tapiRate: '',\r\n\t\t\t\tcountPercentage: '',\r\n\t\t\t\twalletMd5key: '',\r\n\t\t\t\tshowInpage: '',\r\n\t\t\t\tpassword: '',\r\n\t\t\t\tpasswordAgain: '',\r\n\t\t\t\twalletModel: 1,\r\n\t\t\t\twalletType: 0,\r\n\t\t\t\tplatformAgent: 0,\r\n\t\t\t\twalletUrl: '',\r\n\t\t\t\tcurrency: this.$store.state.user.userInfo.currencyId + '' || '1',\r\n\t\t\t\tcooperations: [],\r\n\t\t\t\tdsStartTime: dayjs().format('YYYY-MM-DD'),\r\n\t\t\t\trateStartTime: dayjs().format('YYYY-MM-DD'),\r\n\t\t\t\tverifyCodeType: 1\r\n\t\t\t}\r\n\t\t\tthis.$emit('updateDialog')\r\n\t\t},\r\n\t\tclickLastStep() {\r\n\t\t\tthis.$refs.form.clearValidate()\r\n\t\t\tthis.step = this.step - 1\r\n\t\t},\r\n\t\tclickNextStep() {\r\n\t\t\tthis.$refs.form.validate((valid) => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tif (this.step === 1) {\r\n\t\t\t\t\t\tlet params = {\r\n\t\t\t\t\t\t\tgoogleAuthCode: this.form.googleAuthCode,\r\n\t\t\t\t\t\t\tagentLoginName: this.form.agentLoginName,\r\n\t\t\t\t\t\t\twalletMd5key: this.form.walletMd5key,\r\n\t\t\t\t\t\t\tagentCode: this.form.agentCode,\r\n\t\t\t\t\t\t\tplatformAgent: this.form.platformAgent,\r\n\t\t\t\t\t\t\tagentName: this.form.agentName,\r\n\t\t\t\t\t\t\tapiRate: this.form.apiRate && Number(this.form.apiRate),\r\n\t\t\t\t\t\t\tcountPercentage:\r\n\t\t\t\t\t\t\t\tthis.form.countPercentage && Number(this.form.countPercentage),\r\n\t\t\t\t\t\t\tcurrency: this.form.currency,\r\n\t\t\t\t\t\t\tmodel: this.form.cooperations.length > 1 ? 1 : this.form.cooperations[0],\r\n\t\t\t\t\t\t\twalletModel: this.form.walletModel,\r\n\t\t\t\t\t\t\twalletType: this.form.walletType,\r\n\t\t\t\t\t\t\twalletUrl: this.form.walletUrl,\r\n\t\t\t\t\t\t\tverifyCodeType: this.form.verifyCodeType,\r\n\t\t\t\t\t\t\tnewPlayerLimitRed: this.form.limitRed\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tlet api = ''\r\n\r\n\t\t\t\t\t\tif (this.createLevel === 'top') {\r\n\t\t\t\t\t\t\tapi = this.type === 1 ? 'createMerchant' : 'createAgent'\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tparams = {\r\n\t\t\t\t\t\t\t\t...params,\r\n\t\t\t\t\t\t\t\tparentId: this.agentId,\r\n\t\t\t\t\t\t\t\tagentType: this.form.agentType\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tapi =\r\n\t\t\t\t\t\t\t\tthis.type === 1 ? 'createMerchantOverLevel' : 'createAgentOverLevel'\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.$api[api](params).then((res) => {\r\n\t\t\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\t\t\tthis.$emit('update:businessDrawer', false)\r\n\t\t\t\t\t\t\t\tmessage({\r\n\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t\tmessage: this.$t('merchant_merchantinfo_components_newbusiness_1067')\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthis.$emit('closeEdit', false)\r\n\t\t\t\t\t\t\t\tthis.reset()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.step = this.step + 1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\trenderStepBtnText() {\r\n\t\t\tif (this.step === 1) {\r\n\t\t\t\treturn this.$t('merchant_merchantinfo_components_newbusiness_1068')\r\n\t\t\t}\r\n\t\t\treturn this.$t('merchant_merchantinfo_components_newbusiness_1069')\r\n\t\t},\r\n\t\t// 根据合作模式的不同，展示不同, type 1为 显示合作模式 2位显示结算账户\r\n\t\trenderCooperationText(type) {\r\n\t\t\tif (\r\n\t\t\t\tthis.form.cooperations.includes(2) &&\r\n\t\t\t\tthis.form.cooperations.includes(3)\r\n\t\t\t) {\r\n\t\t\t\treturn type === 1\r\n\t\t\t\t\t? this.$t('merchant_merchantinfo_components_newbusiness_1070')\r\n\t\t\t\t\t: this.$t('merchant_merchantinfo_components_newbusiness_1071')\r\n\t\t\t} else if (this.form.cooperations.includes(2)) {\r\n\t\t\t\treturn type === 1\r\n\t\t\t\t\t? this.$t('merchant_merchantinfo_components_newbusiness_1015')\r\n\t\t\t\t\t: this.$t('merchant_merchantinfo_components_newbusiness_1072')\r\n\t\t\t} else if (this.form.cooperations.includes(3)) {\r\n\t\t\t\treturn type === 1\r\n\t\t\t\t\t? this.$t('merchant_merchantinfo_components_newbusiness_1016')\r\n\t\t\t\t\t: this.$t('merchant_merchantinfo_components_newbusiness_1073')\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 获取货币类型\r\n\t\tgetCurrency() {\r\n\t\t\tconst index = this.currency.findIndex(\r\n\t\t\t\t(val) => Number(val.id) === Number(this.form.currency)\r\n\t\t\t)\r\n\t\t\tif (index > -1) {\r\n\t\t\t\treturn this.currency[index].code\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 通过agentCode判断当前用户是否顶级 AAAAA为顶级\r\n\t\tjudgeAgentCode() {\r\n\t\t\t// 一级/二级/(0,1)线路商时可选择币种，其他线路商的下级线路商/商户继承上级线路商币种\r\n\t\t\tconst num = Number(this.agentsLevel)\r\n\r\n\t\t\tif ([1, 2].includes(num)) {\r\n\t\t\t\treturn false\r\n\t\t\t} else {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetDefailtLimit() {\r\n\t\t\tconst find = this.betLimits.find((i) => i.id === this.form.limitRed)\r\n\t\t\treturn find ? find.limitRedName : '-'\r\n\t\t}\r\n\t}\r\n}\r\n",null]}