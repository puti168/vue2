{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\operationManage\\activitySettings\\components\\EditAll.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\operationManage\\activitySettings\\components\\EditAll.vue","mtime":1617695097431},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport Modal from '@/components/Modal'\r\nimport SelectAgentTree from '@/components/SelectAgentTree'\r\nexport default {\r\n\tname: 'EditTrial',\r\n\tcomponents: {\r\n\t\tSelectAgentTree,\r\n\t\tModal\r\n\t},\r\n\tprops: {\r\n\t\ttype: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: ''\r\n\t\t},\r\n\t\tvalue: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\teditTrialInfoSuccess: {\r\n\t\t\ttype: Function,\r\n\t\t\tdefault: function() {}\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\taccountForm: {\r\n\t\t\t\tshareRate: 0\r\n\t\t\t},\r\n\t\t\tdialogVisible: false,\r\n\t\t\tcanEdit: true,\r\n\t\t\tstatusType: 1,\r\n\t\t\tstatus: 0,\r\n\t\t\tshareType: 1,\r\n\t\t\tagentId: ''\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\taccountFormRules() {\r\n\t\t\treturn {\r\n\t\t\t\tshareRate: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\ttrigger: 'blur',\r\n\t\t\t\t\t\tmessage: this.$t('new_67')\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t},\r\n\t\trateList() {\r\n\t\t\treturn [\r\n\t\t\t\t// 荷官分成比例设置\r\n\t\t\t\t{\r\n\t\t\t\t\tdata: 1,\r\n\t\t\t\t\tlabel: this.$t('new_37')\r\n\t\t\t\t},\r\n\t\t\t\t// 桌边主播分成比例设置\r\n\t\t\t\t{\r\n\t\t\t\t\tdata: 2,\r\n\t\t\t\t\tlabel: this.$t('new_36')\r\n\t\t\t\t},\r\n\t\t\t\t// 美女主播分成比例设置\r\n\t\t\t\t{\r\n\t\t\t\t\tdata: 3,\r\n\t\t\t\t\tlabel: this.$t('new_36666')\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t},\r\n\t\tsList() {\r\n\t\t\treturn [\r\n\t\t\t\t// 聊天功能开关\r\n\t\t\t\t{\r\n\t\t\t\t\tdata: 1,\r\n\t\t\t\t\tpermission: 18108,\r\n\t\t\t\t\tlabel: this.$t('new_26'),\r\n\t\t\t\t\tfree: 'chatFreeStatus'\r\n\t\t\t\t},\r\n\t\t\t\t// 平台赛开关\r\n\t\t\t\t{\r\n\t\t\t\t\tdata: 2,\r\n\t\t\t\t\tpermission: 18117,\r\n\t\t\t\t\tlabel: this.$t('new_27')\r\n\t\t\t\t},\r\n\t\t\t\t// 商户赛开关\r\n\t\t\t\t{\r\n\t\t\t\t\tdata: 3,\r\n\t\t\t\t\tpermission: 18110,\r\n\t\t\t\t\tlabel: this.$t('new_28')\r\n\t\t\t\t},\r\n\t\t\t\t// 荷官打赏开关\r\n\t\t\t\t{\r\n\t\t\t\t\tdata: 4,\r\n\t\t\t\t\tpermission: 18111,\r\n\t\t\t\t\tlabel: this.$t('new_29')\r\n\t\t\t\t},\r\n\t\t\t\t// 红包雨开关\r\n\t\t\t\t{\r\n\t\t\t\t\tdata: 5,\r\n\t\t\t\t\tpermission: 18112,\r\n\t\t\t\t\tlabel: this.$t('new_30')\r\n\t\t\t\t},\r\n\t\t\t\t// 美女主播开关\r\n\t\t\t\t{\r\n\t\t\t\t\tdata: 6,\r\n\t\t\t\t\tpermission: 18113,\r\n\t\t\t\t\tlabel: this.$t('new_31')\r\n\t\t\t\t},\r\n\t\t\t\t// 主播厅送礼开关\r\n\t\t\t\t{\r\n\t\t\t\t\tdata: 7,\r\n\t\t\t\t\tpermission: 18114,\r\n\t\t\t\t\tlabel: this.$t('new_32')\r\n\t\t\t\t},\r\n\t\t\t\t// 桌边主播开关\r\n\t\t\t\t{\r\n\t\t\t\t\tdata: 8,\r\n\t\t\t\t\tpermission: 18146,\r\n\t\t\t\t\tlabel: this.$t('new_322')\r\n\t\t\t\t},\r\n\t\t\t\t// 聊天功能开关（自由聊天）\r\n\t\t\t\t{\r\n\t\t\t\t\tdata: 51,\r\n\t\t\t\t\tpermission: 18108,\r\n\t\t\t\t\tlabel: this.$t('a_11')\r\n\t\t\t\t},\r\n\t\t\t\t// 主播厅聊天开关（自由聊天）\r\n\t\t\t\t{\r\n\t\t\t\t\tdata: 50,\r\n\t\t\t\t\tpermission: 18148,\r\n\t\t\t\t\tlabel: this.$t('a_12')\r\n\t\t\t\t},\r\n\t\t\t\t// 主播厅聊天开关\r\n\t\t\t\t{\r\n\t\t\t\t\tdata: 9,\r\n\t\t\t\t\tpermission: 18148,\r\n\t\t\t\t\tlabel: this.$t('agent_08'),\r\n\t\t\t\t\tfree: 'anchorTableFreeChatStatus'\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t},\r\n\t\tmodalTitle() {\r\n\t\t\tlet text\r\n\t\t\tswitch (this.type) {\r\n\t\t\t\tcase 'rate':\r\n\t\t\t\t\ttext = this.$t('a_02')\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 'status':\r\n\t\t\t\t\ttext = this.$t('a_01')\r\n\t\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t\treturn text\r\n\t\t}\r\n\t},\r\n\twatch: {},\r\n\tmethods: {\r\n\t\thandleClose() {\r\n\t\t\tthis.accountForm.shareRate = 0\r\n\t\t\tthis.$refs.accountForm.clearValidate()\r\n\t\t\tthis.$emit('input', false)\r\n\t\t},\r\n\t\tsetLimit(type) {\r\n\t\t\tthis.status = type\r\n\t\t\tthis.dialogVisible = true\r\n\t\t},\r\n\t\thandleSure() {\r\n\t\t\tif (!/^([1-9]?\\d|100)$/.test(Number(this.accountForm.shareRate))) {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: this.$t('new_67'),\r\n\t\t\t\t\ttype: 'error'\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tthis.$refs.accountForm.validate((valid) => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tif (!this.canEdit) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.canEdit = false\r\n\t\t\t\t\tlet form = {}\r\n\t\t\t\t\tif (this.type === 'status') {\r\n\t\t\t\t\t\tif (this.statusType === 51 || this.statusType === 50) {\r\n\t\t\t\t\t\t\tform = {\r\n\t\t\t\t\t\t\t\tchildStatusType: this.statusType === 51 ? 1 : 2,\r\n\t\t\t\t\t\t\t\tchildStatus: this.status,\r\n\t\t\t\t\t\t\t\tagentId: this.agentId\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tform = {\r\n\t\t\t\t\t\t\t\tstatusType: this.statusType,\r\n\t\t\t\t\t\t\t\tstatus: this.status,\r\n\t\t\t\t\t\t\t\tagentId: this.agentId\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tform = {\r\n\t\t\t\t\t\t\tshareType: this.shareType,\r\n\t\t\t\t\t\t\tagentId: this.agentId\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tform.shareRate = (Number(this.accountForm.shareRate) / 100).toFixed(2)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst loading = this.$loading({\r\n\t\t\t\t\t\tlock: true,\r\n\t\t\t\t\t\ttext: 'Loading',\r\n\t\t\t\t\t\tspinner: 'el-icon-loading',\r\n\t\t\t\t\t\tbackground: 'rgba(0, 0, 0, 0.7)'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.$api\r\n\t\t\t\t\t\t.batchUpdateAgentSetting(form)\r\n\t\t\t\t\t\t.then((_) => {\r\n\t\t\t\t\t\t\tif (_.code === 200) {\r\n\t\t\t\t\t\t\t\tthis.$emit('input', false)\r\n\t\t\t\t\t\t\t\tthis.$emit('closeEdit')\r\n\t\t\t\t\t\t\t\tthis.dialogVisible = false\r\n\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\tmessage: this.$t(\r\n\t\t\t\t\t\t\t\t\t\tthis.$t('merchant_merchantinfo_components_edittrial_987')\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tloading.close()\r\n\t\t\t\t\t\t\tthis.canEdit = true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\t\tloading.close()\r\n\t\t\t\t\t\t\tthis.canEdit = true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n",null]}