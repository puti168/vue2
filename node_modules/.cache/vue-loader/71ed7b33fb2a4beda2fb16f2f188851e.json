{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\systemmanagement\\businessadress\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\systemmanagement\\businessadress\\index.vue","mtime":1617695097438},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { mapGetters } from 'vuex'\r\nimport list from '@/mixins/list'\r\nimport { IsURL } from '@/utils'\r\nimport { routerNames } from '@/utils/consts'\r\nimport SelectAgentTree from '@/components/SelectAgentTree'\r\nimport { message } from '@/utils/message'\r\nimport Cookies from 'js-cookie'\r\n\r\nexport default {\r\n\tname: routerNames.systemUrl,\r\n\tcomponents: { SelectAgentTree },\r\n\tmixins: [list],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\thadSearch: false,\r\n\t\t\tloading: false,\r\n\t\t\turlDialogVisible: false,\r\n\t\t\trecordDialogVisible: false,\r\n\t\t\tcurrentPage: 1,\r\n\t\t\tform: {\r\n\t\t\t\tagentId: '',\r\n\t\t\t\tstatus: -1,\r\n\t\t\t\ttype: -1\r\n\t\t\t},\r\n\t\t\turlDialogForm: {\r\n\t\t\t\tagentId: '',\r\n\t\t\t\ttype: 1,\r\n\t\t\t\turl: ''\r\n\t\t\t},\r\n\t\t\tlist: []\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters(['name']),\r\n\t\t...mapGetters(['buttonPermissions']),\r\n\t\t...mapGetters(['globalDics']),\r\n\t\turltype() {\r\n\t\t\tconst types = this.globalDics.urltype || []\r\n\t\t\treturn types.map((item) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tvalue: item.value,\r\n\t\t\t\t\tlabel: item.text,\r\n\t\t\t\t\tzh: item.text,\r\n\t\t\t\t\ten: item.englishText\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\turlDialogFormRules() {\r\n\t\t\tconst validUrl = (rule, value, callback) => {\r\n\t\t\t\tif (value.length > 255) {\r\n\t\t\t\t\tcallback(new Error(this.$t('systemmanagement_businessadress_index_1327')))\r\n\t\t\t\t} else if (IsURL(value)) {\r\n\t\t\t\t\tcallback()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback(new Error(this.$t('systemmanagement_businessadress_index_1328')))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tagentName: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: this.$t('systemmanagement.systemmanagement_67'),\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\ttype: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: this.$t('systemmanagement.systemmanagement_28'),\r\n\t\t\t\t\t\ttrigger: 'change'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\turl: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tmessage: this.$t('systemmanagement_businessadress_index_1322'),\r\n\t\t\t\t\t\ttrigger: 'blur',\r\n\t\t\t\t\t\trequired: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{ validator: validUrl, trigger: 'blur' }\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\thandleSearch() {\r\n\t\t\tthis.hadSearch = true\r\n\t\t\tthis.pageIndex = 1\r\n\t\t\tthis.loadData()\r\n\t\t},\r\n\t\thandleReset() {\r\n\t\t\tthis.hadSearch = false\r\n\t\t\tthis.form = {\r\n\t\t\t\ttype: -1,\r\n\t\t\t\tstatus: -1,\r\n\t\t\t\tagentId: ''\r\n\t\t\t}\r\n\t\t\tthis.initList()\r\n\t\t},\r\n\t\topen(url) {\r\n\t\t\twindow.open(url)\r\n\t\t},\r\n\t\tloadData() {\r\n\t\t\tthis.loading = true\r\n\t\t\tconst initData = {\r\n\t\t\t\tpageSize: this.pageSize,\r\n\t\t\t\tpageIndex: this.pageIndex\r\n\t\t\t}\r\n\t\t\tconst requestData = this.hadSearch\r\n\t\t\t\t? {\r\n\t\t\t\t\t\tagentId: this.form.agentId,\r\n\t\t\t\t\t\ttype: this.form.type,\r\n\t\t\t\t\t\tstatus: this.form.status\r\n\t\t\t\t  }\r\n\t\t\t\t: {}\r\n\t\t\tconst form = {\r\n\t\t\t\t...initData,\r\n\t\t\t\t...requestData\r\n\t\t\t}\r\n\t\t\tthis.$api\r\n\t\t\t\t.systemGetAgentConfig(form)\r\n\t\t\t\t.then((_) => {\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\tconst data = _.data\r\n\t\t\t\t\tthis.list = data.record\r\n\t\t\t\t\tthis.total = data.totalRecord\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t})\r\n\t\t},\r\n\t\tfilterUrlType(c) {\r\n\t\t\tconst arr = this.urltype || []\r\n\t\t\tconst find = arr.find((item) => Number(item.value) === Number(c))\r\n\t\t\tif (Cookies.get('language') === 'zh') {\r\n\t\t\t\treturn (find && find.zh) || '-'\r\n\t\t\t}\r\n\t\t\tif (Cookies.get('language') === 'en') {\r\n\t\t\t\treturn (find && find.en) || '-'\r\n\t\t\t}\r\n\t\t\treturn '-'\r\n\t\t},\r\n\t\tcommitUrlDialog() {\r\n\t\t\tthis.$refs.urlDialogForm.validate((_) => {\r\n\t\t\t\tif (_) {\r\n\t\t\t\t\tconst loading = this.$loading({\r\n\t\t\t\t\t\tlock: true,\r\n\t\t\t\t\t\ttext: 'Loading',\r\n\t\t\t\t\t\tspinner: 'el-icon-loading',\r\n\t\t\t\t\t\tbackground: 'rgba(0, 0, 0, 0.7)'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif (this.urlDialogForm.id) {\r\n\t\t\t\t\t\tthis.$api\r\n\t\t\t\t\t\t\t.systemEditAgentConfig({\r\n\t\t\t\t\t\t\t\t...this.urlDialogForm\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then((_) => {\r\n\t\t\t\t\t\t\t\tthis.urlDialogVisible = false\r\n\t\t\t\t\t\t\t\tif (_.code === 200) {\r\n\t\t\t\t\t\t\t\t\tmessage({\r\n\t\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t\t\tmessage: this.$t('systemmanagement_businessadress_index_1329', [\r\n\t\t\t\t\t\t\t\t\t\t\tthis.filterUrlType(this.urlDialogForm.type)\r\n\t\t\t\t\t\t\t\t\t\t])\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\tthis.loadData()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tloading.close()\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\t\t\tloading.close()\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$api\r\n\t\t\t\t\t\t\t.systemAddUrl(this.urlDialogForm)\r\n\t\t\t\t\t\t\t.then((_) => {\r\n\t\t\t\t\t\t\t\tif (_.code === 200) {\r\n\t\t\t\t\t\t\t\t\tthis.urlDialogVisible = false\r\n\t\t\t\t\t\t\t\t\tmessage({\r\n\t\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t\t\tmessage: this.$t('systemmanagement_businessadress_index_1330', [\r\n\t\t\t\t\t\t\t\t\t\t\tthis.filterUrlType(this.urlDialogForm.type)\r\n\t\t\t\t\t\t\t\t\t\t])\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\tthis.loadData()\r\n\t\t\t\t\t\t\t\t\tloading.close()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\t\t\tloading.close()\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\thandleCurrentChange(val) {\r\n\t\t\tconsole.log(this.$t('systemmanagement.systemmanagement_16', [val]))\r\n\t\t\tthis.loadData()\r\n\t\t},\r\n\t\tonHandleCancel() {\r\n\t\t\tthis.urlDialogVisible = false\r\n\t\t\tthis.$refs.urlDialogForm.clearValidate()\r\n\t\t},\r\n\t\thandleNewAddress() {\r\n\t\t\tthis.urlDialogForm = {\r\n\t\t\t\ttype: 1\r\n\t\t\t}\r\n\t\t\tthis.urlDialogVisible = true\r\n\t\t},\r\n\t\teditRow(row) {\r\n\t\t\tthis.urlDialogVisible = true\r\n\t\t\tthis.urlDialogForm = { ...row }\r\n\t\t},\r\n\t\tswitchChange(val, row) {\r\n\t\t\tconst params = {\r\n\t\t\t\tagentName: row.agentName,\r\n\t\t\t\tid: row.id,\r\n\t\t\t\tstatus: val ? '1' : '0'\r\n\t\t\t}\r\n\t\t\tthis.$api.systemUpdateAgentUrlStatus(params).then((res) => {\r\n\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\tconst index = this.list.findIndex((val) => val.id === row.id)\r\n\t\t\t\t\tthis.list[index].status = params.status\r\n\t\t\t\t\tconst statusText =\r\n\t\t\t\t\t\tparams.status === '1'\r\n\t\t\t\t\t\t\t? this.$t('systemmanagement_businessadress_index_1307')\r\n\t\t\t\t\t\t\t: this.$t('systemmanagement_businessadress_index_1308')\r\n\t\t\t\t\treturn message({\r\n\t\t\t\t\t\tmessage: this.$t('systemmanagement_businessadress_index_1331', [\r\n\t\t\t\t\t\t\trow.urlName,\r\n\t\t\t\t\t\t\tstatusText\r\n\t\t\t\t\t\t]),\r\n\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n",null]}