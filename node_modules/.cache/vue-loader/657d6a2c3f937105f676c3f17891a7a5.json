{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\operationManage\\beautyGirlChange\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\operationManage\\beautyGirlChange\\index.vue","mtime":1616384580124},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport list from '@/mixins/list'\r\nimport { mapGetters } from 'vuex'\r\nimport dayjs from 'dayjs'\r\nimport { routerNames } from '@/utils/consts'\r\nimport router from '@/router'\r\nimport downloadSure from '@/utils/common/downloadSure'\r\nimport Cookies from 'js-cookie'\r\n\r\nexport default {\r\n\tname: routerNames.membersaccounttransaction,\r\n\tmixins: [list],\r\n\tdata() {\r\n\t\tconst end = dayjs().endOf('day')\r\n\t\tconst start = dayjs().startOf('day')\r\n\r\n\t\treturn {\r\n\t\t\thadSearch: false,\r\n\t\t\tloading: false,\r\n\t\t\tcheckAll: true,\r\n\t\t\tisIndeterminate: false,\r\n\t\t\tform: {\r\n\t\t\t\treasonKey: '',\r\n\t\t\t\tplayerLoginName: '',\r\n\t\t\t\tnickName: '',\r\n\t\t\t\tagentName: '',\r\n\t\t\t\ttime: [+start, +end],\r\n\t\t\t\ttranType:\r\n\t\t\t\t\tthis.$store.state.user.globalDics &&\r\n\t\t\t\t\tthis.$store.state.user.globalDics.trantype.map((val) => val.value),\r\n\t\t\t\tagentId: '',\r\n\t\t\t\tminAmount: '',\r\n\t\t\t\tmaxAmount: ''\r\n\t\t\t},\r\n\t\t\tamountData: {},\r\n\t\t\tprevIndex: 1,\r\n\t\t\tsummary: '',\r\n\t\t\thasNode: false\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters(['globalDics']),\r\n\t\tpickerOptions() {\r\n\t\t\tconst _this = this\r\n\t\t\treturn {\r\n\t\t\t\tdisabledDate(time) {\r\n\t\t\t\t\tconst now = dayjs()\r\n\t\t\t\t\t\t.endOf('day')\r\n\t\t\t\t\t\t.valueOf()\r\n\t\t\t\t\treturn time.getTime() > now\r\n\t\t\t\t},\r\n\t\t\t\tonPick({ maxDate, minDate }) {\r\n\t\t\t\t\tif (!maxDate) {\r\n\t\t\t\t\t\t_this.minDate = minDate\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tshortcuts: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: this.$t('members_accounttransaction_index_501'),\r\n\t\t\t\t\t\tonClick(picker) {\r\n\t\t\t\t\t\t\tconst end = dayjs().endOf('day')\r\n\t\t\t\t\t\t\tconst start = dayjs().startOf('day')\r\n\t\t\t\t\t\t\tpicker.$emit('pick', [+start, +end])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: this.$t('members_accounttransaction_index_502'),\r\n\t\t\t\t\t\tonClick(picker) {\r\n\t\t\t\t\t\t\tconst end = dayjs()\r\n\t\t\t\t\t\t\t\t.endOf('day')\r\n\t\t\t\t\t\t\t\t.subtract(1, 'd')\r\n\t\t\t\t\t\t\tconst start = dayjs()\r\n\t\t\t\t\t\t\t\t.startOf('day')\r\n\t\t\t\t\t\t\t\t.subtract(1, 'd')\r\n\t\t\t\t\t\t\tpicker.$emit('pick', [+start, +end])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: this.$t('members_accounttransaction_index_503'),\r\n\t\t\t\t\t\tonClick(picker) {\r\n\t\t\t\t\t\t\tlet start, end\r\n\t\t\t\t\t\t\tconst weekNum = dayjs().day()\r\n\t\t\t\t\t\t\tif (weekNum === 0) {\r\n\t\t\t\t\t\t\t\tend = dayjs().endOf('day')\r\n\t\t\t\t\t\t\t\tstart = dayjs()\r\n\t\t\t\t\t\t\t\t\t.subtract(1, 'd')\r\n\t\t\t\t\t\t\t\t\t.startOf('week')\r\n\t\t\t\t\t\t\t\t\t.startOf('day')\r\n\t\t\t\t\t\t\t\t\t.add(1, 'd')\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tend = dayjs().endOf('day')\r\n\t\t\t\t\t\t\t\tstart = dayjs()\r\n\t\t\t\t\t\t\t\t\t.startOf('day')\r\n\t\t\t\t\t\t\t\t\t.startOf('week')\r\n\t\t\t\t\t\t\t\t\t.add(1, 'd')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tpicker.$emit('pick', [+start, +end])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: this.$t('members_accounttransaction_index_504'),\r\n\t\t\t\t\t\tonClick(picker) {\r\n\t\t\t\t\t\t\tconst end = dayjs().endOf('day')\r\n\t\t\t\t\t\t\tconst start = dayjs().startOf('month')\r\n\t\t\t\t\t\t\tpicker.$emit('pick', [+start, +end])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t},\r\n\t\ttrantype() {\r\n\t\t\tconst types = this.globalDics.trantype || []\r\n\t\t\treturn types.map((item) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tvalue: item.value,\r\n\t\t\t\t\tlabel: item.text,\r\n\t\t\t\t\tzh: item.text,\r\n\t\t\t\t\ten: item.englishText\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\tactivated() {\r\n\t\twindow.clearInterval(window.bbbtimer)\r\n\t\twindow.bbbtimer = null\r\n\t\tif (!window.aaatimer) {\r\n\t\t\twindow.aaatimer = window.setInterval(() => {\r\n\t\t\t\tthis.summary && this.addTotalAmount()\r\n\t\t\t}, 800)\r\n\t\t}\r\n\t},\r\n\tdestroyed() {\r\n\t\twindow.clearInterval(window.aaatimer)\r\n\t\twindow.aaatimer = null\r\n\t},\r\n\tbeforeRouteLeave(to, from, next) {\r\n\t\twindow.clearInterval(window.aaatimer)\r\n\t\twindow.aaatimer = null\r\n\t\tnext()\r\n\t},\r\n\tmethods: {\r\n\t\t// 失去焦点的时候重置\r\n\t\tonTimeBlur() {\r\n\t\t\tthis.minDate = null\r\n\t\t},\r\n\t\tloadData() {\r\n\t\t\tthis.list = [\r\n\t\t\t\t{\r\n\t\t\t\t\tplayerLoginName: 'ZB1234',\r\n\t\t\t\t\tnickName: 'XXX',\r\n\t\t\t\t\ttranType: this.$t('beautygirlchange_index_7'),\r\n\t\t\t\t\ttransactionNo: 'YBZR201910250000000001',\r\n\t\t\t\t\tgirlAccount: 'ZB1234',\r\n\t\t\t\t\tgirlName: 'ZB1234',\r\n\t\t\t\t\tpreBalance: '23333333',\r\n\t\t\t\t\tamount: '122222',\r\n\t\t\t\t\tafterBalance: '666666',\r\n\t\t\t\t\ttransactionTime: '2019-10-25 10:59:21',\r\n\t\t\t\t\tremark: this.$t('beautygirlchange_index_8'),\r\n\t\t\t\t\troundNo: 'G101119A2401B',\r\n\t\t\t\t\tresult: this.$t('beautygirlchange_index_9')\r\n\t\t\t\t}\r\n\t\t\t]\r\n\r\n\t\t\treturn false\r\n\r\n\t\t\t// this.loading = true\r\n\r\n\t\t\t// if (this.$route.query && JSON.stringify(this.$route.query) !== '{}') {\r\n\t\t\t// \tconst query = this.$route.query || {}\r\n\t\t\t// \tthis.form.playerLoginName = query.playerLoginName\r\n\r\n\t\t\t// \trouter.push(this.$route.path)\r\n\t\t\t// }\r\n\t\t\t// const initData = {\r\n\t\t\t// \tpageSize: this.pageSize,\r\n\t\t\t// \tpageIndex: this.pageIndex,\r\n\t\t\t// \tstartTransactionTime: this.form.time[0],\r\n\t\t\t// \tendTransactionTime: this.form.time[1],\r\n\t\t\t// \tplayerLoginName: this.form.playerLoginName,\r\n\t\t\t// \ttranType: this.form.tranType.join(),\r\n\t\t\t// \treasonKey: this.form.reasonKey,\r\n\t\t\t// \tminAmount: this.form.minAmount,\r\n\t\t\t// \tmaxAmount: this.form.maxAmount,\r\n\t\t\t// }\r\n\t\t\t// const requestData = this.hadSearch\r\n\t\t\t// \t? {\r\n\t\t\t// \t\t\tnickName: this.form.nickName,\r\n\t\t\t// \t\t\tsearchAgentId: this.form.agentId,\r\n\t\t\t// \t  }\r\n\t\t\t// \t: {}\r\n\t\t\t// const form = {\r\n\t\t\t// \t...initData,\r\n\t\t\t// \t...requestData,\r\n\t\t\t// }\r\n\t\t\t// this.$api\r\n\t\t\t// \t.memberQueryAccountRecord(form)\r\n\t\t\t// \t.then((_) => {\r\n\t\t\t// \t\tthis.loading = false\r\n\t\t\t// \t\tconst data = _.data\r\n\t\t\t// \t\tthis.list = [\r\n\t\t\t// \t\t\t{\r\n\t\t\t// \t\t\t\ttransactionNo: 'YBZR201910250000000001',\r\n\t\t\t// \t\t\t\tgirlAccount: 'ZB1234',\r\n\t\t\t// \t\t\t\tgirlName: 'ZB1234',\r\n\t\t\t// \t\t\t\ttranType: '派彩',\r\n\t\t\t// \t\t\t\tpreBalance: '23333333',\r\n\t\t\t// \t\t\t\tamount: '122222',\r\n\t\t\t// \t\t\t\tafterBalance: '666666',\r\n\t\t\t// \t\t\t\ttransactionTime: '2019-10-25 10:59:21',\r\n\t\t\t// \t\t\t\tremark: '经典百家乐YYY_局号GYYY20107004',\r\n\t\t\t// \t\t\t},\r\n\t\t\t// \t\t]\r\n\t\t\t// \t\tthis.total = data.totalRecord\r\n\t\t\t// \t\tthis.summary = data.summary\r\n\r\n\t\t\t// \t\tthis.$nextTick(() => {\r\n\t\t\t// \t\t\tthis.addTotalAmount()\r\n\t\t\t// \t\t})\r\n\t\t\t// \t})\r\n\t\t\t// \t.catch(() => {\r\n\t\t\t// \t\tthis.pageIndex = this.prevIndex\r\n\t\t\t// \t\tthis.list = []\r\n\t\t\t// \t\tthis.total = 0\r\n\t\t\t// \t\tthis.loading = false\r\n\t\t\t// \t})\r\n\t\t},\r\n\t\taddTotalAmount() {\r\n\t\t\tconst totalSpan = document.querySelector('.total-span')\r\n\t\t\tconst pageNode = document.querySelector('.el-pagination')\r\n\t\t\tconst prevNode = document.querySelector('.el-pagination__total')\r\n\t\t\tconst newNode = document.createElement('span')\r\n\t\t\tif (!totalSpan) {\r\n\t\t\t\tnewNode.innerText = this.$t('members_accounttransaction_index_506', [\r\n\t\t\t\t\tthis.summary\r\n\t\t\t\t])\r\n\t\t\t\tnewNode.style.margin = '0 15px'\r\n\t\t\t\tnewNode.style.fontWeight = '400'\r\n\t\t\t\tnewNode.className = 'total-span'\r\n\t\t\t\tpageNode && pageNode.insertBefore(newNode, prevNode)\r\n\t\t\t} else {\r\n\t\t\t\tconst str = this.$t('members_accounttransaction_index_506', [this.summary])\r\n\t\t\t\ttotalSpan.innerText = str\r\n\t\t\t}\r\n\t\t},\r\n\t\thandleCurrentChange(val) {\r\n\t\t\tthis.prevIndex = this.pageIndex\r\n\t\t\tthis.pageIndex = val\r\n\t\t\tthis.loadData()\r\n\t\t},\r\n\t\thandleCheckedTypesChange(value) {\r\n\t\t\tconst checkedCount = value.length\r\n\t\t\tthis.checkAll = checkedCount === this.trantype.length\r\n\t\t},\r\n\t\thandleCheckAllChange(val) {\r\n\t\t\tconst checkedArr = val ? [...this.trantype.map((item) => item.value)] : []\r\n\t\t\tthis.form.tranType = checkedArr\r\n\t\t\tthis.isIndeterminate = false\r\n\t\t},\r\n\t\tfilterTranType(c) {\r\n\t\t\tconst arr = this.trantype || []\r\n\t\t\tconst find = arr.find((item) => Number(item.value) === Number(c))\r\n\t\t\tif (Cookies.get('language') === 'zh') {\r\n\t\t\t\treturn (find && find.zh) || '-'\r\n\t\t\t}\r\n\t\t\tif (Cookies.get('language') === 'en') {\r\n\t\t\t\treturn (find && find.en) || '-'\r\n\t\t\t}\r\n\t\t\treturn '-'\r\n\t\t},\r\n\t\thandleReset() {\r\n\t\t\tif (this.$route.query && JSON.stringify(this.$route.query) !== '{}') {\r\n\t\t\t\trouter.push(this.$route.path, () => {\r\n\t\t\t\t\tthis.resetCommon()\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tthis.resetCommon()\r\n\t\t\t}\r\n\t\t},\r\n\t\tresetCommon() {\r\n\t\t\tconst end = dayjs().endOf('day')\r\n\t\t\tconst start = dayjs().startOf('day')\r\n\r\n\t\t\tthis.isIndeterminate = false\r\n\t\t\tthis.checkAll = true\r\n\t\t\tthis.hadSearch = false\r\n\t\t\tthis.form = {\r\n\t\t\t\treasonKey: '',\r\n\t\t\t\tnickName: '',\r\n\t\t\t\tplayerLoginName: '',\r\n\t\t\t\tagentName: '',\r\n\t\t\t\ttime: [+start, +end],\r\n\t\t\t\tminAmount: '',\r\n\t\t\t\tmaxAmount: '',\r\n\t\t\t\ttranType:\r\n\t\t\t\t\tthis.$store.state.user.globalDics &&\r\n\t\t\t\t\tthis.$store.state.user.globalDics.trantype.map((val) => val.value)\r\n\t\t\t}\r\n\t\t\tthis.initList()\r\n\t\t},\r\n\t\thandleSearch() {\r\n\t\t\tthis.hadSearch = true\r\n\t\t\tthis.pageIndex = 1\r\n\t\t\tthis.loadData()\r\n\t\t},\r\n\t\texportCsv() {\r\n\t\t\tconst params = {\r\n\t\t\t\tstartTransactionTime: this.form.time[0],\r\n\t\t\t\tendTransactionTime: this.form.time[1],\r\n\t\t\t\tplayerLoginName: this.form.playerLoginName,\r\n\t\t\t\tnickName: this.form.nickName,\r\n\t\t\t\tsearchAgentId: this.form.agentId,\r\n\t\t\t\ttranType: this.form.tranType.join()\r\n\t\t\t}\r\n\t\t\tdownloadSure(\r\n\t\t\t\tthis.$api,\r\n\t\t\t\t'queryAccountRecordCSV',\r\n\t\t\t\tparams,\r\n\t\t\t\tthis.$t('members_accounttransaction_index_507')\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n}\r\n",null]}