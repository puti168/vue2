{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\home\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\home\\index.vue","mtime":1617695097412},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport 'echarts/lib/chart/line'\r\nimport 'echarts/lib/component/tooltip'\r\nimport SelectAgentTree from '@/components/SelectAgentTree'\r\nimport DashBoard from './components/DashBoard'\r\nimport DataTrend from './components/DataTrend'\r\nimport { formatCurrency } from '@/utils'\r\nimport { mapGetters } from 'vuex'\r\nimport dayjs from 'dayjs'\r\nlet timer\r\n\r\nexport default {\r\n\tname: 'Home',\r\n\tcomponents: { SelectAgentTree, DashBoard, DataTrend },\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tloading: false,\r\n\t\t\tform: {\r\n\t\t\t\tagentId: ''\r\n\t\t\t},\r\n\t\t\t// 0=>试玩 1=>真钱\r\n\t\t\trecordType: 1,\r\n\t\t\t// 营运看板上排\r\n\t\t\toperationBoardData: {},\r\n\t\t\t// 营运看板下排\r\n\t\t\toperationBoardData1: {},\r\n\t\t\t// 游戏热度分析\r\n\t\t\theatAnalyisData: {},\r\n\t\t\t// 盈利分析\r\n\t\t\tprofitAnalysisData: {},\r\n\t\t\tprovinceAnalysisData: [],\r\n\t\t\tsystemAnalysisData: []\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters(['agentId', 'userInfo'])\r\n\t},\r\n\tcreated() {\r\n\t\tthis.form.agentId = this.agentId\r\n\t\tlocalStorage.removeItem('firstLogin')\r\n\t\tthis.getPageData()\r\n\t\ttimer = setInterval(() => {\r\n\t\t\tthis.getPageData2()\r\n\t\t}, 5 * 1000 * 60)\r\n\t},\r\n\tdestroyed() {\r\n\t\tclearInterval(timer)\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tformatCurrency,\r\n\t\tgetPageData() {\r\n\t\t\tthis.operationBoard()\r\n\t\t\tthis.gameHeatAnalyis()\r\n\t\t\tthis.profitAnalysis()\r\n\t\t\tif (this.hasPermission(18152) && this.userInfo.currencyId === 1) {\r\n\t\t\t\tthis.Province()\r\n\t\t\t}\r\n\t\t\tif (this.hasPermission(18153) && this.userInfo.currencyId === 1) {\r\n\t\t\t\tthis.terminal()\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetPageData2() {\r\n\t\t\tthis.operationBoard()\r\n\t\t\tthis.gameHeatAnalyis()\r\n\t\t\tthis.profitAnalysis()\r\n\t\t},\r\n\t\t// 获取营运看板数据\r\n\t\toperationBoard() {\r\n\t\t\tconst agentId = this.form.agentId\r\n\t\t\tthis.$api\r\n\t\t\t\t.operationBoard({\r\n\t\t\t\t\tagentId\r\n\t\t\t\t})\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\tthis.operationBoardData = res.data\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\tthis.$api\r\n\t\t\t\t.operationBoard2({\r\n\t\t\t\t\tagentId\r\n\t\t\t\t})\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\tthis.operationBoardData1 = res.data\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t},\r\n\t\t// 游戏热度分析\r\n\t\tgameHeatAnalyis() {\r\n\t\t\tthis.$api\r\n\t\t\t\t.gameHeatAnalyis({\r\n\t\t\t\t\tagentId: this.form.agentId,\r\n\t\t\t\t\trecordType: this.recordType\r\n\t\t\t\t})\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\tthis.heatAnalyisData = res.data\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t},\r\n\t\t// 省份分析\r\n\t\tProvince(times) {\r\n\t\t\tlet end = ''\r\n\t\t\tlet start = ''\r\n\t\t\tif (times) {\r\n\t\t\t\tstart = times[0]\r\n\t\t\t\tend = times[1]\r\n\t\t\t} else {\r\n\t\t\t\tstart = dayjs()\r\n\t\t\t\t\t.startOf('day')\r\n\t\t\t\t\t.valueOf()\r\n\t\t\t\tend = dayjs()\r\n\t\t\t\t\t.endOf('day')\r\n\t\t\t\t\t.valueOf()\r\n\t\t\t}\r\n\t\t\tthis.$api\r\n\t\t\t\t.playerLoginIpCount({\r\n\t\t\t\t\tagentId: this.form.agentId,\r\n\t\t\t\t\tstartTime: start,\r\n\t\t\t\t\tendTime: end\r\n\t\t\t\t})\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\tthis.provinceAnalysisData = res.data\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t},\r\n\t\t// 操作系统分析\r\n\t\tterminal(times) {\r\n\t\t\tlet end = ''\r\n\t\t\tlet start = ''\r\n\t\t\tif (times) {\r\n\t\t\t\tstart = times[0]\r\n\t\t\t\tend = times[1]\r\n\t\t\t} else {\r\n\t\t\t\tstart = dayjs()\r\n\t\t\t\t\t.startOf('day')\r\n\t\t\t\t\t.valueOf()\r\n\t\t\t\tend = dayjs()\r\n\t\t\t\t\t.endOf('day')\r\n\t\t\t\t\t.valueOf()\r\n\t\t\t}\r\n\t\t\tthis.$api\r\n\t\t\t\t.playerSystemCount({\r\n\t\t\t\t\tagentId: this.form.agentId,\r\n\t\t\t\t\tstartTime: start,\r\n\t\t\t\t\tendTime: end\r\n\t\t\t\t})\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\tthis.systemAnalysisData = res.data\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t},\r\n\t\t// 盈利分析\r\n\t\tprofitAnalysis() {\r\n\t\t\tthis.$api\r\n\t\t\t\t.profitAnalysis({\r\n\t\t\t\t\tagentId: this.form.agentId\r\n\t\t\t\t})\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\tthis.profitAnalysisData = res.data\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t},\r\n\t\t// 游戏热度分析切换\r\n\t\tgameHeatChange(value) {\r\n\t\t\tthis.recordType = value\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.gameHeatAnalyis()\r\n\t\t\t})\r\n\t\t},\r\n\t\thandleSearch() {\r\n\t\t\tthis.getPageData()\r\n\t\t},\r\n\t\thandleReset() {\r\n\t\t\tthis.form = {\r\n\t\t\t\tagentId: ''\r\n\t\t\t}\r\n\t\t\tthis.$refs.dashBoards.reset()\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.getPageData()\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n",null]}