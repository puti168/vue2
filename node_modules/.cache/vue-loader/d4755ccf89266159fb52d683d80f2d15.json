{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\merchant\\accountInfo\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\merchant\\accountInfo\\index.vue","mtime":1615171048131},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport list from '@/mixins/list'\r\nimport tier from '@/mixins/tier'\r\nimport { mapGetters } from 'vuex'\r\nimport { routerNames } from '@/utils/consts'\r\nimport Recharge from './components/Recharge'\r\nimport TableComp from './components/TableComp'\r\nimport SelectAgentTree from '@/components/SelectAgentTree'\r\nimport router from '@/router'\r\n\r\nexport default {\r\n\tname: routerNames.accountInfo,\r\n\tcomponents: { Recharge, SelectAgentTree, TableComp },\r\n\tmixins: [list, tier],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\thadSearch: false,\r\n\t\t\tloading: false,\r\n\t\t\tform: {\r\n\t\t\t\tagentId: ''\r\n\t\t\t},\r\n\t\t\tamountData: {},\r\n\t\t\trechargeVisible: false,\r\n\t\t\trechargeData: {},\r\n\t\t\tcurrentIndex: -1,\r\n\t\t\tcurrentLevel: 1\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters(['globalDics']),\r\n\t\t...mapGetters(['userInfo']),\r\n\t\ttrantype() {\r\n\t\t\treturn this.globalDics.trantype\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tloadData() {\r\n\t\t\tthis.loading = true\r\n\t\t\tconst initData = {\r\n\t\t\t\tpageSize: this.pageSize,\r\n\t\t\t\tpageIndex: this.pageIndex,\r\n\t\t\t\ttype: 1\r\n\t\t\t}\r\n\t\t\tconst requestData = this.hadSearch\r\n\t\t\t\t? {\r\n\t\t\t\t\t\tsearchAgentId: this.form.agentId,\r\n\t\t\t\t\t\taccountType: this.form.accountType,\r\n\t\t\t\t\t\tagentType: this.form.agentType\r\n\t\t\t\t  }\r\n\t\t\t\t: {}\r\n\t\t\tconst form = {\r\n\t\t\t\t...initData,\r\n\t\t\t\t...requestData\r\n\t\t\t}\r\n\t\t\tthis.$api\r\n\t\t\t\t.fundAccount(form)\r\n\t\t\t\t.then((_) => {\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\tconst data = _.data\r\n\t\t\t\t\tthis.total = data.totalRecord\r\n\t\t\t\t\tconst list = data.record\r\n\t\t\t\t\tthis.tableLists = [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\topened: false,\r\n\t\t\t\t\t\t\ticonLoading: false,\r\n\t\t\t\t\t\t\tlevel: 1,\r\n\t\t\t\t\t\t\tdata: list\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t})\r\n\t\t},\r\n\t\t/**\r\n\t\t * actType 1为增加 2为修改\r\n\t\t */\r\n\t\tmodifyData(level, params, tableIndex, actType) {\r\n\t\t\tconst extraParams = {\r\n\t\t\t\taccountType: params.accountType,\r\n\t\t\t\tsearchAgentId: params.agentId\r\n\t\t\t}\r\n\t\t\tthis.mixinModifyData(\r\n\t\t\t\tlevel,\r\n\t\t\t\tparams,\r\n\t\t\t\ttableIndex,\r\n\t\t\t\tactType,\r\n\t\t\t\t'fundAccount',\r\n\t\t\t\textraParams\r\n\t\t\t)\r\n\t\t},\r\n\t\thandleSearch() {\r\n\t\t\tconst extraParams = {}\r\n\t\t\tthis.mixinHandleSearch('fundAccount', extraParams)\r\n\t\t},\r\n\t\thandleReset() {\r\n\t\t\tthis.hadSearch = false\r\n\t\t\tthis.form = {\r\n\t\t\t\tagentId: ''\r\n\t\t\t}\r\n\t\t\tthis.levels = []\r\n\t\t\tthis.initList()\r\n\t\t},\r\n\t\taccountRecharge(index, row, level) {\r\n\t\t\tthis.rechargeData = { ...row }\r\n\t\t\tthis.currentIndex = index\r\n\t\t\tthis.currentLevel = level\r\n\t\t\tthis.rechargeVisible = true\r\n\t\t},\r\n\t\teditSuccess(form) {\r\n\t\t\tthis.tableLists[this.currentLevel - 1].data[this.currentIndex] = {\r\n\t\t\t\t...this.rechargeData,\r\n\t\t\t\tbalance:\r\n\t\t\t\t\t(this.rechargeData.balance ? Number(this.rechargeData.balance) : 0) +\r\n\t\t\t\t\tNumber(form.amount)\r\n\t\t\t}\r\n\t\t\tthis.tableLists = [...this.tableLists]\r\n\t\t},\r\n\t\tcheckRecord(row) {\r\n\t\t\tthis.$store.dispatch('tagsView/delView', {\r\n\t\t\t\tname: routerNames.dotaccount\r\n\t\t\t})\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tconst targetUrl = '/merchant/dotaccount'\r\n\t\t\t\tconst id = row.agentId.split('_')[1]\r\n\t\t\t\trouter.push(`${targetUrl}?agentId=${id}`)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n",null]}