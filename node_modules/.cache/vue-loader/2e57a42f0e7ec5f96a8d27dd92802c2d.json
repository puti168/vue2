{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\merchant\\rateaccount\\components\\TableComp.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\merchant\\rateaccount\\components\\TableComp.vue","mtime":1617695097427},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { mapGetters } from 'vuex'\r\nimport list from '@/mixins/list'\r\nimport dayjs from 'dayjs'\r\nexport default {\r\n\tname: 'MerchantTableComp',\r\n\tmixins: [list],\r\n\tprops: {\r\n\t\ttableData: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => {}\r\n\t\t},\r\n\t\tcurrency: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: function() {\r\n\t\t\t\treturn []\r\n\t\t\t}\r\n\t\t},\r\n\t\ttime: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: function() {\r\n\t\t\t\treturn []\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tpageSize: 5,\r\n\t\t\tcanDownload: true,\r\n\t\t\tcanNoticeTotal: true,\r\n\t\t\tcanNoticeTime: true,\r\n\t\t\tcurrentAgentId: '',\r\n\t\t\tdefaultSort: { prop: 'betAmount', order: 'descending' },\r\n\t\t\tform: { orderProp: 'betAmount', order: 'descending' }\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters(['userInfo'])\r\n\t},\r\n\tmethods: {\r\n\t\tifArrow(levels, index) {\r\n\t\t\tconst levelsLength = levels.length\r\n\t\t\tif (levelsLength > 1 && index !== levelsLength - 1) return true\r\n\t\t},\r\n\t\tcheckRecord(row) {\r\n\t\t\tthis.$emit('checkRecord', row)\r\n\t\t},\r\n\t\thandlePaginationChange(val, type) {\r\n\t\t\tthis.$emit(\r\n\t\t\t\t'modifyData',\r\n\t\t\t\tthis.tableData.level,\r\n\t\t\t\t{\r\n\t\t\t\t\tpageSize: type === 1 ? val : this.pageSize,\r\n\t\t\t\t\tpageIndex: type === 2 ? val : this.pageIndex,\r\n\t\t\t\t\tagentId: this.tableData.parentId,\r\n\t\t\t\t\tagentName: this.tableData.parentName,\r\n\t\t\t\t\torder: this.form.order,\r\n\t\t\t\t\torderProp: this.form.orderProp\r\n\t\t\t\t},\r\n\t\t\t\tthis.tableData.level - 1,\r\n\t\t\t\t2\r\n\t\t\t)\r\n\t\t},\r\n\t\tshowChildren(level, opened, row) {\r\n\t\t\tthis.$emit(\r\n\t\t\t\t'showChildren',\r\n\t\t\t\tthis.currentAgentId === row.agentId,\r\n\t\t\t\tlevel,\r\n\t\t\t\topened,\r\n\t\t\t\t{\r\n\t\t\t\t\tagentId: row.agentId,\r\n\t\t\t\t\tagentName: row.agentName,\r\n\t\t\t\t\tpageSize: 5,\r\n\t\t\t\t\tpageIndex: 1,\r\n\t\t\t\t\torder: this.form.order,\r\n\t\t\t\t\torderProp: this.form.orderProp\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\tthis.currentAgentId = row.agentId\r\n\t\t},\r\n\t\tshowDailyDetail(row) {\r\n\t\t\tthis.$emit('setCurrentRow', row)\r\n\t\t},\r\n\t\t// 获取货币类型\r\n\t\tgetCurrency(id) {\r\n\t\t\tconst index = this.currency.findIndex((val) => Number(val.id) === id)\r\n\t\t\tif (index > -1) {\r\n\t\t\t\treturn this.currency[index].code\r\n\t\t\t}\r\n\t\t},\r\n\t\tsortChange(val) {\r\n\t\t\tif (localStorage.getItem('mixSearch') === '1') {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tconst { prop, order } = val\r\n\t\t\tif (order === null) {\r\n\t\t\t\tthis.form.orderProp === 'descending'\r\n\t\t\t\t\t? (val.order = 'descending')\r\n\t\t\t\t\t: (val.order = 'ascending')\r\n\t\t\t\tval.column.order = val.order\r\n\t\t\t\tthis.form.orderProp = prop\r\n\t\t\t\tthis.form.order = val.order\r\n\t\t\t\tif (this.tableData.data.length === 1) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.handlePaginationChange(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\torder: this.form.order,\r\n\t\t\t\t\t\torderProp: this.form.orderProp\r\n\t\t\t\t\t},\r\n\t\t\t\t\t3\r\n\t\t\t\t)\r\n\t\t\t\treturn val\r\n\t\t\t}\r\n\t\t\tthis.form.orderProp = prop\r\n\t\t\tthis.form.order = order\r\n\t\t\tthis.defaultSort = { prop, order: order || 'descending' }\r\n\t\t\tif (this.tableData.data.length === 1) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\tthis.handlePaginationChange(\r\n\t\t\t\t{\r\n\t\t\t\t\torder: this.form.order,\r\n\t\t\t\t\torderProp: this.form.orderProp\r\n\t\t\t\t},\r\n\t\t\t\t3\r\n\t\t\t)\r\n\t\t\treturn val\r\n\t\t},\r\n\t\texportCsv() {\r\n\t\t\tif (Number(this.tableData.total) > 20000) {\r\n\t\t\t\tif (this.canNoticeTotal) {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\tmessage: this.$t('new_2'),\r\n\t\t\t\t\t\ttype: 'error'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.canNoticeTotal = false\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.canNoticeTotal = true\r\n\t\t\t\t\t}, 3000)\r\n\t\t\t\t}\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif (!this.canDownload) {\r\n\t\t\t\tif (this.canNoticeTime) {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\tmessage: this.$t('new_1'),\r\n\t\t\t\t\t\ttype: 'error'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.canNoticeTime = false\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.canNoticeTime = true\r\n\t\t\t\t\t}, 3000)\r\n\t\t\t\t}\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tthis.canDownload = false\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.canDownload = true\r\n\t\t\t}, 60000)\r\n\t\t\tconst params = {\r\n\t\t\t\tstartTime: this.time ? this.time[0] : '',\r\n\t\t\t\tendTime: this.time ? this.time[1] : '',\r\n\t\t\t\torder: this.form.order,\r\n\t\t\t\torderProp: this.form.orderProp,\r\n\t\t\t\tsearchAgentId: this.tableData.parentId ? this.tableData.parentId : this.tableData.levels[this.tableData.levels.length - 1].agentId,\r\n\t\t\t\ttype: 2\r\n\t\t\t}\r\n\t\t\tconst startday = dayjs(params.startTime).get('date')\r\n\t\t\tconst startmonth = dayjs(params.startTime).get('month') + 1\r\n\t\t\tconst endmonth = dayjs(params.endTime).get('month') + 1\r\n\t\t\tconst endday = dayjs(params.endTime).get('date')\r\n\t\t\tconst title =\r\n\t\t\t\tthis.$t('route.rateaccount') +\r\n\t\t\t\t'(' +\r\n\t\t\t\tstartmonth +\r\n\t\t\t\tthis.$t('merchant_dailyrateaccount_index_802') +\r\n\t\t\t\tstartday +\r\n\t\t\t\tthis.$t('merchant_dailyrateaccount_index_803') +\r\n\t\t\t\t'-' +\r\n\t\t\t\tendmonth +\r\n\t\t\t\tthis.$t('merchant_dailyrateaccount_index_802') +\r\n\t\t\t\tendday +\r\n\t\t\t\tthis.$t('merchant_dailyrateaccount_index_803') +\r\n\t\t\t\t')'\r\n\t\t\tlocalStorage.setItem('title', title)\r\n\t\t\tthis.$api\r\n\t\t\t\t.pointAccountExport(params)\r\n\t\t\t\t.then((res) => {})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n",null]}