{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\systemmanagement\\apiDocument\\components\\ApiUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\systemmanagement\\apiDocument\\components\\ApiUpload.vue","mtime":1617695097435},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n\tname: 'BetDetail',\r\n\tprops: {\r\n\t\tdetailVisible: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\tcurrentData: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => {}\r\n\t\t},\r\n\t\ttypes: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: () => []\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tvisible: false,\r\n\t\t\taccountForm: {\r\n\t\t\t\tfile: '',\r\n\t\t\t\ttextType: 1,\r\n\t\t\t\tupdateContent: '',\r\n\t\t\t\tversionDate: ''\r\n\t\t\t},\r\n\t\t\tfileName: '',\r\n\t\t\tformData: null,\r\n\t\t\tfile: null,\r\n\t\t\tuploadKey: Date.now()\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\taccountFormRules() {\r\n\t\t\t/* eslint-disable */\r\n\t\t\tconst versionDateValidate = async (rule, value, callback) => {\r\n\t\t\t\tconsole.log('value :>> ', value)\r\n\t\t\t\tif ((value + '').length !== 8) {\r\n\t\t\t\t\tcallback(new Error(this.$t('apidocument_components_apiupload_9')))\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst updateContentValidate = async (rule, value, callback) => {\r\n\t\t\t\tif (!value || value.length > 500) {\r\n\t\t\t\t\tcallback(\r\n\t\t\t\t\t\tnew Error(this.$t('merchant_merchantinfo_components_editaccount_9611'))\r\n\t\t\t\t\t)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst fileValidate = (rule, value, callback) => {\r\n\t\t\t\tif (!value) {\r\n\t\t\t\t\tcallback(\r\n\t\t\t\t\t\tnew Error(this.$t('merchant_merchantinfo_components_editaccount_96111'))\r\n\t\t\t\t\t)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tversionDate: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\ttrigger: 'blur',\r\n\t\t\t\t\t\tmessage: this.$t('apidocument_components_apiupload_9'),\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvalidator: versionDateValidate,\r\n\t\t\t\t\t\ttrigger: 'blur',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\tupdateContent: [\r\n\t\t\t\t\t{ required: true, validator: updateContentValidate, trigger: 'blur' },\r\n\t\t\t\t],\r\n\t\t\t\tfile: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\ttrigger: 'blur',\r\n\t\t\t\t\t\tvalidator: fileValidate,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\twatch: {\r\n\t\tdetailVisible(val) {\r\n\t\t\tthis.visible = val\r\n\t\t\tthis.reset()\r\n\t\t},\r\n\t},\r\n\tmethods: {\r\n\t\tgetAmoutColor(value) {\r\n\t\t\tif (value > 0) {\r\n\t\t\t\treturn 'green'\r\n\t\t\t} else if (value < 0) {\r\n\t\t\t\treturn 'red'\r\n\t\t\t}\r\n\t\t\treturn ''\r\n\t\t},\r\n\t\tcancel() {\r\n\t\t\tthis.$emit('update:detailVisible', false)\r\n\t\t},\r\n\t\tuploadFiles(e) {\r\n\t\t\tconst files = e.target.files\r\n\t\t\tconst file = files[0]\r\n\t\t\tconst formData = new FormData()\r\n\t\t\t// formData重复的往一个值添加数据并不会被覆盖掉，可以全部接收到，可以通过formData.getAll('files')来查看所有插入的数据\r\n\t\t\tformData.append('file', file)\r\n\t\t\tthis.file = file\r\n\t\t\tthis.fileName = file.name\r\n\t\t\tthis.accountForm.file = file.name\r\n\t\t\tthis.formData = formData\r\n\t\t},\r\n\t\tgetFormData() {\r\n\t\t\tconst formData = new FormData()\r\n\t\t\tformData.append('updateContent', this.accountForm.updateContent)\r\n\t\t\tformData.append('textType', this.accountForm.textType)\r\n\t\t\tformData.append('versionDate', this.accountForm.versionDate)\r\n\t\t\tthis.file && formData.append('file', this.file)\r\n\t\t\treturn formData\r\n\t\t},\r\n\t\tcommitAccount() {\r\n\t\t\tthis.$refs.accountForm.validate((valid) => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tconst loading = this.$loading({\r\n\t\t\t\tlock: true,\r\n\t\t\t\ttext: 'Loading',\r\n\t\t\t\tspinner: 'el-icon-loading',\r\n\t\t\t\tbackground: 'rgba(0, 0, 0, 0.7)'\r\n\t\t\t})\r\n\t\t\t\t\tthis.$api.addApiDocument(this.getFormData()).then((_) => {\r\n\t\t\t\t\t\tif (_.code === 200) {\r\n\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\tmessage: this.$t('merchant.merchant_88'),\r\n\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\tthis.$parent.updateList()\r\n\t\t\t\t\t\t\tthis.$emit('input', false)\r\n\t\t\t\t\t\t\tthis.$emit('update:detailVisible', false)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tloading.close()\r\n\t\t\t\t\t}).catch(() => {\r\n\t\t\t\t\t\tloading.close()\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\treset() {\r\n\t\t\tthis.uploadKey = Date.now()\r\n\t\t\tthis.accountForm = {\r\n\t\t\t\tfile: '',\r\n\t\t\t\ttextType: 1,\r\n\t\t\t\tupdateContent: '',\r\n\t\t\t\tversionDate: '',\r\n\t\t\t}\r\n\t\t\tthis.fileName = ''\r\n\t\t\tthis.formData = null\r\n\t\t\tthis.file = null\r\n\t\t},\r\n\t},\r\n}\r\n",null]}