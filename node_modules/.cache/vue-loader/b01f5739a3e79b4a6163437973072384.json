{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\pages\\index\\views\\manager\\role\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\pages\\index\\views\\manager\\role\\index.vue","mtime":1617594855325},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBQYWdpbmF0aW9uTWl4aW4gfSBmcm9tICdAL2NvcmUvbWl4aW5zJw0KaW1wb3J0IHNlYXJjaEZvcm0gZnJvbSAnLi9jb21wb25lbnRzL3NlYXJjaEZvcm0nDQppbXBvcnQgew0KICBnZXRSb2xlUXVlcnksDQogIGdldEFsbE1lbnUsDQogIHNldEJhdGNoRGVsZXRlLA0KICBzZXRSb2xlRGVsZXRlLA0KICBzZXRSb2xlQWRkLA0KICBzZXRSb2xlVXBkYXRlLA0KICBnZXRSb2xlTmFtZVF1ZXJ5LA0KfSBmcm9tICdAL2FwaS91c2VyJw0KY29uc3QgY29sdW1ucyA9IFsNCiAgew0KICAgIHRpdGxlOiAn5bqP5Y+3JywNCiAgICBkYXRhSW5kZXg6ICdpbmRleCcsDQogICAga2V5OiAnbnVtJywNCiAgICB3aWR0aDogJzEwJScsDQogICAgYWxpZ246ICdjZW50ZXInLA0KICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogJ2luZGV4JyB9LA0KICB9LA0KICB7DQogICAgdGl0bGU6ICfop5LoibLlkI3np7AnLA0KICAgIGRhdGFJbmRleDogJ3JvbGVOYW1lJywNCiAgICBrZXk6ICdhY2MnLA0KICAgIHdpZHRoOiAnMTAlJywNCiAgICBhbGlnbjogJ2NlbnRlcicsDQogIH0sDQogIHsNCiAgICB0aXRsZTogJ+WIm+W7uuaXtumXtCcsDQogICAgZGF0YUluZGV4OiAnY3JlYXRlZEF0JywNCiAgICBrZXk6ICdjcmVhJywNCiAgICB3aWR0aDogJzE1JScsDQogICAgYWxpZ246ICdjZW50ZXInLA0KICB9LA0KICB7DQogICAgdGl0bGU6ICfliJvlu7rkuronLA0KICAgIGRhdGFJbmRleDogJ2NyZWF0ZWRCeScsDQogICAga2V5OiAndXNlcicsDQogICAgd2lkdGg6ICcxMCUnLA0KICAgIGFsaWduOiAnY2VudGVyJywNCiAgfSwNCiAgew0KICAgIHRpdGxlOiAn5Lq65pWwJywNCiAgICBkYXRhSW5kZXg6ICd1c2VyQ291bnQnLA0KICAgIGtleTogJ2lwJywNCiAgICB3aWR0aDogJzEwJScsDQogICAgYWxpZ246ICdjZW50ZXInLA0KICB9LA0KICB7DQogICAgdGl0bGU6ICflpIfms6jkv6Hmga8nLA0KICAgIGRhdGFJbmRleDogJ3JlbWFyaycsDQogICAga2V5OiAncmVtJywNCiAgICB3aWR0aDogJzM1JScsDQogICAgYWxpZ246ICdjZW50ZXInLA0KICB9LA0KICB7DQogICAgdGl0bGU6ICfmk43kvZwnLA0KICAgIGRhdGFJbmRleDogJ3Nob3cnLA0KICAgIGtleTogJ29wZXInLA0KICAgIGFsaWduOiAnY2VudGVyJywNCiAgICB3aWR0aDogJzEwJScsDQogICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAnc2hvdycgfSwNCiAgfSwNCl0NCmV4cG9ydCBkZWZhdWx0IHsNCiAgbWl4aW5zOiBbUGFnaW5hdGlvbk1peGluXSwNCiAgY29tcG9uZW50czogew0KICAgIHNlYXJjaEZvcm0sDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIG1vZGFsVGl0bGU6ICcnLA0KICAgICAgY2FuY2VsVGV4dDogJycsDQogICAgICBva1RleHQ6ICcnLA0KICAgICAgZm9ybTogdGhpcy4kZm9ybS5jcmVhdGVGb3JtKHRoaXMpLA0KICAgICAgdGV4dHZhbHVlOiAnJywgLy/op5LoibLmj4/ov7ANCiAgICAgIHRhYmxlTG9hZGluZzogZmFsc2UsDQogICAgICBtb2RhbFZpc2libGU6IGZhbHNlLA0KICAgICAgZXhwYW5kZWRLZXlzOiBbXSwNCiAgICAgIGF1dG9FeHBhbmRQYXJlbnQ6IHRydWUsDQogICAgICBjaGVja2VkS2V5czogW10sDQogICAgICBtZW51SWRzQXJyOiBbXSwNCiAgICAgIHRyZWVEYXRhOiBbXSwNCiAgICAgIHVzZXJuYW1lOiAnYWRtaW4xMjMnLA0KICAgICAgY29sdW1ucywNCiAgICAgIHRhYmxlRGF0YTogW10sDQogICAgICBhZGREYXRhOiB7fSwNCiAgICAgIHN0cjogJycsDQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuZmV0Y2goMSwgdGhpcy5wYWdlU2l6ZSkNCiAgICB0aGlzLmluaXRNZW51KCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHNlYXJjaCgpIHsNCiAgICAgIHRoaXMuZmV0Y2goMSwgdGhpcy5wYWdlU2l6ZSkNCiAgICB9LA0KICAgIGZldGNoKHBhZ2UsIHBhZ2VTaXplKSB7DQogICAgICB0aGlzLnRhYmxlTG9hZGluZyA9IHRydWUNCiAgICAgIHRoaXMucGFnZSA9IHBhZ2UNCiAgICAgIHRoaXMucGFnZVNpemUgPSBwYWdlU2l6ZQ0KICAgICAgbGV0IHF1ZXJ5RGF0YSA9IHRoaXMuJHJlZnMuc2VhcmNoRm9ybS5mb3JtRGF0YQ0KICAgICAgcXVlcnlEYXRhLnBhZ2VOdW0gPSBwYWdlDQogICAgICBxdWVyeURhdGEucGFnZVNpemUgPSBwYWdlU2l6ZQ0KICAgICAgcXVlcnlEYXRhLnJvbGVOYW1lID0gcXVlcnlEYXRhLnJvbGVOYW1lID09ICcnID8gbnVsbCA6IHF1ZXJ5RGF0YS5yb2xlTmFtZQ0KICAgICAgcXVlcnlEYXRhLmNyZWF0ZWRCeSA9IHF1ZXJ5RGF0YS5jcmVhdGVkQnkgPT0gJycgPyBudWxsIDogcXVlcnlEYXRhLmNyZWF0ZWRCeQ0KICAgICAgcXVlcnlEYXRhLnN0YXJ0VGltZSA9IHF1ZXJ5RGF0YS5zdGFydFRpbWUgIT0gJycgPyBxdWVyeURhdGEuc3RhcnRUaW1lIDogbnVsbA0KICAgICAgcXVlcnlEYXRhLmVuZFRpbWUgPSBxdWVyeURhdGEuZW5kVGltZSAhPSAnJyA/IHF1ZXJ5RGF0YS5lbmRUaW1lIDogbnVsbA0KICAgICAgZGVsZXRlIHF1ZXJ5RGF0YS5yZWdpc1RpbWUNCiAgICAgIGdldFJvbGVRdWVyeShxdWVyeURhdGEpDQogICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICB0aGlzLnRhYmxlTG9hZGluZyA9IGZhbHNlDQogICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzLmRhdGENCiAgICAgICAgICAgIHRoaXMudG90YWwgPSByZXMudG90YWxDb3VudA0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKGVycikgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKGVycikNCiAgICAgICAgfSkNCiAgICB9LA0KICAgIGluaXRNZW51KCkgew0KICAgICAgZ2V0QWxsTWVudSgpDQogICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgICAgdGhpcy50cmVlRGF0YSA9IHJlcy5kYXRhLmxpc3QNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coZXJyKQ0KICAgICAgICB9KQ0KICAgIH0sDQogICAgYWRkKCkgew0KICAgICAgdGhpcy5tb2RhbFRpdGxlID0gJ+aWsOWinuinkuiJsicNCiAgICAgIHRoaXMuY2FuY2VsVGV4dCA9ICflj5bmtojliJvlu7onDQogICAgICB0aGlzLm9rVGV4dCA9ICfnoa7lrprliJvlu7onDQogICAgICB0aGlzLnRleHR2YWx1ZSA9ICcnDQogICAgICB0aGlzLmFkZERhdGEgPSB7fQ0KICAgICAgdGhpcy5jaGVja2VkS2V5cyA9IFtdDQogICAgICB0aGlzLm1vZGFsVmlzaWJsZSA9IHRydWUNCiAgICB9LA0KICAgIGhhbmRsZVVzZXJuYW1lT3J1c2VyKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgew0KICAgICAgbGV0IHJlZyA9IC9ccy8NCiAgICAgIGlmICh2YWx1ZSAmJiByZWcudGVzdCh2YWx1ZSkpIHsNCiAgICAgICAgY2FsbGJhY2soJ+inkuiJsuS4jeiDveWMheWQq+epuuagvCcpDQogICAgICB9DQogICAgICBpZiAodmFsdWUgJiYgdmFsdWUucmVwbGFjZSgnICcsICcnKS5sZW5ndGggPCAxKSB7DQogICAgICAgIGNhbGxiYWNrKCfop5LoibLlkI3np7DnlLExfjIw5L2N5a2X56ym57uE5oiQJykNCiAgICAgIH0NCiAgICAgIGdldFJvbGVOYW1lUXVlcnkoeyByb2xlTmFtZTogdmFsdWUgfSkNCiAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIGlmIChyZXMuZGF0YSAhPSBudWxsKSB7DQogICAgICAgICAgICBjYWxsYmFjaygn6KeS6Imy5bey5a2Y5ZyoJykNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgY2FsbGJhY2soKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgICAgIH0pDQogICAgfSwNCiAgICBoYW5kbGVVc2VybmFtZShydWxlLCB2YWx1ZSwgY2FsbGJhY2spIHsNCiAgICAgIGxldCByZWcgPSAvXHMvDQogICAgICBpZiAodmFsdWUgJiYgcmVnLnRlc3QodmFsdWUpKSB7DQogICAgICAgIGNhbGxiYWNrKCfop5LoibLkuI3og73ljIXlkKvnqbrmoLwnKQ0KICAgICAgfQ0KICAgICAgaWYgKHZhbHVlICYmIHZhbHVlLnJlcGxhY2UoJyAnLCAnJykubGVuZ3RoIDwgMSkgew0KICAgICAgICBjYWxsYmFjaygn6KeS6Imy5ZCN56ew55SxMX4yMOS9jeWtl+espue7hOaIkCcpDQogICAgICB9DQogICAgICBjYWxsYmFjaygpDQogICAgfSwNCiAgICBvbkNoZWNrKGNoZWNrZWRLZXlzLCBpbmZvKSB7DQogICAgICBsZXQgY2hlY2tlZEtleXNSZXN1bHQgPSBbLi4uY2hlY2tlZEtleXMsIC4uLmluZm8uaGFsZkNoZWNrZWRLZXlzXQ0KICAgICAgdGhpcy5tZW51SWRzQXJyID0gY2hlY2tlZEtleXNSZXN1bHQNCiAgICB9LA0KICAgIGdldE1lbnVJZHNBcnIobGlzdCkgew0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGNvbnN0IGVsZSA9IGxpc3RbaV0NCiAgICAgICAgaWYgKGVsZS5pc1Blcm1pc3Npb24pIHsNCiAgICAgICAgICB0aGlzLm1lbnVJZHNBcnIucHVzaChlbGUubWVudUlkKQ0KICAgICAgICB9DQogICAgICAgIGlmIChlbGUuY2hpbGRNZW51ICYmIGVsZS5jaGlsZE1lbnUubGVuZ3RoID4gMCkgew0KICAgICAgICAgIHRoaXMuZ2V0TWVudUlkc0FycihlbGUuY2hpbGRNZW51KQ0KICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gdGhpcy5tZW51SWRzQXJyDQogICAgfSwNCiAgICBnZXRUcnVlSWQobGlzdCkgew0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGNvbnN0IGVsZSA9IGxpc3RbaV0NCiAgICAgICAgaWYgKGVsZS5jaGlsZE1lbnUgJiYgZWxlLmNoaWxkTWVudS5sZW5ndGggPiAwKSB7DQogICAgICAgICAgdGhpcy5nZXRUcnVlSWQoZWxlLmNoaWxkTWVudSkNCiAgICAgICAgfSBlbHNlIGlmIChlbGUuaXNQZXJtaXNzaW9uKSB7DQogICAgICAgICAgdGhpcy5jaGVja2VkS2V5cy5wdXNoKGVsZS5tZW51SWQpDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJldHVybiB0aGlzLmNoZWNrZWRLZXlzDQogICAgfSwNCiAgICBlZGl0KHRleHQsIHJlY29yZCwgaW5kZXgpIHsNCiAgICAgIHRoaXMubW9kYWxUaXRsZSA9ICfkv67mlLnop5LoibInDQogICAgICB0aGlzLmNhbmNlbFRleHQgPSAn5Y+W5raI5L+u5pS5Jw0KICAgICAgdGhpcy5va1RleHQgPSAn56Gu5a6a5L+u5pS5Jw0KICAgICAgdGhpcy5tb2RhbFZpc2libGUgPSB0cnVlDQogICAgICB0aGlzLnRleHR2YWx1ZSA9IHJlY29yZC5yZW1hcmsNCiAgICAgIHRoaXMuYWRkRGF0YS5yb2xlSWQgPSByZWNvcmQucm9sZUlkDQogICAgICB0aGlzLm1lbnVJZHNBcnIgPSBbXQ0KICAgICAgdGhpcy5jaGVja2VkS2V5cyA9IFtdDQogICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgdGhpcy5mb3JtLnNldEZpZWxkc1ZhbHVlKHsNCiAgICAgICAgICB1c2VybmFtZTogcmVjb3JkLnJvbGVOYW1lLA0KICAgICAgICB9KQ0KICAgICAgfSwgMTAwKQ0KICAgICAgbGV0IHRoYXQgPSB0aGlzDQogICAgICBnZXRBbGxNZW51KHsgcm9sZUlkOiByZWNvcmQucm9sZUlkIH0pDQogICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgICAgdGhhdC5nZXRUcnVlSWQocmVzLmRhdGEubGlzdCkNCiAgICAgICAgICAgIHRoYXQuZ2V0TWVudUlkc0FycihyZXMuZGF0YS5saXN0KQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgICAgIH0pDQogICAgfSwNCiAgICBjcmVhdGVTdWJtaXQoKSB7DQogICAgICB0aGlzLmZvcm0udmFsaWRhdGVGaWVsZHMoKGVyciwgdmFsdWVzKSA9PiB7DQogICAgICAgIGlmICghZXJyKSB7DQogICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZEtleXMubGVuZ3RoIDwgMSkgew0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6Iez5bCR6YCJ5oup5LiA5p2h5p2D6ZmQJykNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5hZGREYXRhLnJvbGVOYW1lID0gdmFsdWVzLnVzZXJuYW1lDQogICAgICAgICAgICB0aGlzLmFkZERhdGEucmVtYXJrID0gdGhpcy50ZXh0dmFsdWUNCiAgICAgICAgICAgIHRoaXMuYWRkRGF0YS5tZW51SWRzID0gdGhpcy5tZW51SWRzQXJyLnRvU3RyaW5nKCkNCiAgICAgICAgICAgIGxldCB0aGF0ID0gdGhpcw0KICAgICAgICAgICAgaWYgKHRoYXQuYWRkRGF0YS5yb2xlSWQpIHsNCiAgICAgICAgICAgICAgc2V0Um9sZVVwZGF0ZSh0aGF0LmFkZERhdGEpDQogICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICAgICAgICAgICAgdGhhdC5tb2RhbFZpc2libGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICB0aGF0LmZldGNoKDEsIHRoYXQucGFnZVNpemUpDQogICAgICAgICAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKQ0KICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhhdC4kbWVzc2FnZS5lcnJvcihyZXMubXNnKQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycikNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgc2V0Um9sZUFkZCh0aGF0LmFkZERhdGEpDQogICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICAgICAgICAgICAgdGhhdC5tb2RhbFZpc2libGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICB0aGF0LmZldGNoKDEsIHRoYXQucGFnZVNpemUpDQogICAgICAgICAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKQ0KICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhhdC4kbWVzc2FnZS5lcnJvcihyZXMubXNnKQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycikNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIHJvbGVEZWxldGUodGV4dCwgcmVjb3JkLCBpbmRleCkgew0KICAgICAgbGV0IHJlcyA9IHt9DQogICAgICBsZXQgdGhhdCA9IHRoaXMNCiAgICAgIGlmIChyZWNvcmQpIHsNCiAgICAgICAgcmVzLnJvbGVJZCA9IHJlY29yZC5yb2xlSWQNCiAgICAgICAgcmVzLnJvbGVOYW1lID0gcmVjb3JkLnJvbGVOYW1lDQogICAgICAgIHRoaXMuJGNvbmZpcm0oew0KICAgICAgICAgIHRpdGxlOiAn5Yig6Zmk6KeS6ImyJywNCiAgICAgICAgICBjb250ZW50OiAn5Yig6Zmk5ZCO77yM5Yib5bu655So5oi35pe25bCG5LiN6IO95aSf6YCJ5oup6K+l6aG56KeS6Imy5p2D6ZmQ77yM6L+Y6KaB57un57ut5ZCX77yfJywNCiAgICAgICAgICBib2R5U3R5bGU6IHsgY29sb3I6ICdyZWQnIH0sDQogICAgICAgICAgb25PaygpIHsNCiAgICAgICAgICAgIHNldFJvbGVEZWxldGUocmVzKQ0KICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKQ0KICAgICAgICAgICAgICAgICAgdGhhdC5mZXRjaCgxLCB0aGF0LnBhZ2VTaXplKQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICB0aGF0LiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycikNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICB9LA0KICAgICAgICB9KQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy4kY29uZmlybSh7DQogICAgICAgICAgdGl0bGU6ICfliKDpmaTop5LoibInLA0KICAgICAgICAgIGNvbnRlbnQ6ICfliKDpmaTlkI7vvIznu5HlrprkurrmlbDkuLow55qE6KeS6Imy6YO95bCG6KKr5Yig6Zmk77yM6L+Y6KaB57un57ut5ZCX77yfJywNCiAgICAgICAgICBvbk9rKCkgew0KICAgICAgICAgICAgc2V0QmF0Y2hEZWxldGUoKQ0KICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKQ0KICAgICAgICAgICAgICAgICAgdGhhdC5mZXRjaCgxLCB0aGF0LnBhZ2VTaXplKQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICB0aGF0LiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycikNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICB9LA0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgaGlkZU1vZGFsKCkge30sDQogIH0sDQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/index/views/manager/role","sourcesContent":["<template>\r\n  <div class=\"rolespermission\">\r\n    <a-card>\r\n      <searchForm ref=\"searchForm\" :searchFunc=\"search\"></searchForm>\r\n      <a-space size=\"8\" class=\"bd-right\" style=\"margin: -20px 0 20px 0\">\r\n        <a-button type=\"primary\" v-action:xzjs style=\"margin-right: 10px\" @click=\"add\"> 新增角色 </a-button>\r\n        <a-button type=\"primary\" v-action:plsc @click=\"roleDelete\"> 批量删除空角色 </a-button>\r\n      </a-space>\r\n      <a-modal\r\n        v-model=\"modalVisible\"\r\n        width=\"60%\"\r\n        :title=\"modalTitle\"\r\n        @ok=\"createSubmit\"\r\n        destroyOnClose\r\n        :cancelText=\"cancelText\"\r\n        :okText=\"okText\"\r\n      >\r\n        <a-form :form=\"form\" :label-col=\"{ span: 4 }\" :wrapper-col=\"{ span: 20 }\" @submit=\"createSubmit\">\r\n          <a-form-item label=\"角色名称\">\r\n            <a-input\r\n              v-if=\"modalTitle === '新增角色'\"\r\n              :maxLength=\"20\"\r\n              placeholder=\"请输入角色名称\"\r\n              v-decorator=\"[\r\n                'username',\r\n                {\r\n                  rules: [{ required: true, message: '角色名称由1~20位字符组成' }, { validator: handleUsernameOruser }],\r\n                  validateTrigger: 'blur',\r\n                },\r\n              ]\"\r\n            />\r\n            <a-input\r\n              v-else\r\n              :maxLength=\"20\"\r\n              placeholder=\"请输入角色名称\"\r\n              v-decorator=\"[\r\n                'username',\r\n                {\r\n                  rules: [{ required: true, message: '角色名称由1~20位字符组成' }, { validator: handleUsername }],\r\n                  validateTrigger: 'blur',\r\n                },\r\n              ]\"\r\n            />\r\n          </a-form-item>\r\n          <a-form-item label=\"角色描述\" :wrapper-col=\"{ span: 20 }\">\r\n            <a-textarea v-model=\"textvalue\" placeholder=\"请输入角色描述，长度不要超过255字\" :maxLength=\"255\" />\r\n          </a-form-item>\r\n          <a-form-item label=\"权限分配\">\r\n            <a-tree\r\n              class=\"scrollbox\"\r\n              showIcon\r\n              checkable\r\n              v-model=\"checkedKeys\"\r\n              :auto-expand-parent=\"autoExpandParent\"\r\n              :tree-data=\"treeData\"\r\n              :replaceFields=\"{ children: 'childMenu', title: 'menuName', key: 'menuId' }\"\r\n              @check=\"onCheck\"\r\n              defaultExpandAll\r\n            />\r\n          </a-form-item>\r\n        </a-form>\r\n      </a-modal>\r\n      <a-table\r\n        style=\"margin-top: 17px; margin-bottom: 10px\"\r\n        :columns=\"columns\"\r\n        :data-source=\"tableData\"\r\n        :pagination=\"pagination\"\r\n        :loading=\"tableLoading\"\r\n        size=\"middle\"\r\n        bordered\r\n        rowKey=\"roleId\"\r\n        @change=\"onTableChange\"\r\n      >\r\n        <template slot=\"index\" slot-scope=\"text, record, index\">\r\n          {{ index + 1 }}\r\n        </template>\r\n        <template slot=\"show\" slot-scope=\"text, record, index\">\r\n          <div>\r\n            <a-button type=\"link\" v-action:xg size=\"small\" @click=\"edit(text, record, index)\"> 修改 </a-button>\r\n            <a-button\r\n              type=\"link\"\r\n              v-action:sc\r\n              v-if=\"record.userCount < 1\"\r\n              size=\"small\"\r\n              @click=\"roleDelete(text, record, index)\"\r\n            >\r\n              删除\r\n            </a-button>\r\n            <a-button type=\"link\" v-action:sc disabled v-else size=\"small\"> 删除 </a-button>\r\n          </div>\r\n        </template>\r\n      </a-table>\r\n    </a-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { PaginationMixin } from '@/core/mixins'\r\nimport searchForm from './components/searchForm'\r\nimport {\r\n  getRoleQuery,\r\n  getAllMenu,\r\n  setBatchDelete,\r\n  setRoleDelete,\r\n  setRoleAdd,\r\n  setRoleUpdate,\r\n  getRoleNameQuery,\r\n} from '@/api/user'\r\nconst columns = [\r\n  {\r\n    title: '序号',\r\n    dataIndex: 'index',\r\n    key: 'num',\r\n    width: '10%',\r\n    align: 'center',\r\n    scopedSlots: { customRender: 'index' },\r\n  },\r\n  {\r\n    title: '角色名称',\r\n    dataIndex: 'roleName',\r\n    key: 'acc',\r\n    width: '10%',\r\n    align: 'center',\r\n  },\r\n  {\r\n    title: '创建时间',\r\n    dataIndex: 'createdAt',\r\n    key: 'crea',\r\n    width: '15%',\r\n    align: 'center',\r\n  },\r\n  {\r\n    title: '创建人',\r\n    dataIndex: 'createdBy',\r\n    key: 'user',\r\n    width: '10%',\r\n    align: 'center',\r\n  },\r\n  {\r\n    title: '人数',\r\n    dataIndex: 'userCount',\r\n    key: 'ip',\r\n    width: '10%',\r\n    align: 'center',\r\n  },\r\n  {\r\n    title: '备注信息',\r\n    dataIndex: 'remark',\r\n    key: 'rem',\r\n    width: '35%',\r\n    align: 'center',\r\n  },\r\n  {\r\n    title: '操作',\r\n    dataIndex: 'show',\r\n    key: 'oper',\r\n    align: 'center',\r\n    width: '10%',\r\n    scopedSlots: { customRender: 'show' },\r\n  },\r\n]\r\nexport default {\r\n  mixins: [PaginationMixin],\r\n  components: {\r\n    searchForm,\r\n  },\r\n  data() {\r\n    return {\r\n      modalTitle: '',\r\n      cancelText: '',\r\n      okText: '',\r\n      form: this.$form.createForm(this),\r\n      textvalue: '', //角色描述\r\n      tableLoading: false,\r\n      modalVisible: false,\r\n      expandedKeys: [],\r\n      autoExpandParent: true,\r\n      checkedKeys: [],\r\n      menuIdsArr: [],\r\n      treeData: [],\r\n      username: 'admin123',\r\n      columns,\r\n      tableData: [],\r\n      addData: {},\r\n      str: '',\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetch(1, this.pageSize)\r\n    this.initMenu()\r\n  },\r\n  methods: {\r\n    search() {\r\n      this.fetch(1, this.pageSize)\r\n    },\r\n    fetch(page, pageSize) {\r\n      this.tableLoading = true\r\n      this.page = page\r\n      this.pageSize = pageSize\r\n      let queryData = this.$refs.searchForm.formData\r\n      queryData.pageNum = page\r\n      queryData.pageSize = pageSize\r\n      queryData.roleName = queryData.roleName == '' ? null : queryData.roleName\r\n      queryData.createdBy = queryData.createdBy == '' ? null : queryData.createdBy\r\n      queryData.startTime = queryData.startTime != '' ? queryData.startTime : null\r\n      queryData.endTime = queryData.endTime != '' ? queryData.endTime : null\r\n      delete queryData.regisTime\r\n      getRoleQuery(queryData)\r\n        .then((res) => {\r\n          this.tableLoading = false\r\n          if (res.code === 200) {\r\n            this.tableData = res.data\r\n            this.total = res.totalCount\r\n          } else {\r\n            this.$message.error(res.msg)\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    initMenu() {\r\n      getAllMenu()\r\n        .then((res) => {\r\n          if (res.code === 200) {\r\n            this.treeData = res.data.list\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    add() {\r\n      this.modalTitle = '新增角色'\r\n      this.cancelText = '取消创建'\r\n      this.okText = '确定创建'\r\n      this.textvalue = ''\r\n      this.addData = {}\r\n      this.checkedKeys = []\r\n      this.modalVisible = true\r\n    },\r\n    handleUsernameOruser(rule, value, callback) {\r\n      let reg = /\\s/\r\n      if (value && reg.test(value)) {\r\n        callback('角色不能包含空格')\r\n      }\r\n      if (value && value.replace(' ', '').length < 1) {\r\n        callback('角色名称由1~20位字符组成')\r\n      }\r\n      getRoleNameQuery({ roleName: value })\r\n        .then((res) => {\r\n          if (res.data != null) {\r\n            callback('角色已存在')\r\n          } else {\r\n            callback()\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    handleUsername(rule, value, callback) {\r\n      let reg = /\\s/\r\n      if (value && reg.test(value)) {\r\n        callback('角色不能包含空格')\r\n      }\r\n      if (value && value.replace(' ', '').length < 1) {\r\n        callback('角色名称由1~20位字符组成')\r\n      }\r\n      callback()\r\n    },\r\n    onCheck(checkedKeys, info) {\r\n      let checkedKeysResult = [...checkedKeys, ...info.halfCheckedKeys]\r\n      this.menuIdsArr = checkedKeysResult\r\n    },\r\n    getMenuIdsArr(list) {\r\n      for (let i = 0; i < list.length; i++) {\r\n        const ele = list[i]\r\n        if (ele.isPermission) {\r\n          this.menuIdsArr.push(ele.menuId)\r\n        }\r\n        if (ele.childMenu && ele.childMenu.length > 0) {\r\n          this.getMenuIdsArr(ele.childMenu)\r\n        }\r\n      }\r\n      return this.menuIdsArr\r\n    },\r\n    getTrueId(list) {\r\n      for (let i = 0; i < list.length; i++) {\r\n        const ele = list[i]\r\n        if (ele.childMenu && ele.childMenu.length > 0) {\r\n          this.getTrueId(ele.childMenu)\r\n        } else if (ele.isPermission) {\r\n          this.checkedKeys.push(ele.menuId)\r\n        }\r\n      }\r\n      return this.checkedKeys\r\n    },\r\n    edit(text, record, index) {\r\n      this.modalTitle = '修改角色'\r\n      this.cancelText = '取消修改'\r\n      this.okText = '确定修改'\r\n      this.modalVisible = true\r\n      this.textvalue = record.remark\r\n      this.addData.roleId = record.roleId\r\n      this.menuIdsArr = []\r\n      this.checkedKeys = []\r\n      setTimeout(() => {\r\n        this.form.setFieldsValue({\r\n          username: record.roleName,\r\n        })\r\n      }, 100)\r\n      let that = this\r\n      getAllMenu({ roleId: record.roleId })\r\n        .then((res) => {\r\n          if (res.code === 200) {\r\n            that.getTrueId(res.data.list)\r\n            that.getMenuIdsArr(res.data.list)\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    createSubmit() {\r\n      this.form.validateFields((err, values) => {\r\n        if (!err) {\r\n          if (this.checkedKeys.length < 1) {\r\n            this.$message.error('至少选择一条权限')\r\n          } else {\r\n            this.addData.roleName = values.username\r\n            this.addData.remark = this.textvalue\r\n            this.addData.menuIds = this.menuIdsArr.toString()\r\n            let that = this\r\n            if (that.addData.roleId) {\r\n              setRoleUpdate(that.addData)\r\n                .then((res) => {\r\n                  if (res.code === 200) {\r\n                    that.modalVisible = false\r\n                    that.fetch(1, that.pageSize)\r\n                    that.$message.success(res.msg)\r\n                  } else {\r\n                    that.$message.error(res.msg)\r\n                  }\r\n                })\r\n                .catch((err) => {\r\n                  console.log(err)\r\n                })\r\n            } else {\r\n              setRoleAdd(that.addData)\r\n                .then((res) => {\r\n                  if (res.code === 200) {\r\n                    that.modalVisible = false\r\n                    that.fetch(1, that.pageSize)\r\n                    that.$message.success(res.msg)\r\n                  } else {\r\n                    that.$message.error(res.msg)\r\n                  }\r\n                })\r\n                .catch((err) => {\r\n                  console.log(err)\r\n                })\r\n            }\r\n          }\r\n        }\r\n      })\r\n    },\r\n    roleDelete(text, record, index) {\r\n      let res = {}\r\n      let that = this\r\n      if (record) {\r\n        res.roleId = record.roleId\r\n        res.roleName = record.roleName\r\n        this.$confirm({\r\n          title: '删除角色',\r\n          content: '删除后，创建用户时将不能够选择该项角色权限，还要继续吗？',\r\n          bodyStyle: { color: 'red' },\r\n          onOk() {\r\n            setRoleDelete(res)\r\n              .then((res) => {\r\n                if (res.code === 200) {\r\n                  that.$message.success(res.msg)\r\n                  that.fetch(1, that.pageSize)\r\n                } else {\r\n                  that.$message.error(res.msg)\r\n                }\r\n              })\r\n              .catch((err) => {\r\n                console.log(err)\r\n              })\r\n          },\r\n        })\r\n      } else {\r\n        this.$confirm({\r\n          title: '删除角色',\r\n          content: '删除后，绑定人数为0的角色都将被删除，还要继续吗？',\r\n          onOk() {\r\n            setBatchDelete()\r\n              .then((res) => {\r\n                if (res.code === 200) {\r\n                  that.$message.success(res.msg)\r\n                  that.fetch(1, that.pageSize)\r\n                } else {\r\n                  that.$message.error(res.msg)\r\n                }\r\n              })\r\n              .catch((err) => {\r\n                console.log(err)\r\n              })\r\n          },\r\n        })\r\n      }\r\n    },\r\n    hideModal() {},\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n/deep/ th {\r\n  text-align: center !important;\r\n  overflow: hidden !important;\r\n  font-family: 'Arial Negreta', 'Arial Normal', 'Arial', sans-serif;\r\n  font-weight: 700 !important;\r\n  font-style: normal;\r\n}\r\n/deep/ .scrollbox {\r\n  height: 400px;\r\n  overflow-y: auto;\r\n}\r\n/deep/ .ant-tree li span.ant-tree-switcher {\r\n  display: none !important;\r\n}\r\n/deep/ .ant-tree li ul {\r\n  // display: flex !important;\r\n}\r\n/deep/ .ant-tree-child-tree .ant-tree-child-tree-open {\r\n  display: flex !important;\r\n}\r\n/deep/ .ant-tree-child-tree > li:first-child {\r\n  padding-top: 4px;\r\n}\r\n</style>"]}]}