{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\members\\list\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\members\\list\\index.vue","mtime":1617695097417},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport list from '@/mixins/list'\r\nimport SelectAgentTree from '@/components/SelectAgentTree'\r\nimport EditMemberInfo from './components/EditMemberInfo'\r\nimport IPLogin from './components/IPLogin'\r\nimport { routerNames } from '@/utils/consts'\r\nimport { formatCurrency } from '@/utils'\r\nimport router from '@/router'\r\nimport { mapGetters } from 'vuex'\r\nimport downloadSure from '@/utils/common/downloadSure'\r\nimport Cookies from 'js-cookie'\r\nexport default {\r\n\tname: routerNames.memberslist,\r\n\tcomponents: { EditMemberInfo, IPLogin, SelectAgentTree },\r\n\tmixins: [list],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\thadSearch: false,\r\n\t\t\tloading: false,\r\n\t\t\t// 编辑会员信息弹窗控制\r\n\t\t\teditVisible: false,\r\n\t\t\t// IP登录轨迹弹窗\r\n\t\t\tdrawer: false,\r\n\t\t\tform: {\r\n\t\t\t\ttime: [],\r\n\t\t\t\ttime2: [],\r\n\t\t\t\ttime3: [],\r\n\t\t\t\tstatus: -1, // 账号状态\r\n\t\t\t\tlimitRed: -1, // 盘口\r\n\t\t\t\tcurrency: -1,\r\n\t\t\t\tbetStatus: -1, // 能否投注\r\n\t\t\t\tisBet: -1, // 是否投注\r\n\t\t\t\tplayerLoginName: '', // 会员账号\r\n\t\t\t\tnickName: '',\r\n\t\t\t\tagentId: ''\r\n\t\t\t},\r\n\t\t\tlist: [],\r\n\t\t\tbetLimits: [],\r\n\t\t\tcurrencyList: [],\r\n\t\t\tamountData: 0,\r\n\t\t\tmemberInfo: {},\r\n\t\t\tipData: null\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters(['userInfo'])\r\n\t},\r\n\tcreated() {\r\n\t\tthis.loadBetLimitList()\r\n\t\tthis.loadCurrenyDate()\r\n\t},\r\n\tmethods: {\r\n\t\tformatCurrency(value, precision) {\r\n\t\t\treturn formatCurrency(value, precision)\r\n\t\t},\r\n\t\tloadData() {\r\n\t\t\tthis.loading = true\r\n\t\t\tconst pageData = {\r\n\t\t\t\tpageSize: this.pageSize,\r\n\t\t\t\tpageIndex: this.pageIndex\r\n\t\t\t}\r\n\t\t\tconst requestData = this.hadSearch\r\n\t\t\t\t? {\r\n\t\t\t\t\t\tplayerLoginName: this.form.playerLoginName,\r\n\t\t\t\t\t\tnickName: this.form.nickName,\r\n\t\t\t\t\t\tsearchAgentId: this.form.agentId,\r\n\t\t\t\t\t\tstatus: this.form.status,\r\n\t\t\t\t\t\tcurrency: this.form.currency,\r\n\t\t\t\t\t\tlimitRed: this.form.limitRed,\r\n\t\t\t\t\t\tbetStatus: this.form.betStatus,\r\n\t\t\t\t\t\tisBet: this.form.isBet,\r\n\t\t\t\t\t\tstartTime: this.form.time ? this.form.time[0] : '',\r\n\t\t\t\t\t\tendTime: this.form.time ? this.form.time[1] : '',\r\n\t\t\t\t\t\tstartLoginTime: this.form.time2 ? this.form.time2[0] : '',\r\n\t\t\t\t\t\tendLoginTime: this.form.time2 ? this.form.time2[1] : '',\r\n\t\t\t\t\t\tfirstLoginTime: this.form.time3 ? this.form.time3[0] : '',\r\n\t\t\t\t\t\tlastLoginTime: this.form.time3 ? this.form.time3[1] : ''\r\n\t\t\t\t  }\r\n\t\t\t\t: {}\r\n\t\t\tconst form = {\r\n\t\t\t\t...pageData,\r\n\t\t\t\t...requestData\r\n\t\t\t}\r\n\t\t\tthis.$api\r\n\t\t\t\t.memberPlayerList(form)\r\n\t\t\t\t.then((_) => {\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\tif (_.code === 200) {\r\n\t\t\t\t\t\tconst data = _.data\r\n\t\t\t\t\t\tthis.list = data.record\r\n\t\t\t\t\t\tthis.amountData = data.summary\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch((_) => {\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t})\r\n\t\t\tthis.$api.memberPlayerListSum(form).then((res) => {\r\n\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\tconst data = res.data\r\n\t\t\t\t\tthis.total = data.totalRecord\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tfilterGameMode(item) {\r\n\t\t\tlet name = ''\r\n\t\t\tif (Cookies.get('language') === 'zh') {\r\n\t\t\t\tname = item.name\r\n\t\t\t}\r\n\t\t\tif (Cookies.get('language') === 'en') {\r\n\t\t\t\tname = item.englishText\r\n\t\t\t}\r\n\t\t\treturn name\r\n\t\t},\r\n\t\tloadCurrenyDate() {\r\n\t\t\tthis.$api\r\n\t\t\t\t.getCurrencyComboBoxList({\r\n\t\t\t\t\tpageIndex: 1,\r\n\t\t\t\t\tpageSize: 1000\r\n\t\t\t\t})\r\n\t\t\t\t.then((_) => {\r\n\t\t\t\t\tconst data = _.data\r\n\t\t\t\t\tthis.currencyList = data.record\r\n\t\t\t\t})\r\n\t\t},\r\n\t\tloadBetLimitList() {\r\n\t\t\t// 自定义限红的type  因为自定义限红暂时隐藏，所以这里传type为 1\r\n\t\t\tconst type = 1\r\n\t\t\tthis.$api.memberBetLimitList({ type }).then((_) => {\r\n\t\t\t\tif (_.code === 200) {\r\n\t\t\t\t\tthis.betLimits = _.data || []\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\texportCSV() {\r\n\t\t\tconst params = {\r\n\t\t\t\tstartTime: this.form.time ? this.form.time[0] : '',\r\n\t\t\t\tendTime: this.form.time ? this.form.time[1] : '',\r\n\t\t\t\tstartLoginTime: this.form.time2 ? this.form.time2[0] : '',\r\n\t\t\t\tendLoginTime: this.form.time2 ? this.form.time2[1] : '',\r\n\t\t\t\tfirstLoginTime: this.form.time3 ? this.form.time3[0] : '',\r\n\t\t\t\tlastLoginTime: this.form.time3 ? this.form.time3[1] : '',\r\n\t\t\t\tstatus: this.form.status,\r\n\t\t\t\tbetStatus: this.form.betStatus,\r\n\t\t\t\tcurrency: this.form.currency,\r\n\t\t\t\tisBet: this.form.isBet,\r\n\t\t\t\tlimitRed: this.form.limitRed,\r\n\t\t\t\tplayerLoginName: this.form.playerLoginName,\r\n\t\t\t\tnickName: this.form.nickName,\r\n\t\t\t\tsearchAgentId: this.form.agentId\r\n\t\t\t}\r\n\t\t\tdownloadSure(\r\n\t\t\t\tthis.$api,\r\n\t\t\t\t'memberExportFile',\r\n\t\t\t\tparams,\r\n\t\t\t\tthis.$t('members_list_index_669')\r\n\t\t\t)\r\n\t\t},\r\n\t\tcolorNum(val) {\r\n\t\t\tif (val === 0) {\r\n\t\t\t\treturn 'success'\r\n\t\t\t}\r\n\t\t\treturn 'danger'\r\n\t\t},\r\n\t\thandleCurrentChange(val) {\r\n\t\t\tthis.loadData()\r\n\t\t},\r\n\t\thandleReset() {\r\n\t\t\tthis.form = {\r\n\t\t\t\tbetStatus: -1,\r\n\t\t\t\tisBet: -1,\r\n\t\t\t\ttime: [],\r\n\t\t\t\ttime2: [],\r\n\t\t\t\ttime3: [],\r\n\t\t\t\tstatus: -1,\r\n\t\t\t\tcurrency: -1,\r\n\t\t\t\tlimitRed: -1,\r\n\t\t\t\tplayerLoginName: '',\r\n\t\t\t\tnickName: '',\r\n\t\t\t\tagentId: ''\r\n\t\t\t}\r\n\t\t\tthis.hadSearch = false\r\n\t\t\tthis.initList()\r\n\t\t},\r\n\t\thandleSearch() {\r\n\t\t\tthis.hadSearch = true\r\n\t\t\tthis.pageIndex = 1\r\n\t\t\tthis.loadData()\r\n\t\t},\r\n\t\t// 编辑会员信息\r\n\t\teditMemberInfo(row) {\r\n\t\t\tthis.memberInfo = { ...row }\r\n\t\t\tthis.editVisible = true\r\n\t\t},\r\n\t\tupdatePlayerInfoSuccess() {\r\n\t\t\tthis.loadData()\r\n\t\t},\r\n\t\t// ip登录轨迹\r\n\t\tcheckLoginIp(row) {\r\n\t\t\tthis.drawer = true\r\n\t\t\tthis.ipData = { ...row }\r\n\t\t},\r\n\t\t// 跳转下注记录\r\n\t\tcheckBetrecord(row) {\r\n\t\t\tthis.$store.dispatch('tagsView/delView', {\r\n\t\t\t\tname: routerNames.membersbetrecord\r\n\t\t\t})\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tconst targetUrl = '/members/betrecord'\r\n\t\t\t\trouter.push(`${targetUrl}`)\r\n\t\t\t\tconst id = row.playerId.split('_')[1]\r\n\t\t\t\tlocalStorage.setItem('playerId', id)\r\n\t\t\t\tlocalStorage.setItem('playerLoginName', row.playerLoginName)\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 跳转会员流水\r\n\t\tcheckTransaction(row) {\r\n\t\t\tthis.$store.dispatch('tagsView/delView', {\r\n\t\t\t\tname: routerNames.membersaccounttransaction\r\n\t\t\t})\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tconst targetUrl = '/members/accounttransaction'\r\n\t\t\t\trouter.push(`${targetUrl}`)\r\n\t\t\t\tconst id = row.playerId.split('_')[1]\r\n\t\t\t\tlocalStorage.setItem('playerIdA', id)\r\n\t\t\t\tlocalStorage.setItem('playerLoginNameA', row.playerLoginName)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n",null]}