{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\merchant\\limitManage\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\merchant\\limitManage\\index.vue","mtime":1617695097424},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { mapGetters } from 'vuex'\r\nimport list from '@/mixins/list'\r\nimport SelectAgentTree from '@/components/SelectAgentTree2'\r\nimport { routerNames } from '@/utils/consts'\r\nimport router from '@/router'\r\nimport Cookies from 'js-cookie'\r\nimport { message } from '@/utils/message'\r\n\r\nexport default {\r\n\tname: routerNames.membersbetrecord,\r\n\tcomponents: { SelectAgentTree },\r\n\tmixins: [list],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tdrawer: false,\r\n\t\t\tipData: null,\r\n\t\t\tloading: false,\r\n\t\t\treleaseTime: '',\r\n\t\t\tbetDialogVisible: false,\r\n\t\t\tdialogShow: false,\r\n\t\t\tbetStatusList: [\r\n\t\t\t\tthis.$t('members.members_16'),\r\n\t\t\t\tthis.$t('members.members_17'),\r\n\t\t\t\tthis.$t('members.members_18'),\r\n\t\t\t\tthis.$t('members.members_19'),\r\n\t\t\t\tthis.$t('members.members_20'),\r\n\t\t\t\tthis.$t('members.members_21')\r\n\t\t\t],\r\n\t\t\tform: {\r\n\t\t\t\ttime: '',\r\n\t\t\t\ttime2: '',\r\n\t\t\t\ttime3: '',\r\n\t\t\t\tgameMode: -1,\r\n\t\t\t\tplayerLoginName: '',\r\n\t\t\t\tid: '',\r\n\t\t\t\troundNo: '',\r\n\t\t\t\tgameType: -1,\r\n\t\t\t\tsearchAgentId: '',\r\n\t\t\t\tloginIp: '',\r\n\t\t\t\tstartBetAmount: '',\r\n\t\t\t\tendBetAmount: '',\r\n\t\t\t\tstatus: -1,\r\n\t\t\t\tlimitRed: -1,\r\n\t\t\t\tminValidBetAmount: '',\r\n\t\t\t\tmaxValidBetAmount: '',\r\n\t\t\t\tminNetAmount: '',\r\n\t\t\t\tmaxNetAmount: '',\r\n\t\t\t\tminBetAmount: '',\r\n\t\t\t\tmaxBetAmount: '',\r\n\t\t\t\tminBetCount: '',\r\n\t\t\t\tmaxBetCount: '',\r\n\t\t\t\tminWinRate: '',\r\n\t\t\t\tmaxWinRate: ''\r\n\t\t\t},\r\n\t\t\tdialogform: {\r\n\t\t\t\tlimitRed: -1\r\n\t\t\t},\r\n\t\t\tamountData: {\r\n\t\t\t\ttotalPlayerNum: '-',\r\n\t\t\t\tnetAmountSum: '-',\r\n\t\t\t\tapiRate: '-',\r\n\t\t\t\tpaymentAmountSum: '-',\r\n\t\t\t\tnetRate: '-'\r\n\t\t\t},\r\n\t\t\tvideoSrc: '',\r\n\t\t\tshowVideo: false,\r\n\t\t\tcurrentData: {},\r\n\t\t\tuserAgentType: '',\r\n\t\t\ttotalPeople: 0,\r\n\t\t\tdetailVisible: false,\r\n\t\t\t// 是否展示列表选择\r\n\t\t\tisShowChoiceColumn: false,\r\n\t\t\tprevIndex: 1,\r\n\t\t\ttableKey: +new Date(),\r\n\t\t\tmultipleSelection: [],\r\n\t\t\tbetLimits: [],\r\n\t\t\ttype: 1, // 0是当前页面,1是单独,2是全部\r\n\t\t\tpageSizes: [5, 10, 20, 50, 100, 200, 500, 2000],\r\n\t\t\thandleLoading: false,\r\n\t\t\ttotalNum: 0,\r\n\t\t\thandleText: this.$t('merchant_limitmanage_index_45'),\r\n\t\t\tmultipleSelectionLength: 0,\r\n\t\t\tallDataLength: 0,\r\n\t\t\tselectKey: +Date.now(),\r\n\t\t\ttab: 'base',\r\n\t\t\tactiveName: 'base'\r\n\t\t}\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\t...mapGetters(['userInfo']),\r\n\t\t...mapGetters(['globalDics']),\r\n\t\tgametype() {\r\n\t\t\tconst types = this.globalDics.gametype || []\r\n\t\t\treturn types.map((item) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tvalue: item.value,\r\n\t\t\t\t\tlabel: item.text,\r\n\t\t\t\t\tzh: item.text,\r\n\t\t\t\t\ten: item.englishText\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\tdestroyed () {\r\n\t\twindow.clearInterval(window.handleTimer)\r\n\t},\r\n\tmethods: {\r\n\t\thandleClick({ name }, event) {\r\n\t\t\tthis.tab = name\r\n\t\t\tthis.activeName = name\r\n\t\t\tthis.handleReset()\r\n\t\t\tthis.list = []\r\n\t\t\tthis.total = 0\r\n\t\t\tthis.allDataLength = 0\r\n\t\t\tthis.totalNum = 0\r\n\t\t},\r\n\t\t// 失去焦点的时候重置\r\n\t\tonTimeBlur() {\r\n\t\t\tthis.minDate = null\r\n\t\t},\r\n\t\tgetAmoutColor(value) {\r\n\t\t\tif (value > 0) {\r\n\t\t\t\treturn 'green'\r\n\t\t\t} else if (value < 0) {\r\n\t\t\t\treturn 'red'\r\n\t\t\t}\r\n\t\t\treturn ''\r\n\t\t},\r\n\t\tloadData() {\r\n\t\t\tconst reg = /(^(\\d|[1-9]\\d)(\\.\\d{1,2})?$)|(^100$)/\r\n\t\t\tif (this.form.minWinRate && !reg.test(this.form.minWinRate)) {\r\n\t\t\t\treturn this.$message({\r\n\t\t\t\t\tmessage: this.$t('merchant_limitmanage_index_466'),\r\n\t\t\t\t\ttype: 'error'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tif (this.form.maxWinRate && !reg.test(this.form.maxWinRate)) {\r\n\t\t\t\treturn this.$message({\r\n\t\t\t\t\tmessage: this.$t('merchant_limitmanage_index_466'),\r\n\t\t\t\t\ttype: 'error'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tif (\r\n\t\t\t\tthis.form.minWinRate &&\r\n\t\t\t\tthis.form.maxWinRate &&\r\n\t\t\t\tNumber(this.form.minWinRate) > Number(this.form.maxWinRate)\r\n\t\t\t) {\r\n\t\t\t\treturn this.$message({\r\n\t\t\t\t\tmessage: this.$t('merchant_limitmanage_index_466'),\r\n\t\t\t\t\ttype: 'error'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tthis.type = 0\r\n\t\t\tif (this.loading) return\r\n\t\t\tthis.loading = true\r\n\r\n\t\t\tconst initData = {\r\n\t\t\t\tpageSize: this.pageSize,\r\n\t\t\t\tpageIndex: this.pageIndex,\r\n\t\t\t\tstartTime: this.form.time[0],\r\n\t\t\t\tendTime: this.form.time[1],\r\n\t\t\t\tsearchAgentId: this.form.agentId,\r\n\t\t\t\tstartLoginTime: this.form.time2[0],\r\n\t\t\t\tendLoginTime: this.form.time2[1],\r\n\t\t\t\tstatus: this.form.status,\r\n\t\t\t\tplayerLoginName: this.form.playerLoginName,\r\n\t\t\t\tlimitRed: this.form.limitRed,\r\n\t\t\t\tstartBetTime: this.form.time3[0],\r\n\t\t\t\tendBetTime: this.form.time3[1],\r\n\t\t\t\tminValidBetAmount: this.form.minValidBetAmount,\r\n\t\t\t\tmaxValidBetAmount: this.form.maxValidBetAmount,\r\n\t\t\t\tminNetAmount: this.form.minNetAmount,\r\n\t\t\t\tmaxNetAmount: this.form.maxNetAmount,\r\n\t\t\t\tminBetAmount: this.form.minBetAmount,\r\n\t\t\t\tmaxBetAmount: this.form.maxBetAmount,\r\n\t\t\t\tminBetCount: this.form.minBetCount,\r\n\t\t\t\tmaxBetCount: this.form.maxBetCount,\r\n\t\t\t\tminWinRate: this.form.minWinRate,\r\n\t\t\t\tmaxWinRate: this.form.maxWinRate,\r\n\t\t\t\ttab: this.tab,\r\n\t\t\t\ttype: this.activeName === 'base' ? 1 : 2\r\n\t\t\t}\r\n\r\n\t\t\tthis.$api\r\n\t\t\t\t.playerLimitList(initData)\r\n\t\t\t\t.then((_) => {\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\tif (_.code === 200) {\r\n\t\t\t\t\t\tconst data = _.data\r\n\t\t\t\t\t\tthis.list = data.record\r\n\t\t\t\t\t\tthis.amountData = data.summary || {\r\n\t\t\t\t\t\t\ttotalPlayerNum: '-',\r\n\t\t\t\t\t\t\tnetAmountSum: '-',\r\n\t\t\t\t\t\t\tapiRate: '-',\r\n\t\t\t\t\t\t\tpaymentAmountSum: '-',\r\n\t\t\t\t\t\t\tnetRate: '-'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.pageIndex = this.prevIndex\r\n\t\t\t\t\tthis.list = []\r\n\t\t\t\t\tthis.amountData = {\r\n\t\t\t\t\t\ttotalPlayerNum: '-',\r\n\t\t\t\t\t\tnetAmountSum: '-',\r\n\t\t\t\t\t\tapiRate: '-',\r\n\t\t\t\t\t\tpaymentAmountSum: '-',\r\n\t\t\t\t\t\tnetRate: '-'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t})\r\n\r\n\t\t\tthis.$api\r\n\t\t\t\t.playerLimitSum(initData)\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\tconst data = res.data\r\n\t\t\t\t\t\tthis.total = data.totalRecord\r\n\t\t\t\t\t\tthis.allDataLength = this.total\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.total = 0\r\n\t\t\t\t\tthis.allDataLength = 0\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t})\r\n\r\n\t\t\tthis.$api.memberBetLimitList({ type: 1 }).then((_) => {\r\n\t\t\t\tif (_.code === 200) {\r\n\t\t\t\t\tthis.betLimits = _.data || []\r\n\t\t\t\t\tthis.dialogform.limitRed = this.betLimits[0].id\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\thandleCurrentChange(val) {\r\n\t\t\tthis.prevIndex = this.pageIndex\r\n\t\t\tthis.pageIndex = val\r\n\t\t\tthis.loadData()\r\n\t\t},\r\n\t\thandleReset() {\r\n\t\t\tif (this.$route.query && JSON.stringify(this.$route.query) !== '{}') {\r\n\t\t\t\trouter.push(this.$route.path, () => {\r\n\t\t\t\t\tthis.resetCommon()\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tthis.resetCommon()\r\n\t\t\t}\r\n\t\t},\r\n\t\tresetCommon() {\r\n\t\t\tthis.form = {\r\n\t\t\t\ttime: '',\r\n\t\t\t\ttime2: '',\r\n\t\t\t\ttime3: '',\r\n\t\t\t\tgameMode: -1,\r\n\t\t\t\tplayerLoginName: '',\r\n\t\t\t\tid: '',\r\n\t\t\t\troundNo: '',\r\n\t\t\t\tgameType: -1,\r\n\t\t\t\tsearchAgentId: '',\r\n\t\t\t\tloginIp: '',\r\n\t\t\t\tstartBetAmount: '',\r\n\t\t\t\tendBetAmount: '',\r\n\t\t\t\tstatus: -1,\r\n\t\t\t\tlimitRed: -1,\r\n\t\t\t\tminValidBetAmount: '',\r\n\t\t\t\tmaxValidBetAmount: '',\r\n\t\t\t\tminNetAmount: '',\r\n\t\t\t\tmaxNetAmount: '',\r\n\t\t\t\tminBetAmount: '',\r\n\t\t\t\tmaxBetAmount: '',\r\n\t\t\t\tminBetCount: '',\r\n\t\t\t\tmaxBetCount: '',\r\n\t\t\t\tminWinRate: '',\r\n\t\t\t\tmaxWinRate: ''\r\n\t\t\t}\r\n\t\t\tthis.$refs.ParentTable.clearSort()\r\n\t\t\tthis.tableKey = +new Date()\r\n\t\t\tthis.selectKey = +Date.now()\r\n\t\t\tthis.initList()\r\n\t\t},\r\n\t\thandleSearch() {\r\n\t\t\tthis.pageIndex = 1\r\n\t\t\tthis.loadData()\r\n\t\t},\r\n\t\tgetSummaries(param) {\r\n\t\t\tconst { columns } = param\r\n\t\t\tconst sums = []\r\n\t\t\tcolumns.forEach((column, index) => {\r\n\t\t\t\tif (!column.property && index === 0) {\r\n\t\t\t\t\tsums[index] = this.$t('members_betrecord_index_580')\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (column.property === 'roundNo') {\r\n\t\t\t\t\tsums[index] =\r\n\t\t\t\t\t\tthis.$t('members_betrecord_index_554') +\r\n\t\t\t\t\t\tthis.formatCurrency(this.amountData[`betAmountSum`])\r\n\t\t\t\t}\r\n\t\t\t\tif (column.property === 'agentName') {\r\n\t\t\t\t\tsums[index] =\r\n\t\t\t\t\t\tthis.$t('members_betrecord_index_555') +\r\n\t\t\t\t\t\tthis.formatCurrency(this.amountData[`validBetAmountSum`])\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (column.property === 'playerLoginName') {\r\n\t\t\t\t\tsums[index] =\r\n\t\t\t\t\t\tthis.$t('members_betrecord_index_556') +\r\n\t\t\t\t\t\tthis.formatCurrency(this.amountData[`payAmountSum`])\r\n\t\t\t\t}\r\n\t\t\t\tif (column.property === 'betAt') {\r\n\t\t\t\t\tsums[index] =\r\n\t\t\t\t\t\tthis.$t('members_betrecord_index_557') +\r\n\t\t\t\t\t\tthis.formatCurrency(this.amountData[`netAmountSum`])\r\n\t\t\t\t}\r\n\t\t\t\tif (column.property === 'betPoint') {\r\n\t\t\t\t\tsums[index] =\r\n\t\t\t\t\t\tthis.$t('members_betrecord_index_558') + this.amountData[`apiRate`]\r\n\t\t\t\t}\r\n\t\t\t\tif (column.property === 'betAmount') {\r\n\t\t\t\t\tsums[index] =\r\n\t\t\t\t\t\tthis.$t('members_betrecord_index_559') +\r\n\t\t\t\t\t\tthis.amountData[`paymentAmountSum`]\r\n\t\t\t\t}\r\n\t\t\t\tif (column.property === 'validBetAmount') {\r\n\t\t\t\t\tsums[index] =\r\n\t\t\t\t\t\tthis.$t('members_betrecord_index_560') + this.amountData[`netRate`]\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\treturn sums\r\n\t\t},\r\n\t\tcheckDetail(type, row) {\r\n\t\t\tthis.type = type\r\n\r\n\t\t\t// \t0是当前页面,1是单独,2是全部\r\n\t\t\tif (this.type === 0 && this.multipleSelection.length <= 0) {\r\n\t\t\t\treturn this.$message({\r\n\t\t\t\t\tmessage: this.$t('merchant_limitmanage_index_46'),\r\n\t\t\t\t\ttype: 'error'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tif (this.type === 2 && this.allDataLength <= 0) {\r\n\t\t\t\treturn this.$message({\r\n\t\t\t\t\tmessage: this.$t('merchant_limitmanage_index_46'),\r\n\t\t\t\t\ttype: 'error'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tif (this.type) {\r\n\t\t\t\tif (this.type === 1) {\r\n\t\t\t\t\tconsole.log('222')\r\n\t\t\t\t\tthis.dialogform.limitRed = row.limitRed\r\n\t\t\t\t\tthis.$refs.ParentTable.clearSelection()\r\n\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\tthis.type = 1\r\n\t\t\t\t\t\tthis.multipleSelection = []\r\n\t\t\t\t\t\tthis.multipleSelectionLength = 1\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tif (this.type === 2) {\r\n\t\t\t\t\tthis.$refs.ParentTable.clearSelection()\r\n\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\tthis.type = 2\r\n\t\t\t\t\t\tthis.allDataLength = this.total\r\n\t\t\t\t\t\tthis.multipleSelection = []\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.multipleSelectionLength = this.multipleSelection.length\r\n\t\t\t}\r\n\r\n\t\t\tthis.detailVisible = true\r\n\t\t\tthis.currentData = { ...row }\r\n\t\t},\r\n\t\tshowChoiceColumn() {\r\n\t\t\tthis.isShowChoiceColumn = !this.isShowChoiceColumn\r\n\t\t},\r\n\t\tshowResult(row) {\r\n\t\t\tthis.dialogShow = true\r\n\t\t\tthis.currentData = { ...row }\r\n\t\t},\r\n\t\thandleShowVideo(path, row) {\r\n\t\t\tthis.showVideo = true\r\n\t\t\tthis.videoSrc = path\r\n\t\t\tthis.currentData = { ...row }\r\n\t\t},\r\n\t\tclearSrc() {\r\n\t\t\tthis.videoSrc = ''\r\n\t\t},\r\n\t\tshowHistory(row) {\r\n\t\t\tif (this.hasPermission(119000015)) {\r\n\t\t\t\tif (row.betFlag === 2 || row.betFlag === 4) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t} else if (row.gameTypeId === 2012 && row.betFlag === 1) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t},\r\n\t\tfilterGametype(c) {\r\n\t\t\tconst arr = this.gametype || []\r\n\t\t\tconst find = arr.find((item) => item.label === c)\r\n\t\t\tif (Cookies.get('language') === 'zh') {\r\n\t\t\t\treturn (find && find.zh) || '-'\r\n\t\t\t}\r\n\t\t\tif (Cookies.get('language') === 'en') {\r\n\t\t\t\treturn (find && find.en) || '-'\r\n\t\t\t}\r\n\t\t\treturn '-'\r\n\t\t},\r\n\t\thandleSelectionChange(val) {\r\n\t\t\tthis.type = 0\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.multipleSelection = val\r\n\t\t\t\tthis.multipleSelectionLength = val.length\r\n\t\t\t})\r\n\t\t},\r\n\t\tcancel() {\r\n\t\t\tthis.multipleSelectionLength = this.multipleSelection.length\r\n\t\t\tthis.dialogform.limitRed = this.betLimits[0].id\r\n\t\t\tthis.detailVisible = false\r\n\t\t},\r\n\t\thandleSure() {\r\n\t\t\tconsole.log('this.type :>> ', this.type)\r\n\t\t\tif (this.type === 1) {\r\n\t\t\t\tthis.$api\r\n\t\t\t\t\t.updateLimit({\r\n\t\t\t\t\t\tbetLimitId: this.dialogform.limitRed,\r\n\t\t\t\t\t\tplayerId: this.currentData.playerId\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\tmessage({\r\n\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\tmessage: this.$t('systemmanagement_domain_index_1380')\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.multipleSelectionLength = 0\r\n\t\t\t\t\t\tthis.loadData()\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tif (this.type === 0) {\r\n\t\t\t\tconst playerIdList = this.multipleSelection.map((i) => i.playerId)\r\n\t\t\t\tconst length = this.multipleSelection.length\r\n\r\n\t\t\t\tthis.$api\r\n\t\t\t\t\t.batchUpdateLimit({\r\n\t\t\t\t\t\tplayerIdList,\r\n\t\t\t\t\t\tbetLimitId: this.dialogform.limitRed\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\tconst { data } = res\r\n\t\t\t\t\t\tthis.handleLoading = true\r\n\r\n\t\t\t\t\t\twindow.handleTimer = setInterval(async () => {\r\n\t\t\t\t\t\t\tconst response = await this.$api.checkUpdatedLimit({\r\n\t\t\t\t\t\t\t\ttotalMessageId: data\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthis.totalNum = response.data.successTotalNum\r\n\r\n\t\t\t\t\t\t\tif (this.totalNum) {\r\n\t\t\t\t\t\t\t\tthis.handleText =\r\n\t\t\t\t\t\t\t\t\tthis.$t('merchant_limitmanage_index_47') +\r\n\t\t\t\t\t\t\t\t\tparseInt((this.totalNum / length) * 100) +\r\n\t\t\t\t\t\t\t\t\t'%'\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.handleText = this.$t('merchant_limitmanage_index_47') + '0%'\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (this.totalNum === this.multipleSelection.length) {\r\n\t\t\t\t\t\t\t\tthis.loadData()\r\n\t\t\t\t\t\t\t\twindow.clearInterval(window.handleTimer)\r\n\t\t\t\t\t\t\t\twindow.handleTimer = null\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthis.handleLoading = false\r\n\t\t\t\t\t\t}, 1500)\r\n\t\t\t\t\t\tthis.multipleSelectionLength = 0\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tif (this.type === 2) {\r\n\t\t\t\tthis.$api\r\n\t\t\t\t\t.allSelectBatchUpdateLimit({\r\n\t\t\t\t\t\tpageSize: this.pageSize,\r\n\t\t\t\t\t\tpageIndex: this.pageIndex,\r\n\t\t\t\t\t\tstartTime: this.form.time[0],\r\n\t\t\t\t\t\tendTime: this.form.time[1],\r\n\t\t\t\t\t\tsearchAgentId: this.form.agentId,\r\n\t\t\t\t\t\tstartLoginTime: this.form.time2[0],\r\n\t\t\t\t\t\tendLoginTime: this.form.time2[1],\r\n\t\t\t\t\t\tstatus: this.form.status,\r\n\t\t\t\t\t\tplayerLoginName: this.form.playerLoginName,\r\n\t\t\t\t\t\tlimitRed: this.form.limitRed,\r\n\t\t\t\t\t\tstartBetTime: this.form.time3[0],\r\n\t\t\t\t\t\tendBetTime: this.form.time3[1],\r\n\t\t\t\t\t\tminValidBetAmount: this.form.minValidBetAmount,\r\n\t\t\t\t\t\tmaxValidBetAmount: this.form.maxValidBetAmount,\r\n\t\t\t\t\t\tminNetAmount: this.form.minNetAmount,\r\n\t\t\t\t\t\tmaxNetAmount: this.form.maxNetAmount,\r\n\t\t\t\t\t\tminBetAmount: this.form.minBetAmount,\r\n\t\t\t\t\t\tmaxBetAmount: this.form.maxBetAmount,\r\n\t\t\t\t\t\tminBetCount: this.form.minBetCount,\r\n\t\t\t\t\t\tmaxBetCount: this.form.maxBetCount,\r\n\t\t\t\t\t\tminWinRate: this.form.minWinRate,\r\n\t\t\t\t\t\tmaxWinRate: this.form.maxWinRate,\r\n\t\t\t\t\t\tupdateLimitRed: this.dialogform.limitRed,\r\n\t\t\t\t\t\ttype: this.activeName === 'base' ? 1 : 2\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\tconst { data } = res\r\n\t\t\t\t\t\tthis.handleLoading = true\r\n\r\n\t\t\t\t\t\twindow.handleTimer = setInterval(async () => {\r\n\t\t\t\t\t\t\tconst response = await this.$api.checkUpdatedLimit({\r\n\t\t\t\t\t\t\t\ttotalMessageId: data\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthis.totalNum = response.data.successTotalNum\r\n\t\t\t\t\t\t\tthis.totalPeople = response.data.totalNum\r\n\r\n\t\t\t\t\t\t\tif (this.totalNum) {\r\n\t\t\t\t\t\t\t\tthis.handleText =\r\n\t\t\t\t\t\t\t\t\tthis.$t('merchant_limitmanage_index_47') +\r\n\t\t\t\t\t\t\t\t\tparseInt((this.totalNum / this.totalPeople) * 100) +\r\n\t\t\t\t\t\t\t\t\t'%'\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.handleText = this.$t('merchant_limitmanage_index_47') + '0%'\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (this.totalNum >= this.totalPeople) {\r\n\t\t\t\t\t\t\t\tthis.loadData()\r\n\t\t\t\t\t\t\t\twindow.clearInterval(window.handleTimer)\r\n\t\t\t\t\t\t\t\twindow.handleTimer = null\r\n\t\t\t\t\t\t\t\tthis.handleLoading = false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 1500)\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tthis.detailVisible = false\r\n\t\t}\r\n\t}\r\n}\r\n",null]}