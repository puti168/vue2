{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\layout\\components\\Navbar.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\layout\\components\\Navbar.vue","mtime":1617691678353},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { formatCurrency } from '@/utils'\r\nimport { mapGetters } from 'vuex'\r\nimport Breadcrumb from '@/components/Breadcrumb'\r\nimport Hamburger from '@/components/Hamburger'\r\nimport LangSelect from '@/components/LangSelect'\r\nimport router from '@/router'\r\nimport dayjs from 'dayjs'\r\nimport utc from 'dayjs/plugin/utc'\r\nimport { getToken } from '@/utils/auth'\r\nexport default {\r\n\tcomponents: {\r\n\t\tBreadcrumb,\r\n\t\tHamburger,\r\n\t\tLangSelect\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tshowMemberInfo: false,\r\n\t\t\ttableData: [],\r\n\t\t\tloading: false,\r\n\t\t\tnowMonth: '',\r\n\t\t\tnowSecond: '',\r\n\t\t\tweek: '',\r\n\t\t\ttimer2: '',\r\n\t\t\ttimer: ''\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters(['name', 'sidebar', 'avatar', 'userInfo']),\r\n\t\tmyavatar() {\r\n\t\t\treturn this.avatar || require('@/assets/img/avatar.png')\r\n\t\t},\r\n\t\tenv() {\r\n\t\t\treturn process.env.NODE_ENV === 'development'\r\n\t\t},\r\n\t\tweeks() {\r\n\t\t\tconst arr = [\r\n\t\t\t\tthis.$t('week0'),\r\n\t\t\t\tthis.$t('week1'),\r\n\t\t\t\tthis.$t('week2'),\r\n\t\t\t\tthis.$t('week3'),\r\n\t\t\t\tthis.$t('week4'),\r\n\t\t\t\tthis.$t('week5'),\r\n\t\t\t\tthis.$t('week6')\r\n\t\t\t]\r\n\t\t\treturn arr\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tdayjs.extend(utc)\r\n\t\tthis.timer = setInterval(this.refresh, 1000)\r\n\t\tif (Number(this.userInfo.mainFlag) === 1) {\r\n\t\t\tthis.onlineAgentList()\r\n\t\t\tthis.timer2 = setInterval(this.onlineAgentList, 300000)\r\n\t\t}\r\n\t\tconsole.log(getToken())\r\n\t\tif (getToken()) {\r\n\t\t\tthis.$store.dispatch('user/queryUserInfo', this.$store.state.user.userInfo)\r\n\t\t}\r\n\t\tconsole.log('userInfo ===>')\r\n\t\tconsole.log(this.userInfo)\r\n\t},\r\n\tdestroyed() {\r\n\t\tclearInterval(this.timer)\r\n\t\tclearInterval(this.timer2)\r\n\t},\r\n\tmethods: {\r\n\t\tpeopleNumber() {\r\n\t\t\tthis.onlineAgentList()\r\n\t\t},\r\n\t\tformatCurrency,\r\n\t\ttoggleSideBar() {\r\n\t\t\tthis.$store.dispatch('app/toggleSideBar')\r\n\t\t},\r\n\t\tgetBeijingtime() {\r\n\t\t\t// 获得当前运行环境时间\r\n\t\t\tconst d = new Date()\r\n\t\t\tconst currentDate = new Date()\r\n\t\t\tconst tmpHours = currentDate.getHours()\r\n\t\t\t// 算得时区\r\n\t\t\tlet time_zone = -d.getTimezoneOffset() / 60\r\n\t\t\tif (time_zone < 0) {\r\n\t\t\t\ttime_zone = Math.abs(time_zone) + 8\r\n\t\t\t\tcurrentDate.setHours(tmpHours + time_zone)\r\n\t\t\t} else {\r\n\t\t\t\ttime_zone -= 8\r\n\t\t\t\tcurrentDate.setHours(tmpHours - time_zone)\r\n\t\t\t}\r\n\t\t\treturn currentDate\r\n\t\t},\r\n\t\trefresh() {\r\n\t\t\tthis.nowMonth = dayjs()\r\n\t\t\t\t.utc()\r\n\t\t\t\t.utcOffset(8)\r\n\t\t\t\t.format('YYYY-MM-DD')\r\n\t\t\tthis.nowSecond = dayjs()\r\n\t\t\t\t.utc()\r\n\t\t\t\t.utcOffset(8)\r\n\t\t\t\t.format('HH:mm:ss')\r\n\t\t\tconst day = this.getBeijingtime().getDay()\r\n\t\t\tthis.week = this.weeks[day]\r\n\t\t},\r\n\t\tasync loginOut() {\r\n\t\t\tawait this.$store.dispatch('user/logout')\r\n\t\t\tawait this.$store.dispatch('permission/clearRoutes')\r\n\t\t\tthis.$store.dispatch('tree/setTree', [])\r\n\t\t\tthis.$store.dispatch('tree/setTreeData', [])\r\n\t\t\tthis.$router.push(`/login?redirect=${router.history.current.fullPath}`)\r\n\t\t},\r\n\t\tgetRowClass({ row, column, rowIndex, columnIndex }) {\r\n\t\t\tif (rowIndex === 0) {\r\n\t\t\t\treturn 'background:#EFEFEF; text-align: center;'\r\n\t\t\t} else {\r\n\t\t\t\treturn ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModify() {\r\n\t\t\tthis.$store.dispatch('app/setModify', true)\r\n\t\t},\r\n\t\tgoAPI() {\r\n\t\t\tthis.loading = true\r\n\t\t\tthis.$api\r\n\t\t\t\t.getApiDocumentList({\r\n\t\t\t\t\ttextType: -1,\r\n\t\t\t\t\tpageSize: 1,\r\n\t\t\t\t\tpageIndex: 1\r\n\t\t\t\t})\r\n\t\t\t\t.then((_) => {\r\n\t\t\t\t\tif (_.code === 200) {\r\n\t\t\t\t\t\tconst data = _.data\r\n\t\t\t\t\t\twindow.open(data.record[0].fileLink)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {})\r\n\t\t},\r\n\t\tonlineAgentList() {\r\n\t\t\tthis.$api\r\n\t\t\t\t.onlineAgentList({\r\n\t\t\t\t\tagentId: this.userInfo.agentId\r\n\t\t\t\t})\r\n\t\t\t\t.then((_) => {\r\n\t\t\t\t\tif (_.code === 200) {\r\n\t\t\t\t\t\tthis.tableData = _.data\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {})\r\n\t\t}\r\n\t}\r\n}\r\n",null]}