{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\operationManage\\dealerReward\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\operationManage\\dealerReward\\index.vue","mtime":1617695097433},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { mapGetters } from 'vuex'\r\nimport list from '@/mixins/list'\r\nimport SelectAgentTree from '@/components/SelectAgentTree'\r\nimport { routerNames } from '@/utils/consts'\r\nimport Cookies from 'js-cookie'\r\nimport dayjs from 'dayjs'\r\nexport default {\r\n\tname: routerNames.dealerReward,\r\n\tcomponents: {\r\n\t\tSelectAgentTree\r\n\t},\r\n\tmixins: [list],\r\n\tdata() {\r\n\t\tconst end = dayjs().endOf('day')\r\n\t\tconst start = dayjs().startOf('day')\r\n\t\treturn {\r\n\t\t\ttypeList: [\r\n\t\t\t\t{\r\n\t\t\t\t\tname: this.$t('abnormalround_merchants_index_8'),\r\n\t\t\t\t\tvalue: ''\r\n\t\t\t\t},\r\n\t\t\t\t{ name: this.$t('route.dealerReward2'), value: 1 },\r\n\t\t\t\t{ name: this.$t('new_600'), value: 2 },\r\n\t\t\t\t{ name: this.$t('new_6000'), value: 3 }\r\n\t\t\t],\r\n\t\t\tform: {\r\n\t\t\t\ttime: [+start, +end],\r\n\t\t\t\tagentId: '',\r\n\t\t\t\tcreatedAtEnd: '',\r\n\t\t\t\tcreatedAtStart: '',\r\n\t\t\t\tdealerName: '',\r\n\t\t\t\tgameTypeId: -1,\r\n\t\t\t\tid: '',\r\n\t\t\t\tplayerName: '',\r\n\t\t\t\trewardAmountMax: '',\r\n\t\t\t\trewardAmountMin: '',\r\n\t\t\t\trewardType: '',\r\n\t\t\t\ttableName: ''\r\n\t\t\t},\r\n\t\t\tamountData: {\r\n\t\t\t\ttotalRewardNumber: '-',\r\n\t\t\t\ttotalRewardAmount: '-',\r\n\t\t\t\tagentShare: '-'\r\n\t\t\t},\r\n\t\t\t// 分割线\r\n\t\t\tcardDeatilText1: '',\r\n\t\t\tcardDeatilText2: '',\r\n\t\t\tcardDeatilText3: '',\r\n\t\t\tdrawer: false,\r\n\t\t\tipData: null,\r\n\t\t\tloading: false,\r\n\t\t\treleaseTime: '',\r\n\t\t\tbetDialogVisible: false,\r\n\t\t\tdialogShow: false,\r\n\t\t\tdialogShow2: false,\r\n\t\t\tbetStatusList: [\r\n\t\t\t\tthis.$t('members.members_16'),\r\n\t\t\t\tthis.$t('members.members_17'),\r\n\t\t\t\tthis.$t('members.members_18'),\r\n\t\t\t\tthis.$t('members.members_19'),\r\n\t\t\t\tthis.$t('members.members_20'),\r\n\t\t\t\tthis.$t('members.members_21')\r\n\t\t\t],\r\n\t\t\tvideoSrc: '',\r\n\t\t\tshowVideo: false,\r\n\t\t\tcurrentData: {},\r\n\t\t\tcurrentData2: {},\r\n\t\t\tuserAgentType: '',\r\n\t\t\tdetailVisible: false,\r\n\t\t\tprevIndex: 1,\r\n\t\t\tdefaultSort: { prop: 'betAt', order: 'descending' },\r\n\t\t\ttableKey: +new Date(),\r\n\t\t\troundNo: '',\r\n\t\t\tplatforms: []\r\n\t\t}\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\t...mapGetters(['userInfo', 'globalDics']),\r\n\t\tgametype() {\r\n\t\t\tconst types = this.globalDics.gametype || []\r\n\t\t\treturn types.map((item) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tvalue: item.value,\r\n\t\t\t\t\tlabel: item.text,\r\n\t\t\t\t\tzh: item.text,\r\n\t\t\t\t\ten: item.englishText\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\twatch: {},\r\n\tmounted() {},\r\n\tdestroyed() {},\r\n\tmethods: {\r\n\t\t// 失去焦点的时候重置\r\n\t\tonTimeBlur() {\r\n\t\t\tthis.minDate = null\r\n\t\t},\r\n\t\tgetSummaries(param) {\r\n\t\t\tconst { columns } = param\r\n\t\t\tconst sums = []\r\n\t\t\tcolumns.forEach((column, index) => {\r\n\t\t\t\tif (index === 0) {\r\n\t\t\t\t\tsums[index] = this.$t('new_63')\r\n\t\t\t\t}\r\n\t\t\t\tif (index === 4) {\r\n\t\t\t\t\tsums[index] = this.$t('new_64') + this.amountData[`totalRewardNumber`]\r\n\t\t\t\t}\r\n\t\t\t\tif (index === 5) {\r\n\t\t\t\t\tsums[index] = this.$t('new_65') + this.amountData[`totalRewardAmount`]\r\n\t\t\t\t}\r\n\t\t\t\tif (index === 6) {\r\n\t\t\t\t\tsums[index] = this.$t('new_66') + this.amountData[`agentShare`]\r\n\t\t\t\t}\r\n\t\t\t\tif (column.property === 'badAmount') {\r\n\t\t\t\t\tsums[index] = this.formatCurrency(this.summary[`badAmount`])\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\treturn sums\r\n\t\t},\r\n\t\tloadData() {\r\n\t\t\tthis.loading = true\r\n\t\t\tconst initData = {\r\n\t\t\t\tpageSize: this.pageSize,\r\n\t\t\t\tpageIndex: this.pageIndex,\r\n\t\t\t\tcreatedAtStart: this.form.time[0],\r\n\t\t\t\tcreatedAtEnd: this.form.time[1],\r\n\t\t\t\tagentId: this.form.agentId,\r\n\t\t\t\tgameTypeId: this.form.gameTypeId,\r\n\t\t\t\tid: this.form.id,\r\n\t\t\t\trewardName: this.form.rewardName,\r\n\t\t\t\ttableName: this.form.tableName,\r\n\t\t\t\tdealerName: this.form.dealerName,\r\n\t\t\t\tplayerName: this.form.playerName,\r\n\t\t\t\trewardAmountMax: this.form.rewardAmountMax,\r\n\t\t\t\trewardAmountMin: this.form.rewardAmountMin,\r\n\t\t\t\trewardType: this.form.rewardType,\r\n\t\t\t\troundNo: this.form.roundNo\r\n\t\t\t}\r\n\t\t\tthis.$api\r\n\t\t\t\t.rewardList(initData)\r\n\t\t\t\t.then((_) => {\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\tif (_.code === 200) {\r\n\t\t\t\t\t\tconst data = _.data\r\n\t\t\t\t\t\tthis.list = data.record\r\n\t\t\t\t\t\tthis.amountData = data.summary || {\r\n\t\t\t\t\t\t\ttotalRewardNumber: '-',\r\n\t\t\t\t\t\t\ttotalRewardAmount: '-',\r\n\t\t\t\t\t\t\tagentShare: '-'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.total = data.totalRecord\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.pageIndex = this.prevIndex\r\n\t\t\t\t\tthis.list = []\r\n\t\t\t\t\tthis.amountData = {\r\n\t\t\t\t\t\ttotalRewardNumber: '-',\r\n\t\t\t\t\t\ttotalRewardAmount: '-',\r\n\t\t\t\t\t\tagentShare: '-'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.total = 0\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t})\r\n\t\t},\r\n\t\ttypeFilter(value) {\r\n\t\t\tlet name = '-'\r\n\t\t\tthis.typeList.forEach((item) => {\r\n\t\t\t\tif (Number(item.value) === Number(value)) {\r\n\t\t\t\t\tname = item.name\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn name\r\n\t\t},\r\n\t\thandleCurrentChange(val) {\r\n\t\t\tthis.prevIndex = this.pageIndex\r\n\t\t\tthis.pageIndex = val\r\n\t\t\tthis.loadData()\r\n\t\t},\r\n\t\tresetCommon() {\r\n\t\t\tconst end = dayjs().endOf('day')\r\n\t\t\tconst start = dayjs().startOf('day')\r\n\t\t\tthis.form = {\r\n\t\t\t\ttime: [+start, +end],\r\n\t\t\t\tagentId: '',\r\n\t\t\t\tcreatedAtEnd: '',\r\n\t\t\t\tcreatedAtStart: '',\r\n\t\t\t\tdealerName: '',\r\n\t\t\t\tgameTypeId: -1,\r\n\t\t\t\tid: '',\r\n\t\t\t\tplayerName: '',\r\n\t\t\t\trewardAmountMax: '',\r\n\t\t\t\trewardAmountMin: '',\r\n\t\t\t\trewardType: '',\r\n\t\t\t\ttableName: ''\r\n\t\t\t}\r\n\t\t\tthis.tableKey = +new Date()\r\n\t\t\tthis.initList()\r\n\t\t},\r\n\t\tfilterGametype(c) {\r\n\t\t\tconst arr = this.gametype || []\r\n\t\t\tconst find = arr.find((item) => item.label === c)\r\n\t\t\tif (Cookies.get('language') === 'zh') {\r\n\t\t\t\treturn (find && find.zh) || '-'\r\n\t\t\t}\r\n\t\t\tif (Cookies.get('language') === 'en') {\r\n\t\t\t\treturn (find && find.en) || '-'\r\n\t\t\t}\r\n\t\t\treturn '-'\r\n\t\t},\r\n\t\tgo() {\r\n\t\t\tthis.$router.push('/operationManage/memberReward')\r\n\t\t},\r\n\t\tshowDailyDetail(row) {\r\n\t\t\tthis.$store.dispatch('tagsView/delView', {\r\n\t\t\t\tname: routerNames.betrecord\r\n\t\t\t})\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tconst targetUrl = '/members/betrecord'\r\n\t\t\t\tthis.$router.push(`${targetUrl}`)\r\n\t\t\t\tlocalStorage.setItem('playerId2', row.playerId)\r\n\t\t\t\tlocalStorage.setItem('roundNo2', row.roundNo)\r\n\t\t\t})\r\n\t\t},\r\n\t\thandleSearch() {\r\n\t\t\tthis.pageIndex = 1\r\n\t\t\tthis.loadData()\r\n\t\t},\r\n\t\tcheckDetail(row) {}\r\n\t}\r\n}\r\n",null]}