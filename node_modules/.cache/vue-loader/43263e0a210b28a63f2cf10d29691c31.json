{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\members\\list\\components\\IPLogin.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\members\\list\\components\\IPLogin.vue","mtime":1616384580066},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport HistoryRecord from './HistoryRecord'\r\nimport list from '@/mixins/list'\r\nimport { mapGetters } from 'vuex'\r\nimport dayjs from 'dayjs'\r\nimport Cookies from 'js-cookie'\r\n\r\nexport default {\r\n\tname: 'IPLogin',\r\n\tcomponents: { HistoryRecord },\r\n\tmixins: [list],\r\n\tprops: {\r\n\t\tdrawer: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: () => false\r\n\t\t},\r\n\t\tipdata: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => {}\r\n\t\t}\r\n\t},\r\n\tdoNotInit: true,\r\n\tdata() {\r\n\t\tconst end = dayjs()\r\n\t\t\t.endOf('day')\r\n\t\t\t.valueOf()\r\n\t\tconst start = dayjs()\r\n\t\t\t.startOf('day')\r\n\t\t\t.subtract(6, 'd')\r\n\t\t\t.valueOf()\r\n\t\treturn {\r\n\t\t\tloading: false,\r\n\t\t\telDrawer: true,\r\n\t\t\tform: {\r\n\t\t\t\ttime: [start, end]\r\n\t\t\t},\r\n\t\t\trecordData: null,\r\n\t\t\thistoryRecordShow: false\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters(['globalDics']),\r\n\t\tagenttype() {\r\n\t\t\treturn this.globalDics.agenttype\r\n\t\t},\r\n\t\tpickerOptions2() {\r\n\t\t\tconst _this = this\r\n\t\t\treturn {\r\n\t\t\t\tdisabledDate(time) {\r\n\t\t\t\t\t// 1.超过90天的查询时间，提示“起止时间不可超过90天”\r\n\t\t\t\t\t// 2.查询截至时间不可以超过当前时间\r\n\t\t\t\t\tconst before = dayjs(_this.minDate)\r\n\t\t\t\t\t\t.startOf('day')\r\n\t\t\t\t\t\t.subtract(89, 'days')\r\n\t\t\t\t\t\t.valueOf()\r\n\t\t\t\t\tconst after = dayjs(_this.minDate)\r\n\t\t\t\t\t\t.endOf('day')\r\n\t\t\t\t\t\t.add(89, 'days')\r\n\t\t\t\t\t\t.valueOf()\r\n\t\t\t\t\tconst now = dayjs()\r\n\t\t\t\t\t\t.endOf('day')\r\n\t\t\t\t\t\t.valueOf()\r\n\t\t\t\t\t// 如果after-now大于0,说明选择时间在当前时间90天之前\r\n\t\t\t\t\tif (after - now < 0) {\r\n\t\t\t\t\t\t// message({\r\n\t\t\t\t\t\t// \ttype: 'error',\r\n\t\t\t\t\t\t// \tmessage: '起止时间不可超过90天'\r\n\t\t\t\t\t\t// })\r\n\t\t\t\t\t\treturn time.getTime() > after || time.getTime() < before\r\n\t\t\t\t\t} else if (_this.minDate) {\r\n\t\t\t\t\t\treturn time.getTime() > now || time.getTime() < before\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn time.getTime() > now\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tonPick({ maxDate, minDate }) {\r\n\t\t\t\t\tif (!maxDate) {\r\n\t\t\t\t\t\t_this.minDate = minDate\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tdrawer: {\r\n\t\t\thandler(val) {\r\n\t\t\t\tthis.elDrawer = val\r\n\t\t\t},\r\n\t\t\timmediate: true\r\n\t\t},\r\n\t\tipdata: {\r\n\t\t\thandler(val) {\r\n\t\t\t\tconsole.log('val :', val)\r\n\t\t\t\tif (val) {\r\n\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\tthis.$refs.ipform.resetFields()\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.loadData()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\timmediate: true\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tloadData() {\r\n\t\t\tthis.loading = true\r\n\t\t\tconst form = {\r\n\t\t\t\tpageSize: this.pageSize,\r\n\t\t\t\tpageIndex: this.pageIndex,\r\n\t\t\t\tstartTime: this.form.time ? this.form.time[0] : this.form.time[0],\r\n\t\t\t\tendTime: this.form.time ? this.form.time[1] : this.form.time[1],\r\n\t\t\t\tplayerId: this.ipdata.playerId,\r\n\t\t\t\ttype: 0\r\n\t\t\t}\r\n\t\t\tthis.$api\r\n\t\t\t\t.memberLoginLog(form)\r\n\t\t\t\t.then((_) => {\r\n\t\t\t\t\tif (_.code === 200) {\r\n\t\t\t\t\t\tconst data = _.data\r\n\t\t\t\t\t\tthis.list = data.record\r\n\t\t\t\t\t\tthis.total = data.totalRecord\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tif (err) {\r\n\t\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t},\r\n\t\thandleIP(data) {\r\n\t\t\tthis.historyRecordShow = true\r\n\t\t\tthis.recordData = data\r\n\t\t},\r\n\t\thandleSearch() {\r\n\t\t\tif (!this.form.time || this.form.time === '') {\r\n\t\t\t\treturn this.$message({\r\n\t\t\t\t\tmessage: this.$t('members_list_components_iplogin_667'),\r\n\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\tduration: 5 * 1000\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tthis.minDate = null\r\n\t\t\tthis.loadData()\r\n\t\t},\r\n\t\thandleReset() {\r\n\t\t\tconst end = dayjs()\r\n\t\t\t\t.endOf('day')\r\n\t\t\t\t.valueOf()\r\n\t\t\tconst start = dayjs()\r\n\t\t\t\t.startOf('day')\r\n\t\t\t\t.subtract(6, 'd')\r\n\t\t\t\t.valueOf()\r\n\t\t\tthis.minDate = null\r\n\t\t\tthis.form = {\r\n\t\t\t\ttime: [start, end]\r\n\t\t\t}\r\n\t\t\tthis.initList()\r\n\t\t},\r\n\t\thandleCurrentChange() {\r\n\t\t\tthis.loadData()\r\n\t\t},\r\n\t\thandleClose() {\r\n\t\t\tthis.$emit('update:drawer', false)\r\n\t\t},\r\n\t\tgetEnName(row) {\r\n\t\t\tif (Cookies.get('language') === 'zh') {\r\n\t\t\t\treturn row.city\r\n\t\t\t}\r\n\t\t\tif (Cookies.get('language') === 'en') {\r\n\t\t\t\treturn row.cityEnglish\r\n\t\t\t}\r\n\t\t\treturn '-'\r\n\t\t}\r\n\t}\r\n}\r\n",null]}