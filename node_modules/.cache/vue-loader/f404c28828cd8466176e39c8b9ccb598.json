{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\components\\DateRangePicker\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\components\\DateRangePicker\\index.vue","mtime":1617594855279},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgUHJvcFR5cGVzIGZyb20gJ2FudC1kZXNpZ24tdnVlL2VzL191dGlsL3Z1ZS10eXBlcycNCmltcG9ydCB7IERhdGVwaWNrZXJNaXhpbiB9IGZyb20gJ0AvY29yZS9taXhpbnMnDQoNCmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50Jw0KZXhwb3J0IGRlZmF1bHQgew0KICBwcm9wczogew0KICAgIGRpc2FibGVkVHlwZTogUHJvcFR5cGVzLm9uZU9mKFsnMmRheScsICczMWRheScsICcxbW9udGgnLCB1bmRlZmluZWRdKS5kZWYodW5kZWZpbmVkKSwNCiAgICB2YWx1ZTogUHJvcFR5cGVzLmFycmF5LmRlZihbXSksDQogICAgYWxsb3dDbGVhcjogUHJvcFR5cGVzLmJvb2wuZGVmKHRydWUpLA0KICAgIHNob3dUaW1lOiBQcm9wVHlwZXMuYm9vbC5kZWYoZmFsc2UpLA0KICB9LA0KICBtaXhpbnM6IFtEYXRlcGlja2VyTWl4aW5dLA0KICBkYXRhKCkgew0KICAgIGNvbnN0IFtiZWdpblRpbWUsIGVuZFRpbWVdID0gdGhpcy52YWx1ZQ0KICAgIHJldHVybiB7DQogICAgICB0aW1lVmFsdWVzOiBbYmVnaW5UaW1lLCBlbmRUaW1lXSwNCiAgICAgIGxhc3RUaW1lVmFsdWVzOiBbYmVnaW5UaW1lLCBlbmRUaW1lXSwNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB0aGlzLmNvbmRpdGlvbikNCiAgICB0aGlzLiRlbWl0KCdjaGFuZ2UnLCB0aGlzLmNvbmRpdGlvbikNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIG9uQ2hhbmdlVGltZSh2YWx1ZSkgew0KICAgICAgaWYgKHRoaXMuaXNWYWxpZFRpbWUodmFsdWUpKSB7DQogICAgICAgIHRoaXMubGFzdFRpbWVWYWx1ZXMgPSB2YWx1ZQ0KICAgICAgfQ0KICAgICAgdGhpcy50aW1lVmFsdWVzID0gdmFsdWUNCiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgdGhpcy5jb25kaXRpb24pDQogICAgICB0aGlzLiRlbWl0KCdjaGFuZ2UnLCB0aGlzLmNvbmRpdGlvbikNCiAgICB9LA0KICAgIG9uQ2hhbmdlVGltZU9rKHZhbHVlKSB7DQogICAgICBpZiAoIXRoaXMuaXNWYWxpZFRpbWUodmFsdWUpKSB7DQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgdGhpcy5sYXN0VGltZVZhbHVlcyA9IHZhbHVlDQogICAgICB0aGlzLnRpbWVWYWx1ZXMgPSB2YWx1ZQ0KICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB0aGlzLmNvbmRpdGlvbikNCiAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsIHRoaXMuY29uZGl0aW9uKQ0KICAgIH0sDQogICAgb25PcGVuQ2hhbmdlKG9wZW4pIHsNCiAgICAgIGlmICghb3BlbiAmJiAhdGhpcy5pc1ZhbGlkVGltZSh0aGlzLnRpbWVWYWx1ZXMpKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZyh0aGlzLndhcm5pbmcpDQogICAgICAgIHRoaXMudGltZVZhbHVlcyA9IHRoaXMubGFzdFRpbWVWYWx1ZXMNCiAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB0aGlzLmNvbmRpdGlvbikNCiAgICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJywgdGhpcy5jb25kaXRpb24pDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgIH0sDQogICAgaXNWYWxpZFRpbWUodmFsdWUpIHsNCiAgICAgIGlmKCF0aGlzLmRpc2FibGVkVHlwZSl7DQogICAgICAgIHJldHVybiB0cnVlDQogICAgICB9DQogICAgICBjb25zdCBbIGJlZ2luVGltZSwgZW5kVGltZSBdID0gdmFsdWUNCiAgICAgIGlmKCFiZWdpblRpbWUgfHwgIWVuZFRpbWUpew0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIH0NCiAgICAgIHJldHVybiAoDQogICAgICAgICh0aGlzLmRpc2FibGVkVHlwZSA9PSAnMmRheScgJiYgZW5kVGltZS5jbG9uZSgpLnN1YnRyYWN0KDIsICdkYXlzJykgPD0gYmVnaW5UaW1lKSB8fA0KICAgICAgICAodGhpcy5kaXNhYmxlZFR5cGUgPT0gJzMxZGF5JyAmJiBlbmRUaW1lLmNsb25lKCkuc3VidHJhY3QoMzEsICdkYXlzJykgPD0gYmVnaW5UaW1lKSB8fA0KICAgICAgICAodGhpcy5kaXNhYmxlZFR5cGUgPT0gJzFtb250aCcgJiYgZW5kVGltZS5jbG9uZSgpLnN1YnRyYWN0KDEsICdtb250aHMnKSA8PSBiZWdpblRpbWUpDQogICAgICApDQogICAgfSwNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBvdGhlckF0dHJzKCkgew0KICAgICAgcmV0dXJuIHRoaXMuc2hvd1RpbWUNCiAgICAgICAgPyB7DQogICAgICAgICAgICBmb3JtYXQ6ICdZWVlZLU1NLUREIEhIOm1tOnNzJywNCiAgICAgICAgICAgIHNob3dUaW1lOiB7DQogICAgICAgICAgICAgIGZvcm1hdDogJ0hIOm1tOnNzJywNCiAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBbbW9tZW50KCkuc3RhcnRPZignZGF5JyksIG1vbWVudCgpLmVuZE9mKCdkYXknKV0sDQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0NCiAgICAgICAgOiB7IGZvcm1hdDogJ1lZWVktTU0tREQnIH0NCiAgICB9LA0KICAgIGNvbmRpdGlvbigpIHsNCiAgICAgIHJldHVybiBbdGhpcy50aW1lVmFsdWVzWzBdLCB0aGlzLnRpbWVWYWx1ZXNbMV1dDQogICAgfSwNCiAgICB3YXJuaW5nKCkgew0KICAgICAgc3dpdGNoICh0aGlzLmRpc2FibGVkVHlwZSkgew0KICAgICAgICBjYXNlICcyZGF5JzoNCiAgICAgICAgICByZXR1cm4gJ+afpeivouaXtumXtOi3qOW6puS4jeiDvei2hei/hzQ45bCP5pe2Jw0KICAgICAgICBjYXNlICczMWRheSc6DQogICAgICAgICAgcmV0dXJuICfmn6Xor6Lml7bpl7Tot6jluqbkuI3og73otoXov4czMeWkqScNCiAgICAgICAgY2FzZSAnMW1vbnRoJzoNCiAgICAgICAgICByZXR1cm4gJ+WPquiDveafpeivouaXtumXtOi3qOW6pjHkuKrmnIjku6XlhoXnmoTmlbDmja4nDQogICAgICB9DQogICAgICByZXR1cm4gJycNCiAgICB9LA0KICB9LA0KICB3YXRjaDogew0KICAgIHZhbHVlKHZhbCkgew0KICAgICAgY29uc3QgWyBiZWdpblRpbWUsIGVuZFRpbWUgXSA9IHZhbA0KICAgICAgdGhpcy50aW1lVmFsdWVzID0gW2JlZ2luVGltZSwgZW5kVGltZV0NCiAgICB9LA0KICB9LA0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/DateRangePicker","sourcesContent":["<template>\r\n  <a-space :size=\"0\">\r\n    <a-range-picker\r\n      v-bind=\"otherAttrs\"\r\n      :disabled-date=\"disabledRangePicker\"\r\n      :value=\"timeValues\"\r\n      :allowClear=\"allowClear\"\r\n      @change=\"onChangeTime\"\r\n      @openChange=\"onOpenChange\"\r\n      @ok=\"onChangeTimeOk\"\r\n    >\r\n      <a-icon slot=\"suffixIcon\" type=\"calendar\" />\r\n    </a-range-picker>\r\n  </a-space>\r\n</template>\r\n<script>\r\nimport PropTypes from 'ant-design-vue/es/_util/vue-types'\r\nimport { DatepickerMixin } from '@/core/mixins'\r\n\r\nimport moment from 'moment'\r\nexport default {\r\n  props: {\r\n    disabledType: PropTypes.oneOf(['2day', '31day', '1month', undefined]).def(undefined),\r\n    value: PropTypes.array.def([]),\r\n    allowClear: PropTypes.bool.def(true),\r\n    showTime: PropTypes.bool.def(false),\r\n  },\r\n  mixins: [DatepickerMixin],\r\n  data() {\r\n    const [beginTime, endTime] = this.value\r\n    return {\r\n      timeValues: [beginTime, endTime],\r\n      lastTimeValues: [beginTime, endTime],\r\n    }\r\n  },\r\n  created() {\r\n    this.$emit('input', this.condition)\r\n    this.$emit('change', this.condition)\r\n  },\r\n  methods: {\r\n    onChangeTime(value) {\r\n      if (this.isValidTime(value)) {\r\n        this.lastTimeValues = value\r\n      }\r\n      this.timeValues = value\r\n      this.$emit('input', this.condition)\r\n      this.$emit('change', this.condition)\r\n    },\r\n    onChangeTimeOk(value) {\r\n      if (!this.isValidTime(value)) {\r\n        return\r\n      }\r\n      this.lastTimeValues = value\r\n      this.timeValues = value\r\n      this.$emit('input', this.condition)\r\n      this.$emit('change', this.condition)\r\n    },\r\n    onOpenChange(open) {\r\n      if (!open && !this.isValidTime(this.timeValues)) {\r\n        this.$message.warning(this.warning)\r\n        this.timeValues = this.lastTimeValues\r\n        this.$emit('input', this.condition)\r\n        this.$emit('change', this.condition)\r\n        return\r\n      }\r\n    },\r\n    isValidTime(value) {\r\n      if(!this.disabledType){\r\n        return true\r\n      }\r\n      const [ beginTime, endTime ] = value\r\n      if(!beginTime || !endTime){\r\n        return false\r\n      }\r\n      return (\r\n        (this.disabledType == '2day' && endTime.clone().subtract(2, 'days') <= beginTime) ||\r\n        (this.disabledType == '31day' && endTime.clone().subtract(31, 'days') <= beginTime) ||\r\n        (this.disabledType == '1month' && endTime.clone().subtract(1, 'months') <= beginTime)\r\n      )\r\n    },\r\n  },\r\n  computed: {\r\n    otherAttrs() {\r\n      return this.showTime\r\n        ? {\r\n            format: 'YYYY-MM-DD HH:mm:ss',\r\n            showTime: {\r\n              format: 'HH:mm:ss',\r\n              defaultValue: [moment().startOf('day'), moment().endOf('day')],\r\n            },\r\n          }\r\n        : { format: 'YYYY-MM-DD' }\r\n    },\r\n    condition() {\r\n      return [this.timeValues[0], this.timeValues[1]]\r\n    },\r\n    warning() {\r\n      switch (this.disabledType) {\r\n        case '2day':\r\n          return '查询时间跨度不能超过48小时'\r\n        case '31day':\r\n          return '查询时间跨度不能超过31天'\r\n        case '1month':\r\n          return '只能查询时间跨度1个月以内的数据'\r\n      }\r\n      return ''\r\n    },\r\n  },\r\n  watch: {\r\n    value(val) {\r\n      const [ beginTime, endTime ] = val\r\n      this.timeValues = [beginTime, endTime]\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n</style>"]}]}