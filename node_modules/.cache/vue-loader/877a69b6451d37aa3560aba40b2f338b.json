{"remainingRequest":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\operationManage\\memberReward\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\src\\views\\operationManage\\memberReward\\index.vue","mtime":1615171048165},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\merchant-manager-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport list from '@/mixins/list'\r\nimport tier from '@/mixins/tier'\r\nimport { mapGetters } from 'vuex'\r\nimport dayjs from 'dayjs'\r\nimport { routerNames } from '@/utils/consts'\r\nimport SelectAgentTree from '@/components/SelectAgentTree'\r\nimport router from '@/router'\r\n\r\nexport default {\r\n\tname: routerNames.memberReward,\r\n\tcomponents: { SelectAgentTree },\r\n\tmixins: [list, tier],\r\n\tdata() {\r\n\t\tconst end = dayjs()\r\n\t\t\t.endOf('day')\r\n\t\t\t.subtract(1, 'd')\r\n\t\t\t.valueOf()\r\n\t\tconst start = dayjs()\r\n\t\t\t.subtract(1, 'd')\r\n\t\t\t.startOf('month')\r\n\t\t\t.valueOf()\r\n\r\n\t\treturn {\r\n\t\t\ttimestamp: Date.now(),\r\n\t\t\tloading: false,\r\n\t\t\tform: {\r\n\t\t\t\ttime: [start, end],\r\n\t\t\t\tagentId: '',\r\n\t\t\t\tplayerName: ''\r\n\t\t\t},\r\n\t\t\tsummary: {},\r\n\t\t\ttableDetail: [],\r\n\t\t\tsaveAgentId: ''\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters(['globalDics', 'agentId', 'userInfo'])\r\n\t},\r\n\tmethods: {\r\n\t\tloadData() {\r\n\t\t\tthis.loading = true\r\n\t\t\tconst form = {\r\n\t\t\t\tpageSize: this.pageSize,\r\n\t\t\t\tpageIndex: this.pageIndex,\r\n\t\t\t\tagentId: this.form.agentId,\r\n\t\t\t\tcreatedAtStart: this.form.time[0],\r\n\t\t\t\tplayerName: this.form.playerName,\r\n\t\t\t\tcreatedAtEnd: this.form.time[1]\r\n\t\t\t}\r\n\t\t\tthis.$api\r\n\t\t\t\t.memberReward(form)\r\n\t\t\t\t.then((_) => {\r\n\t\t\t\t\tif (_.code === 200) {\r\n\t\t\t\t\t\tconst { data } = _\r\n\t\t\t\t\t\tthis.tableDetail = data.record\r\n\t\t\t\t\t\tthis.summary = data.summary\r\n\t\t\t\t\t\tthis.total = data.totalRecord\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tif (err) {\r\n\t\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t},\r\n\t\thandleSearch() {\r\n\t\t\tthis.pageIndex = 1\r\n\t\t\tthis.loadData()\r\n\t\t},\r\n\r\n\t\thandleReset() {\r\n\t\t\tif (this.$route.query && JSON.stringify(this.$route.query) !== '{}') {\r\n\t\t\t\trouter.push(this.$route.path, () => {\r\n\t\t\t\t\tthis.resetCommon()\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tthis.resetCommon()\r\n\t\t\t}\r\n\t\t},\r\n\t\tresetCommon() {\r\n\t\t\tconst end = dayjs()\r\n\t\t\t\t.endOf('day')\r\n\t\t\t\t.subtract(1, 'd')\r\n\t\t\t\t.valueOf()\r\n\t\t\tconst start = dayjs()\r\n\t\t\t\t.subtract(1, 'd')\r\n\t\t\t\t.startOf('month')\r\n\t\t\t\t.valueOf()\r\n\r\n\t\t\tthis.form = {\r\n\t\t\t\ttime: [start, end],\r\n\t\t\t\tagentId: '',\r\n\t\t\t\tplayerName: ''\r\n\t\t\t}\r\n\t\t\tthis.levels = []\r\n\t\t\tthis.loadData()\r\n\t\t},\r\n\t\tgoPrev() {\r\n\t\t\trouter.push(`/operationManage/dealerReward`)\r\n\t\t},\r\n\t\tgetSummaries(param) {\r\n\t\t\tconst { columns } = param\r\n\t\t\tconst sums = []\r\n\t\t\tcolumns.forEach((column, index) => {\r\n\t\t\t\tif (index === 2) {\r\n\t\t\t\t\tsums[index] = this.$t('merchant_dailyrateaccount_index_800')\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (\r\n\t\t\t\t\tcolumn.property === 'totalRewardTimes' ||\r\n\t\t\t\t\tcolumn.property === 'totalRewardAmount' ||\r\n\t\t\t\t\tcolumn.property === 'agentShare'\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn (sums[index] = this.summary[column.property])\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn sums\r\n\t\t},\r\n\t\thandleCurrentChange() {\r\n\t\t\tthis.loadData()\r\n\t\t}\r\n\t}\r\n}\r\n",null]}